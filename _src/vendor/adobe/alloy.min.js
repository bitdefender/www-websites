(function(){if(document.documentMode&&document.documentMode<11)console.warn("The Adobe Experience Cloud Web SDK does not support IE 10 and below.");else{var dt="Chrome",ft="Edge",lt="EdgeChromium",gt="Unknown",de=function(e,n){return e.indexOf(n)!==-1},Nr=[dt,ft,lt,"IE",gt],Mr=function(e){return de(Nr,e)},pt=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Br=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if(Object.getOwnPropertyNames(n).map(function(o){return n[o]}).join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(e,n){for(var t,r,o=ja(e),a=1;a<arguments.length;a++){for(var i in t=Object(arguments[a]))Tr.call(t,i)&&(o[i]=t[i]);if(pt){r=pt(t);for(var c=0;c<r.length;c++)jr.call(t,r[c])&&(o[r[c]]=t[r[c]])}}return o},Z=Br,hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ve=vn(function(e,n){var t;t=function(){function r(){for(var a=0,i={};a<arguments.length;a++){var c=arguments[a];for(var u in c)i[u]=c[u]}return i}function o(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(i){function c(){}function u(d,f,l){if(typeof document<"u"){typeof(l=r({path:"/"},c.defaults,l)).expires=="number"&&(l.expires=new Date(1*new Date+864e5*l.expires)),l.expires=l.expires?l.expires.toUTCString():"";try{var y=JSON.stringify(f);/^[\{\[]/.test(y)&&(f=y)}catch{}f=i.write?i.write(f,d):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var v="";for(var R in l)l[R]&&(v+="; "+R,l[R]!==!0&&(v+="="+l[R].split(";")[0]));return document.cookie=d+"="+f+v}}function s(d,f){if(typeof document<"u"){for(var l={},y=document.cookie?document.cookie.split("; "):[],v=0;v<y.length;v++){var R=y[v].split("="),x=R.slice(1).join("=");f||x.charAt(0)!=='"'||(x=x.slice(1,-1));try{var A=o(R[0]);if(x=(i.read||i)(x,A)||o(x),f)try{x=JSON.parse(x)}catch{}if(l[A]=x,d===A)break}catch{}}return d?l[d]:l}}return c.set=u,c.get=function(d){return s(d,!1)},c.getJSON=function(d){return s(d,!0)},c.remove=function(d,f){u(d,"",r(f,{expires:-1}))},c.defaults={},c.withConverter=a,c}(function(){})},e.exports=t()}),we={get:Ve.get,set:Ve.set,remove:Ve.remove,withConverter:Ve.withConverter},Se=function(e){return e==null},ee=function(e){return!Se(e)&&!Array.isArray(e)&&ue(e)==="object"},Ur=function e(n,t){Object.keys(t).forEach(function(r){ee(n[r])&&ee(t[r])?e(n[r],t[r]):n[r]=t[r]})},ie=function(e){if(Se(e))throw new TypeError('deepAssign "target" cannot be null or undefined');for(var n=Object(e),t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.forEach(function(a){return Ur(n,Object(a))}),n},He=function(e,n){return function(t){var r=n.split(".").reduce(function(o,a){return o[a]=o[a]||{},o[a]},e);ie(r,t)}},be=function(){var e=[];return{add:function(n){e.push(n)},call:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return Promise.all(e.map(function(o){return o.apply(void 0,t)}))}}},yn=function(e){var n=e.logger,t=e.cookieJar;return L(L({},t),{},{set:function(r,o,a){n.info("Setting cookie",L({name:r,value:o},a)),t.set(r,o,a)}})},Fr=function(){for(var e=[],n=0;n<256;n++){for(var t=n,r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e.push(t)}return function(o,a){o=unescape(encodeURIComponent(o)),a||(a=0),a^=-1;for(var i=0;i<o.length;i++){var c=255&(a^o.charCodeAt(i));a=a>>>8^e[c]}return(a^=-1)>>>0}}(),wn=function(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e},mt=function(e,n){for(var t=0;t<e.length;t+=1){var r=e[t];if(n(r,t,e))return r}},Oe=function(e,n){return e.appendChild(n)},_r=function(e,n){Object.keys(n).forEach(function(t){if(t==="style"&&ee(n[t])){var r=n[t];Object.keys(r).forEach(function(o){e.style[o]=r[o]})}else e[t]=n[t]})},Ce=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:document,a=o.createElement(e);return Object.keys(n).forEach(function(i){a.setAttribute(i,n[i])}),_r(a,t),r.forEach(function(i){return Oe(a,i)}),a},Lr="BODY",Vr="IFRAME",ze="IMG",Je="STYLE",Ae="SCRIPT",Hr=function(e){var n=e.src,t=e.currentDocument,r=t===void 0?document:t;return new Promise(function(o,a){Ce(ze,{src:n},{onload:o,onerror:a,onabort:a},[],r)})},pe=function(e){return typeof e=="function"},z=function(e){return Array.isArray(e)&&e.length>0},We=function(e){return Array.isArray(e)?e:e==null?[]:[].slice.call(e)},zr=/^\s*>/,Qe=function(e,n){if(!zr.test(n))return We(e.querySelectorAll(n));var t="alloy-"+Date.now();try{return e.classList.add(t),We(e.querySelectorAll("."+t+" "+n))}finally{e.classList.remove(t)}},bn=function(e,n){return e.substr(0,n.length)===n},Cn=":shadow",Jr=function(e,n){var t=n.trim();return bn(t,">")?window.document.documentMode?t.substring(1).trim():(e instanceof Element||e instanceof HTMLDocument?":scope":":host")+" "+t:t},Wr=function(e,n){if(!window.document.documentElement.attachShadow)return Qe(e,n.replace(Cn,""));var t=function(c){return c.split(Cn)}(n);if(t.length<2)return Qe(e,n);for(var r=e,o=0;o<t.length;o+=1){var a=Jr(r,t[o]),i=Qe(r,a);if(i.length===0||!i[0]||!i[0].shadowRoot)return i;r=i[0].shadowRoot}},Qr=function(e){return e.indexOf(Cn)!==-1},me=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return Qr(e)?Wr(n,e):Qe(n,e)},Xr={childList:!0,subtree:!0},En=function(e){return new Error("Could not find: "+e)},In=function(e){return new Promise(e)},$r=function(e){return pe(e.MutationObserver)},Yr=function(e,n,t,r,o){return In(function(a,i){var c=new e.MutationObserver(function(){var u=o(t);z(u)&&(c.disconnect(),a(u))});setTimeout(function(){c.disconnect(),i(En(t))},r),c.observe(n,Xr)})},Kr=function(e){return e.visibilityState==="visible"},Zr=function(e,n,t,r){return In(function(o,a){(function i(){var c=r(n);z(c)?o(c):e.requestAnimationFrame(i)})(),setTimeout(function(){a(En(n))},t)})},Gr=function(e,n,t){return In(function(r,o){(function a(){var i=t(e);z(i)?r(i):setTimeout(a,100)})(),setTimeout(function(){o(En(e))},n)})},vt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:me,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5e3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:window,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:document,a=n(e);return z(a)?Promise.resolve(a):$r(r)?Yr(r,o,e,t,n):Kr(o)?Zr(r,e,t,n):Gr(e,t,n)},Ne=function(e){var n=e.parentNode;return n?n.removeChild(e):null},eo={name:"Adobe Alloy"},no={style:{display:"none",width:0,height:0}},ve=function(e){return ee(e)&&Object.keys(e).length===0},to=function e(n,t){return Se(n)||!ee(n)?n:Object.keys(n).reduce(function(r,o){var a=n[o];if(ee(a)){var i=e(a,t);return ve(i)?r:L(L({},r),{},ce({},o,i))}return t(a)?L(L({},r),{},ce({},o,a)):r},{})},Dn=function(e,n){return Array.prototype.concat.apply([],e.map(n))},ht="com.adobe.alloy.",Xe=ht+"getTld",kn=function(e){return e.replace("@","_")},Rn=function(e,n){return"kndctr_"+kn(e)+"_"+n},yt=function(e){var n=e.orgId,t=Rn(n,"identity");return function(){return!!we.get(t)}},wt=function(e,n,t){return{getItem:function(r){try{return e[n].getItem(t+r)}catch{return null}},setItem:function(r,o){try{return e[n].setItem(t+r,o),!0}catch{return!1}},clear:function(){try{return Object.keys(e[n]).forEach(function(r){bn(r,t)&&e[n].removeItem(r)}),!0}catch{return!1}}}},ro=function(e,n){return e.filter(function(t){return de(n,t)})},bt=function(e){return typeof e=="boolean"},$e=function(e){return typeof e=="number"&&!isNaN(e)},Ct=function(e){var n=parseInt(e,10);return $e(n)&&e===n},Me=function(e){return typeof e=="string"},he=function(e){return Me(e)&&e.length>0},ne=function(){},ye=function(e,n,t){var r=String(e),o=String(t);if(r.length>=n||o.length===0)return r;for(var a=n-r.length;a>o.length;)o+=o;return o.slice(0,a)+r},oo=function(e){if(Se(e)||ue(e)!=="object")return null;var n=to(e,function(t){return!Se(t)&&(!!bt(t)||!!$e(t)||!!he(t)||!!z(t))});return ve(n)?null:n},io=function(e,n,t,r){n=n||"&",t=t||"=";var o={};if(typeof e!="string"||e.length===0)return o;var a=/\+/g;e=e.split(n);var i=1e3;r&&typeof r.maxKeys=="number"&&(i=r.maxKeys);var c=e.length;i>0&&c>i&&(c=i);for(var u=0;u<c;++u){var s,d,f,l,y=e[u].replace(a,"%20"),v=y.indexOf(t);v>=0?(s=y.substr(0,v),d=y.substr(v+1)):(s=y,d=""),f=decodeURIComponent(s),l=decodeURIComponent(d),Ba(o,f)?Array.isArray(o[f])?o[f].push(l):o[f]=[o[f],l]:o[f]=l}return o},Te=function(e){switch(ue(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},ao=function(e,n,t,r){return n=n||"&",t=t||"=",e===null&&(e=void 0),ue(e)==="object"?Object.keys(e).map(function(o){var a=encodeURIComponent(Te(o))+t;return Array.isArray(e[o])?e[o].map(function(i){return a+encodeURIComponent(Te(i))}).join(n):a+encodeURIComponent(Te(e[o]))}).join(n):r?encodeURIComponent(Te(r))+t+encodeURIComponent(Te(e)):""},Pe=vn(function(e,n){n.decode=n.parse=io,n.encode=n.stringify=ao});Pe.decode,Pe.parse,Pe.encode,Pe.stringify;for(var Sn=function(e){return typeof e=="string"&&(e=e.trim().replace(/^[?#&]/,"")),Pe.parse(e)},uo=function(e){return Pe.stringify(e)},Et=function(e){return e instanceof Error?e:new Error(e)},It=function(e){var n=e.error,t=e.message;try{n.message=t}catch{}},Ye=function(e){var n=e.error,t=e.message,r=Et(n),o=t+`
Caused by: `+r.message;return It({error:r,message:o}),r},xe=function(e,n){if($e(e)||Me(e)){var t=Math.round(Number(e));if(!isNaN(t))return t}return n},co=vn(function(e){var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var r=new Array(16);e.exports=function(){for(var o,a=0;a<16;a++)(3&a)==0&&(o=4294967296*Math.random()),r[a]=o>>>((3&a)<<3)&255;return r}}}),Dt=[],Ke=0;Ke<256;++Ke)Dt[Ke]=(Ke+256).toString(16).substr(1);var so=function(e,n){var t=n||0,r=Dt;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")},On=function(e,n,t){var r=n&&t||0;typeof e=="string"&&(n=e==="binary"?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||co)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var a=0;a<16;++a)n[r+a]=o[a];return n||so(o)},Ze=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(o,a){return n(e(o,a),a)};return Z(r,e,t),r},J=function(e,n,t){return Ze(e,function(r,o){return r==null?r:n(r,o)},t)},X=function(e,n,t,r){if(!e)throw new Error("'"+t+"': Expected "+r+", but got "+JSON.stringify(n)+".")},fo=function(e,n){return X(bt(e),e,n,"true or false"),e},lo=function(e,n){return X(pe(e),e,n,"a function"),e},kt=function(e,n){return function(t,r){return X(t>=n,t,r,e+" greater than or equal to "+n),t}},Pn=function(e){return function(n,t){return ee(n)?X(!ve(n),n,t,e):X(n.length>0,n,t,e),n}},go=function(){return function(e,n){X(function(t){for(var r=Object.create(null),o=0;o<t.length;o+=1){var a=t[o];if(a in r)return!1;r[a]=!0}return!0}(e),e,n,"array values to be unique")}},po=/^[a-z0-9.-]{1,}$/i,mo=function(e,n){return X(po.test(e),e,n,"a valid domain"),e},vo=function(e,n){return X(Ct(e),e,n,"an integer"),e},ho=function(e,n){return X($e(e),e,n,"a number"),e},yo=function(e,n){return X(function(t){try{return new RegExp(t)!==null}catch{return!1}}(e),e,n,"a regular expression"),e},wo=function(e,n){if(e==null)throw new Error("'"+n+"' is a required option");return e},bo=function(e,n){return X(Me(e),e,n,"a string"),e},te=function(e){return e};te.default=function(e){return Ze(this,function(n){return function(t){return t??n}}(e))},te.required=function(){return Ze(this,wo)};var Co=function(){return J(this,mo)},Eo=function(e){return J(this,kt("an integer",e))},Io=function(e){return J(this,kt("a number",e))},Do=function(){return J(this,vo,{minimum:Eo})},ko=function(){return J(this,Pn("a non-empty string"))},Ro=function(){return J(this,Pn("a non-empty array"))},Rt=function(){return J(this,Pn("a non-empty object"))},So=function(){return J(this,yo)},St=function(){return J(this,(e=[],function(n,t){return X(e.indexOf(n)===-1,n,t,"a unique value across instances"),e.push(n),n}));var e},Oo=function(){return J(this,go())},Po=function(e,n){return Ze(this,function(t,r){return function(o,a){var i=mt(t,function(c){try{return c(o,a),!0}catch{return!1}});return X(i,o,a,r),o}}(e,n))}.bind(te),Ge=function(){return J(this,te)}.bind(te),fe=function(e){return J(this,function(n){return function(t,r){X(Array.isArray(t),t,r,"an array");var o=[],a=t.map(function(i,c){try{return n(i,r+"["+c+"]")}catch(u){return void o.push(u.message)}});if(o.length)throw new Error(o.join(`
`));return a}}(e),{nonEmpty:Ro,uniqueItems:Oo})}.bind(te),le=function(){return J(this,fo)}.bind(te),Ot=function(){return J(this,lo)}.bind(te),Pt=function(e){return J(this,function(n){return function(t,r){return X(t===n,t,r,""+n),t}}(e))}.bind(te);(function(){return J(this,ho,{minimum:Io,integer:Do,unique:St})}).bind(te);var xt=function(e){return J(this,(n=e,function(t,r){X(ee(t),t,r,"an object");var o=[],a={};if(Object.keys(t).forEach(function(i){var c=t[i],u=r?r+"."+i:i;try{var s=n(c,u);s!==void 0&&(a[i]=s)}catch(d){o.push(d.message)}}),o.length)throw new Error(o.join(`
`));return a}),{nonEmpty:Rt});var n}.bind(te),$=function(e){return J(this,function(n){return function(t,r){X(ee(t),t,r,"an object");var o=[],a={};if(Object.keys(n).forEach(function(i){var c=t[i],u=n[i],s=r?r+"."+i:i;try{var d=u(c,s);d!==void 0&&(a[i]=d)}catch(f){o.push(f.message)}}),Object.keys(t).forEach(function(i){Object.prototype.hasOwnProperty.call(a,i)||(a[i]=t[i])}),o.length)throw new Error(o.join(`
`));return a}}(e),{noUnknownFields:function(){return J(this,function(n){return function(t,r){var o=[];if(Object.keys(t).forEach(function(a){if(!n[a]){var i=r?r+"."+a:a;o.push("'"+i+"': Unknown field.")}}),o.length)throw new Error(o.join(`
`));return t}}(e))},nonEmpty:Rt})}.bind(te),W=function(){return J(this,bo,{regexp:So,domain:Co,nonEmpty:ko,unique:St})}.bind(te),qt=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Po(n.map(Pt),"one of these values: ["+JSON.stringify(n)+"]")},At=xt(fe($({authenticatedState:qt("ambiguous","authenticated","loggedOut"),id:W(),namespace:$({code:W()}).noUnknownFields(),primary:le(),xid:W()}).noUnknownFields()).required()),je=$({}),xo=function(e){var n,t=e.console,r=e.locationSearch,o=e.createLogger,a=e.instanceName,i=e.createNamespacedStorage,c=e.getMonitors,u=Sn(r),s=i("instance."+a+"."),d=s.session.getItem("debug"),f=d==="true",l=d===null,y=function(){return f},v=function(R,x){var A=x.fromConfig;A&&!l||(f=R),A||(s.session.setItem("debug",R.toString()),l=!1)};return u.alloy_debug!==void 0&&v((n=u.alloy_debug,Me(n)&&n.toLowerCase()==="true"),{fromConfig:!1}),{setDebugEnabled:v,logger:o({getDebugEnabled:y,context:{instanceName:a},getMonitors:c,console:t}),createComponentLogger:function(R){return o({getDebugEnabled:y,context:{instanceName:a,componentName:R},getMonitors:c,console:t})}}},qo=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick"],Ao=function(e){return qo.reduce(function(n,t){var r;return n[t]=(r=function(o,a){return function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return Promise.all(o.getLifecycleCallbacks(a).map(function(s){return new Promise(function(d){d(s.apply(void 0,c))})}))}}(e,t),function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return Promise.resolve().then(function(){return r.apply(void 0,a)})}),n},{})},Nt=function(e,n){return function(){var t;try{t=e.apply(void 0,arguments)}catch(r){throw Ye({error:r,message:n})}return t instanceof Promise&&(t=t.catch(function(r){throw Ye({error:r,message:n})})),t}},No=function(){var e={},n={};return{register:function(t,r){var o=r.commands,a=r.lifecycle;(function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=ro(Object.keys(e),Object.keys(c));if(u.length)throw new Error("[ComponentRegistry] Could not register "+i+" because it has existing command(s): "+u.join(","));Object.keys(c).forEach(function(s){var d=c[s];d.commandName=s,d.run=Nt(d.run,"["+i+"] An error occurred while executing the "+s+" command."),e[s]=d})})(t,o),function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.keys(c).forEach(function(u){n[u]=n[u]||[],n[u].push(Nt(c[u],"["+i+"] An error occurred while executing the "+u+" lifecycle hook."))})}(t,a)},getCommand:function(t){return e[t]},getCommandNames:function(){return Object.keys(e)},getLifecycleCallbacks:function(t){return n[t]||[]}}},xn="in",Mt="pending",Mo="general",Tt="declinedConsent",en="default",qn="initial",An="new",Nn=function(e){var n=new Error(e);return n.code=Tt,n.message=e,n},To=function(e){var n=e.logger,t=[],r=function(){return Promise.resolve()},o=function(){return Promise.resolve()},a=function(){return Promise.reject(Nn("No consent preferences have been set."))},i=function(){return Promise.reject(Nn("The user declined consent."))},c=function(u){if(u)return Promise.reject(new Error("Consent is pending."));var s=wn();return t.push(s),s.promise};return{in:function(u){u===en?this.awaitConsent=r:(u===qn?n.info("Loaded user consent preferences. The user previously consented."):u===An&&this.awaitConsent!==o&&n.info("User consented."),function(){for(;t.length;)t.shift().resolve()}(),this.awaitConsent=o)},out:function(u){u===en?(n.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=a):(u===qn?n.warn("Loaded user consent preferences. The user previously declined consent."):u===An&&this.awaitConsent!==i&&n.warn("User declined consent."),function(){for(;t.length;)t.shift().reject(Nn("The user declined consent."))}(),this.awaitConsent=i)},pending:function(u){u===en&&n.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=c},awaitConsent:function(){return Promise.reject(new Error("Consent has not been initialized."))},withConsent:function(){return this.awaitConsent(!0)}}},jo=function(){var e,n,t={},r=!1,o=!1,a=!0,i=function(u){if(o)throw new Error(u+" cannot be called after event is finalized.")},c={setUserXdm:function(u){i("setUserXdm"),e=u},setUserData:function(u){i("setUserData"),n=u},mergeXdm:function(u){i("mergeXdm"),u&&ie(t,{xdm:u})},mergeMeta:function(u){i("mergeMeta"),u&&ie(t,{meta:u})},mergeQuery:function(u){i("mergeQuery"),u&&ie(t,{query:u})},documentMayUnload:function(){r=!0},finalize:function(u){if(!o&&(e&&c.mergeXdm(e),n&&(t.data=n),o=!0,u)){a=!1;var s={xdm:t.xdm||{},data:t.data||{}},d=u(s);a=d!==!1,t.xdm=s.xdm||{},t.data=s.data||{},ve(t.xdm)&&delete t.xdm,ve(t.data)&&delete t.data}},getDocumentMayUnload:function(){return r},isEmpty:function(){return ve(t)&&(!e||ve(e))&&(!n||ve(n))},shouldSend:function(){return a},getViewName:function(){if(e&&e.web&&e.web.webPageDetails)return e.web.webPageDetails.viewName},toJSON:function(){if(!o)throw new Error("toJSON called before finalize");return t}};return c},Mn="configure",Tn="setDebug",Bo=function(e){var n=e.command,t=e.options,r=n.commandName,o=n.documentationUri,a=o===void 0?"https://adobe.ly/3sHgQHb":o,i=n.optionsValidator,c=t;if(i)try{c=i(t)}catch(u){throw new Error("Invalid "+r+` command options:
	 - `+u+" For command documentation see: "+a)}return c},jn=function(e){var n=e.eventManager,t=e.logger;return{commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:function(r){return function(o){var a=o.options;return $({type:W(),xdm:$({eventType:W(),identityMap:At}),data:$({}),documentUnloading:le(),renderDecisions:le(),decisionScopes:fe(W()).uniqueItems(),personalization:$({decisionScopes:fe(W()).uniqueItems(),surfaces:fe(W()).uniqueItems()}),datasetId:W(),mergeId:W(),edgeConfigOverrides:je}).required().noUnknownFields()(a)}({options:r})},run:function(r){var o=r.xdm,a=r.data,i=r.documentUnloading,c=i!==void 0&&i,u=r.type,s=r.mergeId,d=r.renderDecisions,f=d!==void 0&&d,l=r.decisionScopes,y=l===void 0?[]:l,v=r.personalization,R=v===void 0?{}:v,x=r.datasetId,A=r.edgeConfigOverrides,j=n.createEvent();c&&j.documentMayUnload(),j.setUserXdm(o),j.setUserData(a),u&&j.mergeXdm({eventType:u}),s&&j.mergeXdm({eventMergeId:s});var P={renderDecisions:f,decisionScopes:y,personalization:R};return A&&(P.edgeConfigOverrides=A),x&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.experience_platform.datasets.event' instead."),P.edgeConfigOverrides=A||{},ie(P.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:x}}}})),n.sendEvent(j,P)}},applyResponse:{documentationUri:"",optionsValidator:function(r){return function(o){var a=o.options;return $({renderDecisions:le(),responseHeaders:xt(W().required()),responseBody:$({handle:fe($({type:W().required(),payload:Ge().required()})).required()}).required()}).noUnknownFields()(a)}({options:r})},run:function(r){var o=r.renderDecisions,a=o!==void 0&&o,i=r.responseHeaders,c=i===void 0?{}:i,u=r.responseBody,s=u===void 0?{handle:[]}:u,d=n.createEvent();return n.applyResponse(d,{renderDecisions:a,responseHeaders:c,responseBody:s})}}}}};jn.namespace="DataCollector",jn.configValidators={};var Uo=function(e){var n=function(t){var r=t.eventManager,o=t.lifecycle,a=t.handleError;return function(i){var c=i.target,u=r.createEvent();return u.documentMayUnload(),o.onClick({event:u,clickedElement:c}).then(function(){return u.isEmpty()?Promise.resolve():r.sendEvent(u)}).then(ne).catch(function(s){a(s,"click collection")})}}({eventManager:e.eventManager,lifecycle:e.lifecycle,handleError:e.handleError});document.addEventListener("click",n,!0)},Fo={clickCollectionEnabled:le().default(!0),downloadLinkQualifier:W().regexp().default("\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$"),onBeforeLinkClickSend:Ot()},Ee=function(e){return e&&e.replace(/\s+/g," ").trim()},_o=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,Lo=function e(n){var t=[],r=!1;return function(o){return!(o&&o.nodeName&&o.nodeName.match(_o))}(n)?(t.push(n),n.childNodes&&Array.prototype.slice.call(n.childNodes).forEach(function(o){var a=e(o);t=t.concat(a.supportedNodes),r=r||a.includesUnsupportedNodes})):r=!0,{supportedNodes:t,includesUnsupportedNodes:r}},jt=function(e,n,t){var r;return t&&t!==e.nodeName.toUpperCase()||(r=e.getAttribute(n)),r},Vo=/^(HEADER|MAIN|FOOTER|NAV)$/i,Ho=function(e){var n;return e.role==="region"&&he(e["aria-label"])&&(n=e["aria-label"]),n},zo=function(e){var n;return e&&e.nodeName&&e.nodeName.match(Vo)&&(n=e.nodeName),n},Bt=function(e){var n=e.window,t=e.getLinkName,r=e.getLinkRegion,o=e.getAbsoluteUrlFromAnchorElement,a=e.findSupportedAnchorElement,i=e.determineLinkType;return function(c){var u=c.targetElement,s=c.config,d=c.logger,f=a(u);if(f){var l=o(n,f);if(l){var y=i(n,s,l,f),v=r(f),R=t(f),x=s.onBeforeLinkClickSend,A={xdm:{eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:R,region:v,type:y,URL:l,linkClicks:{value:1}}}},data:{},clickedElement:u};if(!x||x(A)!==!1)return A;d.info("This link click event is not triggered because it was canceled in onBeforeLinkClickSend.")}else d.info("This link click event is not triggered because the HTML element doesn't have an URL.")}else d.info("This link click event is not triggered because the HTML element is not an anchor.")}}({window,getLinkName:function(e){var n=Ee(e.innerText||e.textContent),t=Lo(e);if(!n||t.includesUnsupportedNodes){var r=function(o){var a={texts:[]};return o.supportedNodes.forEach(function(i){i.getAttribute&&(a.alt||(a.alt=Ee(i.getAttribute("alt"))),a.title||(a.title=Ee(i.getAttribute("title"))),a.inputValue||(a.inputValue=Ee(jt(i,"value","INPUT"))),a.imgSrc||(a.imgSrc=Ee(jt(i,"src","IMG")))),i.nodeValue&&a.texts.push(i.nodeValue)}),a}(t);(n=Ee(r.texts.join("")))||(n=r.alt||r.title||r.inputValue||r.imgSrc)}return n||""},getLinkRegion:function(e){for(var n,t=e.parentNode;t;){if(n=Ee(t.id||Ho(t)||zo(t)))return n;t=t.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:function(e,n){var t=e.location,r=n.href?n.href:"",o=n.protocol,a=n.host;if(!function(u){return u&&/^[a-z0-9]+:\/\//i.test(u)}(r)){o||(o=t.protocol?t.protocol:""),o=o?o+"//":"",a||(a=t.host?t.host:"");var i="";if(r.substring(0,1)!=="/"){var c=t.pathname.lastIndexOf("/");c=c<0?0:c,i=t.pathname.substring(0,c)}r=""+o+a+i+"/"+r}return r},findSupportedAnchorElement:function(e){for(var n,t=e;t;){if((n=t).href&&(n.tagName==="A"||n.tagName==="AREA")&&(!n.onclick||!n.protocol||n.protocol.toLowerCase().indexOf("javascript")<0))return t;t=t.parentNode}return null},determineLinkType:function(e,n,t,r){var o="other";return function(a,i,c){var u=new RegExp(a);return!!c.download||u.test(i.toLowerCase())}(n.downloadLinkQualifier,t,r)?o="download":function(a,i){var c=a.location.hostname.toLowerCase();return!(i.toLowerCase().indexOf(c)>=0)}(e,t)&&(o="exit"),o}}),nn=function(e){var n=e.config,t=e.eventManager,r=e.handleError,o=e.logger,a=function(i){var c=i.getLinkDetails,u=i.config,s=i.logger;return u.clickCollectionEnabled?function(d){var f=d.targetElement,l=d.event,y=c({targetElement:f,config:u,logger:s});y&&(l.mergeXdm(y.xdm),l.setUserData(y.data))}:function(){}}({getLinkDetails:Bt,config:n,logger:o});return{lifecycle:{onComponentsRegistered:function(i){var c=i.lifecycle;Uo({eventManager:t,lifecycle:c,handleError:r})},onClick:function(i){var c=i.event,u=i.clickedElement;a({targetElement:u,event:c})}}}};nn.namespace="ActivityCollector",nn.configValidators=Fo,nn.buildOnInstanceConfiguredExtraParams=function(e){var n=e.config,t=e.logger;return{getLinkDetails:function(r){return Bt({targetElement:r,config:n,logger:t})}}};var Ut,Ft,tn,_t=function(e,n){return"ID sync "+(n?"succeeded":"failed")+": "+e.spec.url},Jo={thirdPartyCookiesEnabled:le().default(!0),idMigrationEnabled:le().default(!0)},Wo=$({namespaces:fe(Pt("ECID")).nonEmpty().uniqueItems().default(["ECID"]),edgeConfigOverrides:je}).noUnknownFields().default({namespaces:["ECID"]}),Qo=$({url:W().required().nonEmpty(),edgeConfigOverrides:je}).required().noUnknownFields(),Xo=function(e){var n=e.logger;return new Promise(function(t,r){if(ee(window.adobe)&&ee(window.adobe.optIn)){var o=window.adobe.optIn;n.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),o.fetchPermissions(function(){o.isApproved([o.Categories.ECID])?(n.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):r(new Error("Legacy opt-in was declined."))},!0)}else t()})},$o=function(e){var n=e.logger,t=e.orgId,r=e.awaitVisitorOptIn;return function(){var o=function(a){var i=a.Visitor;return pe(i)&&pe(i.getInstance)&&i}(window);return o?r({logger:n}).then(function(){return n.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise(function(a){o.getInstance(t,{}).getMarketingCloudVisitorID(function(i){n.info("Resuming previously delayed request that was waiting for ECID from Visitor."),a(i)},!0)})}).catch(function(a){a?n.info(a.message+", retrieving ECID from experience edge"):n.info("An error occurred while obtaining the ECID from Visitor.")}):Promise.resolve()}},qe="ECID",Yo=function(e){e.mergeQuery({identity:{fetch:[qe]}})},Ko=(Ut=function(e){var n,t;return(ce(n={},ft,/Edge\/([0-9\._]+)/),ce(n,lt,/Edg\/([0-9\.]+)/),ce(n,dt,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/),ce(n,"Firefox",/Firefox\/([0-9\.]+)(?:\s|$)/),ce(n,"IE",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/),ce(n,"Safari",/Version\/([0-9\._]+).*Safari/),t=n,function(r){for(var o=Object.keys(t),a=0;a<o.length;a+=1){var i=o[a];if(t[i].test(r))return i}return gt})(e.navigator.userAgent)},tn=new Map,function(){var e=Ft?Ft.apply(void 0,arguments):arguments.length<=0?void 0:arguments[0];if(tn.has(e))return tn.get(e);var n=Ut.apply(void 0,arguments);return tn.set(e,n),n}),Zo=function(e,n){e.addIdentity(qe,{id:n})},Go=function(e){var n=e.getPayloadsByType("identity:result"),t=mt(n,function(r){return r.namespace&&r.namespace.code===qe});return t?t.id:void 0},Lt=function(e){return function(n,t){e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[n]=e.xdm.identityMap[n]||[],e.xdm.identityMap[n].push(t)}},Bn=function(e){var n=e.payload,t=e.getAction,r=e.getUseSendBeacon,o=On(),a=!1,i=!1;return{getId:function(){return o},getPayload:function(){return n},getAction:function(){return t({isIdentityEstablished:i})},getUseSendBeacon:function(){return r({isIdentityEstablished:i})},getUseIdThirdPartyDomain:function(){return a},setUseIdThirdPartyDomain:function(){a=!0},setIsIdentityEstablished:function(){i=!0}}},ei=function(e){var n=function(t){var r=t.isIdentityEstablished;return e.getDocumentMayUnload()&&r};return Bn({payload:e,getAction:function(t){var r=t.isIdentityEstablished;return n({isIdentityEstablished:r})?"collect":"interact"},getUseSendBeacon:n})},Un=function(e){var n=e.content,t=e.addIdentity,r=e.hasIdentity,o=He(n,"meta.configOverrides");return{mergeMeta:He(n,"meta"),mergeState:He(n,"meta.state"),mergeQuery:He(n,"query"),mergeConfigOverride:function(a){return o(oo(a))},addIdentity:t,hasIdentity:r,toJSON:function(){return n}}},Vt=function(e){return function(n){return(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[n])!==void 0}},ni=function(){var e={},n=Un({content:e,addIdentity:Lt(e),hasIdentity:Vt(e)});return n.addEvent=function(t){e.events=e.events||[],e.events.push(t)},n.getDocumentMayUnload=function(){return(e.events||[]).some(function(t){return t.getDocumentMayUnload()})},n},Ht="clientId",ti=function(e){return Bn({payload:e,getAction:function(){return"identity/acquire"},getUseSendBeacon:function(){return!1}})},ri=function(e){var n={query:{identity:{fetch:e}}};return Un({content:n,addIdentity:Lt(n),hasIdentity:Vt(n)})},oi=/^([^?#]*)(\??[^#]*)(#?.*)$/,Fn=function(e){var n=e.config,t=e.logger,r=e.consent,o=e.fireReferrerHideableImage,a=e.sendEdgeNetworkRequest,i=e.apexDomain,c=n.orgId,u=n.thirdPartyCookiesEnabled,s=n.edgeConfigOverrides,d=function(m){var S=m.config,q=m.getEcidFromVisitor,M=m.apexDomain,C=m.isPageSsl,O=m.cookieJar,g=S.idMigrationEnabled,h="AMCV_"+S.orgId,w=function(){var p=null,I=O.get("s_ecid")||O.get(h);if(I){var b=I.match(/(^|\|)MCMID\|(\d+)($|\|)/);b&&(p=b[2])}return p};return{getEcid:function(){if(g){var p=w();return p?Promise.resolve(p):q()}return Promise.resolve()},setEcid:function(p){if(g&&w()!==p){var I=C?{sameSite:"none",secure:!0}:{};O.set(h,"MCMID|"+p,L({domain:M,expires:390},I))}}}}({config:n,getEcidFromVisitor:$o({logger:t,orgId:c,awaitVisitorOptIn:Xo}),apexDomain:i,cookieJar:yn({logger:t,cookieJar:we}),isPageSsl:window.location.protocol==="https:"}),f=yt({orgId:c}),l=function(m){var S=m.sendEdgeNetworkRequest,q=m.createIdentityRequestPayload,M=m.createIdentityRequest,C=m.globalConfigOverrides;return function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=O.namespaces,h=O.edgeConfigOverrides,w=q(g),p=M(w);return w.mergeConfigOverride(C),w.mergeConfigOverride(h),S({request:p})}}({sendEdgeNetworkRequest:a,createIdentityRequestPayload:ri,createIdentityRequest:ti,globalConfigOverrides:s}),y=function(m){var S=m.thirdPartyCookiesEnabled,q=m.areThirdPartyCookiesSupportedByDefault;return function(M){S&&q(Ko(window))&&M.setUseIdThirdPartyDomain()}}({thirdPartyCookiesEnabled:u,areThirdPartyCookiesSupportedByDefault:Mr}),v=function(m){var S=m.getLegacyEcid,q=m.addEcidToPayload;return function(M){return M.hasIdentity(qe)?Promise.resolve():S().then(function(C){C&&q(M,C)})}}({getLegacyEcid:d.getEcid,addEcidToPayload:Zo}),R=function(m){var S=m.locationSearch,q=m.dateProvider,M=m.orgId,C=m.logger;return function(O){if(!O.hasIdentity(qe)){var g=Sn(S).adobe_mc;if(g!==void 0){var h=g.split("|").reduce(function(b,k){var E=ke(k.split("="),2),D=E[0],N=E[1];return b[D]=N,b},{}),w=parseInt(h.TS,10),p=h.MCMID,I=decodeURIComponent(h.MCORGID);q().getTime()/1e3<=w+300&&I===M&&p?(C.info("Found valid ECID identity "+p+" from the adobe_mc query string parameter."),O.addIdentity(qe,{id:p})):C.info("Detected invalid or expired adobe_mc query string parameter.")}}}}({locationSearch:window.document.location.search,dateProvider:function(){return new Date},orgId:c,logger:t}),x=function(m){var S=m.doesIdentityCookieExist,q=m.orgId;return function(M){var C=M.onResponse,O=M.onRequestFailure;return new Promise(function(g,h){C(function(){if(!S()){var w=new Error("An identity was not set properly. Please verify that the org ID "+q+" configured in Alloy matches the org ID specified in the edge configuration.");throw h(w),w}g()}),O(function(){S()?g():h(new Error("No identity was set on response."))})})}}({doesIdentityCookieExist:f,orgId:c}),A=function(m){var S,q=m.doesIdentityCookieExist,M=m.setDomainForInitialIdentityPayload,C=m.addLegacyEcidToPayload,O=m.awaitIdentityCookie,g=m.logger,h=function(w){return M(w),C(w.getPayload())};return function(w){var p=w.request,I=w.onResponse,b=w.onRequestFailure;if(q())return p.setIsIdentityEstablished(),Promise.resolve();if(S){g.info("Delaying request while retrieving ECID from server.");var k=S;return S=k.catch(function(){return O({onResponse:I,onRequestFailure:b})}),k.then(function(){g.info("Resuming previously delayed request."),p.setIsIdentityEstablished()}).catch(function(){return h(p)})}return S=O({onResponse:I,onRequestFailure:b}),h(p)}}({doesIdentityCookieExist:f,setDomainForInitialIdentityPayload:y,addLegacyEcidToPayload:v,awaitIdentityCookie:x,logger:t}),j=function(m){var S=m.fireReferrerHideableImage,q=m.logger;return function(M){var C=M.filter(function(O){return O.type==="url"});return C.length?Promise.all(C.map(function(O){return S(O.spec).then(function(){q.info(_t(O,!0))}).catch(function(){q.error(_t(O,!1))})})).then(ne):Promise.resolve()}}({fireReferrerHideableImage:o,logger:t}),P=function(m){var S=m.processIdSyncs;return function(q){return S(q.getPayloadsByType("identity:exchange"))}}({processIdSyncs:j}),B=function(m){var S=m.dateProvider,q=m.orgId;return function(M,C){var O=Math.round(S().getTime()/1e3),g=encodeURIComponent("TS="+O+"|MCMID="+M+"|MCORGID="+encodeURIComponent(q)),h=ke(C.match(oi),4),w=h[1],p=h[2],I=h[3],b=function(k){return k===""?"?":k==="?"?"":"&"}(p);return""+w+p+b+"adobe_mc="+g+I}}({dateProvider:function(){return new Date},orgId:c});return function(m){var S,q=m.addEcidQueryToPayload,M=m.addQueryStringIdentityToPayload,C=m.ensureSingleIdentity,O=m.setLegacyEcid,g=m.handleResponseForIdSyncs,h=m.getEcidFromResponse,w=m.getIdentity,p=m.consent,I=m.appendIdentityToUrl,b=m.logger,k={};return{lifecycle:{onBeforeRequest:function(E){var D=E.request,N=E.onResponse,U=E.onRequestFailure;return q(D.getPayload()),M(D.getPayload()),C({request:D,onResponse:N,onRequestFailure:U})},onResponse:function(E){var D=E.response;return S||(S=h(D))&&O(S),k=Z(k,D.getEdge()),g(D)}},commands:{getIdentity:{optionsValidator:Wo,run:function(E){return p.awaitConsent().then(function(){return S?void 0:w(E)}).then(function(){return{identity:{ECID:S},edge:k}})}},appendIdentityToUrl:{optionsValidator:Qo,run:function(E){return p.withConsent().then(function(){return S?void 0:w(E)}).then(function(){return{url:I(S,E.url)}}).catch(function(D){return b.warn("Unable to append identity to url. "+D.message),E})}}}}}({addEcidQueryToPayload:Yo,addQueryStringIdentityToPayload:R,ensureSingleIdentity:A,setLegacyEcid:d.setEcid,handleResponseForIdSyncs:P,getEcidFromResponse:Go,getIdentity:l,consent:r,appendIdentityToUrl:B,logger:t})};Fn.namespace="Identity",Fn.configValidators=Jo;var ii=function(e){var n=e.fireReferrerHideableImage,t=e.logger,r=e.cookieJar,o=e.isPageSsl?{sameSite:"none",secure:!0}:{};return function(a){return function(i){i.filter(function(c){return c.type==="cookie"}).forEach(function(c){var u=c.spec,s=u.name,d=u.value,f=u.domain,l=u.ttlDays;r.set(s,d||"",L({domain:f||"",expires:l||10},o))})}(a),function(i){var c=i.filter(function(u){return u.type==="url"});return Promise.all(c.map(function(u){return n(u.spec).then(function(){t.info(function(s,d){return"URL destination succeeded: "+s.spec.url}(u))}).catch(function(){})})).then(ne)}(a)}},ai=function(e){var n=e.processDestinations;return function(t){var r,o,a=t.response;return(r={response:a},o=r.response.getPayloadsByType("activation:push"),n(o)).then(function(){return{destinations:a.getPayloadsByType("activation:pull")}})}},_n=function(e){var n=e.logger,t=e.fireReferrerHideableImage,r=we.withConverter({write:function(i){return encodeURIComponent(i)}}),o=yn({logger:n,cookieJar:r}),a=ii({fireReferrerHideableImage:t,logger:n,cookieJar:o,isPageSsl:window.location.protocol==="https:"});return{lifecycle:{onResponse:ai({processDestinations:a})},commands:{}}};_n.namespace="Audiences",_n.configValidators={};var Ln,ui="web",ci="://",si=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,di=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,fi=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,li=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,zt=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/",n=e.length;n>0&&"/".indexOf(e.charAt(n-1))!==-1;)n-=1;return e.substring(0,n)||"/"},gi=function(e){return""+e.surfaceType+ci+e.authority+(e.path||"")+(e.fragment||"")},Jt=function(e){var n=e(),t=n.host.toLowerCase(),r=n.pathname;return"web://"+t+zt(r)},pi=function(e,n,t){var r=function(d){return t.warn(d),null};if(!he(e))return r("Invalid surface: "+e);var o,a,i,c,u=function(d,f){return bn(d,"#")?Jt(f)+d:d}(e,n),s=(c=u.match(si))?{surfaceType:(i=c[1],he(i)?i.toLowerCase():""),authority:(a=c[2],he(a)?a.toLowerCase():""),path:(o=c[3],he(o)?zt(o):"/"),fragment:c[4]}:null;return s===null?r("Invalid surface: "+e):de([ui,"webapp"],s.surfaceType)?s.authority&&di.test(s.authority)?s.path&&!fi.test(s.path)?r("Invalid path "+s.path+" in surface: "+e):s.fragment&&!li.test(s.fragment)?r("Invalid fragment "+s.fragment+" in surface: "+e):s:r("Invalid authority "+s.authority+" in surface: "+e):r("Unsupported surface type "+s.surfaceType+" in surface: "+e)},Ie="__view__",Wt="https://ns.adobe.com/personalization/default-content-item",Vn="https://ns.adobe.com/personalization/dom-action",Hn="https://ns.adobe.com/personalization/html-content-item",Qt="https://ns.adobe.com/personalization/redirect-item",Xt=function(e){return e.filter(function(n,t){return e.indexOf(n)===t})},mi=function(e){var n=e.getPageLocation,t=e.renderDecisions,r=e.decisionScopes,o=e.personalization,a=e.event,i=e.viewCache,c=e.logger,u=a.getViewName();return{isRenderDecisions:function(){return t},getViewName:function(){return u},hasScopes:function(){return r.length>0||z(o.decisionScopes)},hasSurfaces:function(){return z(o.surfaces)},hasViewName:function(){return he(u)},createQueryDetails:function(){var s=V(r);z(o.decisionScopes)&&s.push.apply(s,V(o.decisionScopes));var d=function(){var l=arguments.length>1?arguments[1]:void 0,y=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(function(v){return pi(v,l,y)}).filter(function(v){return!Se(v)}).map(gi)}(o.surfaces,n,c);this.isCacheInitialized()||(function(l){de(l,Ie)||l.push(Ie)}(s),function(l,y){var v=Jt(y);de(l,v)||l.push(v)}(d,n));var f=[Wt,Hn,"https://ns.adobe.com/personalization/json-content-item",Qt];return de(s,Ie)&&f.push(Vn),{schemas:f,decisionScopes:Xt(s),surfaces:Xt(d)}},isCacheInitialized:function(){return i.isInitialized()},shouldFetchData:function(){return this.hasScopes()||this.hasSurfaces()||!this.isCacheInitialized()},shouldUseCachedData:function(){return this.hasViewName()&&this.isCacheInitialized()}}},$t={propositions:[]},vi=function(e){var n=e.getPageLocation,t=e.logger,r=e.fetchDataHandler,o=e.viewChangeHandler,a=e.onClickHandler,i=e.isAuthoringModeEnabled,c=e.mergeQuery,u=e.viewCache,s=e.showContainers,d=e.applyPropositions,f=e.setTargetMigration;return{lifecycle:{onBeforeRequest:function(l){var y=l.request;return f(y),Promise.resolve()},onBeforeEvent:function(l){var y=l.event,v=l.renderDecisions,R=l.decisionScopes,x=R===void 0?[]:R,A=l.personalization,j=A===void 0?{}:A,P=l.onResponse,B=P===void 0?ne:P,m=l.onRequestFailure,S=m===void 0?ne:m;if(B(function(){return{propositions:[]}}),S(function(){return s()}),i())return t.warn("Rendering is disabled for authoring mode."),void c(y,{enabled:!1});var q=mi({getPageLocation:n,renderDecisions:v,decisionScopes:x,personalization:j,event:y,viewCache:u,logger:t});if(q.shouldFetchData()){var M=wn();return u.storeViews(M.promise),S(function(){return M.reject()}),void r({decisionsDeferred:M,personalizationDetails:q,event:y,onResponse:B})}return q.shouldUseCachedData()?o({personalizationDetails:q,event:y,onResponse:B,onRequestFailure:S}):void 0},onClick:function(l){var y=l.event,v=l.clickedElement;a({event:y,clickedElement:v})}},commands:{applyPropositions:{optionsValidator:function(l){return function(y){var v=y.logger,R=y.options,x=$({propositions:fe($(Ge())).nonEmpty(),metadata:$(Ge())}).required();try{return x(R)}catch(A){return v.warn("Invalid options for applyPropositions. No propositions will be applied.",A),$t}}({logger:t,options:l})},run:d}}}},Be=function(e){return Ce("DIV",{},{innerHTML:e})},hi=vn(function(e,n){var t;t=hn,e.exports=function(r){if(r.CSS&&r.CSS.escape)return r.CSS.escape;var o=function(a){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var i,c=String(a),u=c.length,s=-1,d="",f=c.charCodeAt(0);++s<u;)(i=c.charCodeAt(s))!=0?d+=i>=1&&i<=31||i==127||s==0&&i>=48&&i<=57||s==1&&i>=48&&i<=57&&f==45?"\\"+i.toString(16)+" ":s==0&&u==1&&i==45||!(i>=128||i==45||i==95||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122)?"\\"+c.charAt(s):c.charAt(s):d+="�";return d};return r.CSS||(r.CSS={}),r.CSS.escape=o,o}(t)}),yi=/:eq\((\d+)\)/g,Yt=function(e){return e.indexOf(":eq(")===-1},wi=/(#|\.)(-?\w+)/g,bi=function(e,n,t){return""+n+hi(t)},Ci=function(e){for(var n=[],t=function(c){return c.split(yi).filter(he)}(function(c){return c.replace(wi,bi)}(e.trim())),r=t.length,o=0;o<r;){var a=t[o],i=t[o+1];i?n.push({sel:a,eq:Number(i)}):n.push({sel:a}),o+=2}return n},zn=function(e){var n=document;if(Yt(e))return me(e,n);for(var t=Ci(e),r=t.length,o=[],a=n,i=0;i<r;){var c=t[i],u=c.sel,s=c.eq,d=me(u,a),f=d.length;if(f===0||s!=null&&s>f-1)break;i<r-1&&(s==null?a=ke(d,1)[0]:a=d[s]),i===r-1&&(o=s==null?d:[d[s]]),i+=1}return o},Kt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return n.getElementById(e)},Zt=function(e,n,t){e.setAttribute(n,t)},Ue=function(e,n){return e.getAttribute(n)},Gt=function(e){return e.parentNode},er=function(e,n){if(e){var t=Gt(e);t&&t.insertBefore(n,function(r){return r.nextElementSibling}(e))}},Jn=function(e,n){if(e){var t=Gt(e);t&&t.insertBefore(n,e)}},Fe=function(e){var n=e.childNodes;return n?We(n):[]},Ei=function(e){return e.firstElementChild},rn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(Ln===void 0){var n=e.querySelector("[nonce]");Ln=n&&(n.nonce||n.getAttribute("nonce"))}return Ln},Wn="alloy-prehiding",on={},nr=function(e){var n=on[e];n&&(Ne(n),delete on[e])},Ii=function(e){if(e&&!Kt(Wn)){var n=rn(),t=L({id:Wn},n&&{nonce:n}),r=Ce(Je,t,{textContent:e});Oe(document.head,r)}},an=function(){var e=Kt(Wn);e&&Ne(e)},Di=function(e,n){e.textContent=n},De="src",tr=function(e){return Ce(ze,{src:e})},un=function(e){me(ze,e).forEach(function(n){var t=Ue(n,De);t&&tr(t)})},ki=function(e){return function(n,t){return n.tagName===t}(e,Je)&&!Ue(e,De)},cn=function(e){var n=me(Je,e),t=n.length,r=rn();if(r)for(var o=0;o<t;o+=1){var a=n[o];ki(a)&&(a.nonce=r)}},Ri=setTimeout;H.prototype.catch=function(e){return this.then(null,e)},H.prototype.then=function(e,n){var t=new this.constructor(Ua);return xr(this,new Fa(e,n,t)),t},H.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},H.all=function(e){return new H(function(n,t){if(!Pr(e))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return n([]);var o=r.length;function a(c,u){try{if(u&&(ue(u)==="object"||typeof u=="function")){var s=u.then;if(typeof s=="function")return void s.call(u,function(d){a(c,d)},t)}r[c]=u,--o==0&&n(r)}catch(d){t(d)}}for(var i=0;i<r.length;i++)a(i,r[i])})},H.resolve=function(e){return e&&ue(e)==="object"&&e.constructor===H?e:new H(function(n){n(e)})},H.reject=function(e){return new H(function(n,t){t(e)})},H.race=function(e){return new H(function(n,t){if(!Pr(e))return t(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)H.resolve(e[r]).then(n,t)})},H._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){Ri(e,0)},H._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Qn,rr=(Qn=Object.freeze({__proto__:null,default:H}))&&Qn.default||Qn,Si=typeof window<"u"&&window.Promise||hn!==void 0&&hn.Promise||rr.default||rr,Oi=function(e){var n=document.createElement("script");n.src=e,n.async=!0;var t=function(r,o){return new Si(function(a,i){o.onload=function(){a(o)},o.onerror=function(){i(new Error("Failed to load script "+r))}})}(e,n);return document.getElementsByTagName("head")[0].appendChild(n),t},Xn=function(e,n){return!!e&&e.tagName===n},Pi=function(e){return Xn(e,Ae)&&!Ue(e,De)},xi=function(e){return Xn(e,Ae)&&Ue(e,De)},sn=function(e){for(var n=me(Ae,e),t=[],r=n.length,o=rn(),a=L({},o&&{nonce:o}),i=0;i<r;i+=1){var c=n[i];if(Pi(c)){var u=c.textContent;u&&t.push(Ce(Ae,a,{textContent:u}))}}return t},dn=function(e){for(var n=me(Ae,e),t=[],r=n.length,o=0;o<r;o+=1){var a=n[o];if(xi(a)){var i=Ue(a,De);i&&t.push(i)}}return t},fn=function(e,n){n.forEach(function(t){e.appendChild(t),e.removeChild(t)})},ln=function(e){return Promise.all(e.map(Oi))},or=function(e,n){var t=Be(n);cn(t);var r=Fe(t),o=sn(t),a=dn(t);return un(t),r.forEach(function(i){Oe(e,i)}),fn(e,o),ln(a)},qi=function(e,n){(function(t){Fe(t).forEach(Ne)})(e),or(e,n)},ir=function(e,n){var t=Be(n);cn(t);var r=Fe(t),o=sn(t),a=dn(t),i=r.length-1;for(un(t);i>=0;){var c=r[i],u=Ei(e);u?Jn(u,c):Oe(e,c),i-=1}return fn(e,o),ln(a)},ar=function(e,n){var t=Be(n);cn(t);var r=Fe(t),o=sn(t),a=dn(t);return un(t),r.forEach(function(i){Jn(e,i)}),fn(e,o),ln(a)},Ai=function(e,n){ar(e,n),Ne(e)},Ni=function(e,n){var t=Be(n);cn(t);var r=Fe(t),o=sn(t),a=dn(t);return un(t),r.forEach(function(i){er(e,i)}),fn(e,o),ln(a)},Mi=["priority"],$n=function(e,n){var t=n.priority,r=Sr(n,Mi);Object.keys(r).forEach(function(o){(function(a,i,c,u){var s;s=u?i+":"+c+" !"+u+";":i+":"+c+";",a.style.cssText+=";"+s})(e,o,r[o],t)})},Ti=function(e,n){Object.keys(n).forEach(function(t){Zt(e,t,n[t])})},ji=function(e,n){e.tagName===ze&&(tr(n),function(t,r){t.removeAttribute(r)}(e,De),Zt(e,De,n))},Bi=function(e,n){var t=n.from,r=n.to,o=function(c){var u=c.children;return u?We(u):[]}(e),a=o[t],i=o[r];a&&i&&(t<r?er(i,a):Jn(i,a))},G=function(e){return function(n){var t=n.selector,r=n.prehidingSelector,o=n.content,a=n.meta;return function(i){if(!on[i]){var c=rn(),u=L({},c&&{nonce:c}),s=Ce(Je,u,{textContent:i+" { visibility: hidden }"});Oe(document.head,s),on[i]=s}}(r),vt(t,zn).then(function(i){return function(c,u,s){var d=c.map(function(f){return s(f,u)});return Promise.all(d)}(i,o,e)}).then(function(){return nr(r),{meta:a}},function(i){return nr(r),{meta:a,error:i}})}},Ui=function(e){return{setHtml:G(qi),customCode:G(ir),setText:G(Di),setAttribute:G(Ti),setImageSource:G(ji),setStyle:G($n),move:G($n),resize:G($n),rearrange:G(Bi),remove:G(Ne),insertAfter:G(Ni),insertBefore:G(ar),replaceHtml:G(Ai),prependHtml:G(ir),appendHtml:G(or),click:function(n){return function(t,r){return r({selector:t.selector,meta:t.meta}),Promise.resolve()}(n,e)},defaultContent:function(n){return Promise.resolve({meta:n.meta})}}},ur=function(e,n,t){if(e.enabled){var r=JSON.stringify(n),o=t.message,a=t.stack,i="Failed to execute action "+r+". "+o+" "+(a?`
 `+a:"");e.error(i)}},Fi=[function(e){var n,t=Z({},e),r=t.content,o=t.selector;if(!Me(n=r)||!n.trim())return t;var a=zn(o);return Xn(a[0],"HEAD")&&(t.type="appendHtml",t.content=function(i){var c=Be(i);return me("SCRIPT,LINK,STYLE",c).map(function(u){return u.outerHTML}).join("")}(r)),t},function(e){var n=e.selector;return e.type!=="customCode"||n!=="BODY > *:eq(0)"?e:Z({},e,{selector:"BODY"})}],_i=function(e,n,t){var r=e.map(function(o){var a=function(c){return Fi.reduce(function(u,s){return Z(u,s(u))},c)}(o),i=a.type;return function(c,u,s,d){var f=u[s];if(!f){var l=new Error('DOM action "'+s+'" not found');throw ur(c,d[0],l),l}return f.apply(void 0,V(d))}(t,n,i,[a]).then(function(c){return function(u,s){if(u.enabled){var d=JSON.stringify(s);u.info("Action "+d+" executed.")}}(t,a),c}).catch(function(c){throw ur(t,a,c),c})});return Promise.all(r)},cr="display",Li="interact",Vi=function(e){return e},Hi=function(e,n){return e.characteristics&&e.characteristics.trackingLabel?Z({trackingLabel:e.characteristics.trackingLabel},n):n},zi=function(e){var n=e.modules,t=e.logger,r=e.executeActions;return function(o){var a=o.map(function(i){var c=function(u){var s={id:u.id,scope:u.scope,scopeDetails:u.scopeDetails};return u.items.map(function(d){return Z({type:"defaultContent"},d.data,{meta:Hi(d,s)})})}(i);return r(c,n,t)});return Promise.all(a).then(function(i){return function(c,u){var s=Dn(u,Vi),d=[],f=new Set;return s.forEach(function(l){if(l)if(l.error)c.warn(l);else{var y=l.meta;f.has(y.id)||(f.add(y.id),d.push(y))}}),d}(t,i)}).catch(function(i){t.error(i)})}},Ji=function(e,n){if(Yt(e))return function(a,i){return i.matches?i.matches(a):i.msMatchesSelector(a)}(e,n);for(var t=zn(e),r=!1,o=0;o<t.length;o+=1)if(t[o]===n){r=!0;break}return r},Wi=function(e,n,t){for(var r=document.documentElement,o=e,a=0;o&&o!==r;){if(Ji(n,o)){var i=t(n),c=i.find(function(u){return u.trackingLabel});return c?{metas:i,label:c.trackingLabel,weight:a}:{metas:i}}o=o.parentNode,a+=1}return{metas:null}},Qi=function(e){return e.map(function(n){return delete n.trackingLabel,n})},Xi=function(e){return e.filter(function(n,t){var r=JSON.stringify(n);return t===e.findIndex(function(o){return JSON.stringify(o)===r})})},$i=function(e,n,t){for(var r=[],o="",a=Number.MAX_SAFE_INTEGER,i=0;i<n.length;i+=1){var c=Wi(e,n[i],t),u=c.metas,s=c.label,d=c.weight;u&&(s&&d<=a&&(o=s,a=d),r.push.apply(r,V(Qi(u))))}return{decisionsMeta:Xi(r),eventLabel:o}},Yi=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return e.location.href.indexOf("adobe_authoring_enabled")!==-1},Yn=function(e,n,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",o={_experience:{decisioning:{propositions:n,propositionEventType:ce({},t,1)}}};r&&(o._experience.decisioning.propositionAction={label:r}),e.mergeXdm(o)},sr=function(e,n){e.mergeQuery({personalization:L({},n)})},gn=function(e){var n=e.decisions,t=e.renderAttempted;return n.map(function(r){return Z({renderAttempted:t},r)})},pn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t={propositions:gn({decisions:e,renderAttempted:n})};return n||(t.decisions=e),t},Ki=function(e,n){var t=[],r=[];return e.forEach(function(o){de(n,o.schema)?t.push(o):r.push(o)}),[t,r]},dr=function(e,n){return{id:e.id,scope:e.scope,items:n,scopeDetails:e.scopeDetails}},fr=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var o=[],a=[];return e.forEach(function(i){var c=i.items,u=ke(Ki(c===void 0?[]:c,t),2),s=u[0],d=u[1];z(s)&&o.push(dr(i,s)),z(d)&&a.push(dr(i,d))}),{matchedDecisions:o,unmatchedDecisions:a}},Zi=function(e){var n=[],t=[],r={};return z(e)&&e.forEach(function(o){var a,i;(i=o.scope)===Ie||function(c){return!!c&&c.indexOf("web://")===0&&c.indexOf("#")===-1}(i)?n.push(o):(a=o.scopeDetails).characteristics&&a.characteristics.scopeType&&a.characteristics.scopeType==="view"?function(c,u){c[u.scope]||(c[u.scope]=[]),c[u.scope].push(u)}(r,o):t.push(o)}),{pageWideScopeDecisions:n,nonPageWideScopeDecisions:t,viewScopeDecisions:r}},Gi=function(e){var n,t,r,o=fr(e,Qt),a=(n=o.unmatchedDecisions,t=n.filter(function(f){var l=f.items;return(l===void 0?[]:l).some(function(y){return y.schema==="https://ns.adobe.com/personalization/measurement"})}),r=n.filter(function(f){return!de(t,f)}),{matchedDecisions:t,unmatchedDecisions:r}),i=fr(a.unmatchedDecisions,Vn,Wt),c=Zi(i.matchedDecisions),u=c.pageWideScopeDecisions,s=c.nonPageWideScopeDecisions,d=c.viewScopeDecisions;return{redirectDecisions:o.matchedDecisions,pageWideScopeDecisions:u,viewDecisions:d,nonAutoRenderableDecisions:[].concat(V(a.matchedDecisions),V(i.unmatchedDecisions),V(s))}},ea=function(){var e={};return{storeClickMetrics:function(n){e[n.selector]||(e[n.selector]={}),e[n.selector][n.meta.id]={scope:n.meta.scope,scopeDetails:n.meta.scopeDetails,trackingLabel:n.meta.trackingLabel}},getClickSelectors:function(){return Object.keys(e)},getClickMetasBySelector:function(n){return e[n]?function(t){return Object.keys(t).map(function(r){return{id:r,scope:t[r].scope,scopeDetails:t[r].scopeDetails,trackingLabel:t[r].trackingLabel}})}(e[n]):{}}}},na=function(e){var n=e.viewCache;return function(t){var r=t.viewName,o=t.redirectDecisions,a=t.pageWideScopeDecisions,i=t.nonAutoRenderableDecisions,c=[].concat(V(o),V(a),V(i));return Promise.resolve(c).then(function(u){return function(s){var d=s.viewCache,f=s.viewName,l=s.propositions;return f?d.getView(f).then(function(y){return[].concat(V(y),V(l))}):l}({viewCache:n,viewName:r,propositions:u})}).then(function(u){return function(s){var d=s.propositions;return{decisions:d,propositions:gn({decisions:d,renderAttempted:!1})}}({propositions:u})})}},ta=[Vn,Hn],ra=function(e){var n=e.executeDecisions,t=function(a){return ta.indexOf(a.schema)>-1},r=function(a){return!(a.scope===Ie&&a.renderAttempted)},o=function(a){var i=function(c){var u=c.propositions,s=c.metadata;return u.filter(r).map(function(d){var f,l,y;return z(d.items)?{id:d.id,scope:d.scope,scopeDetails:d.scopeDetails,items:(f={items:d.items,metadataForScope:s[d.scope]},l=f.items,y=f.metadataForScope,l.filter(t).map(function(v){return v.schema!==Hn?L({},v):ee(y)?L(L({},v),{},{data:L(L({},v.data),{},{selector:y.selector,type:y.actionType})}):void 0}).filter(function(v){return v}))}:d}).filter(function(d){return z(d.items)})}({propositions:a.propositions,metadata:a.metadata});return n(i).then(function(){return pn(i,!0)})};return function(a){var i=a.propositions,c=a.metadata,u=c===void 0?{}:c;return z(i)?o({propositions:i,metadata:u}):Promise.resolve($t)}},Kn=function(e){var n,t,r=e.config,o=e.logger,a=e.eventManager,i=r.targetMigrationEnabled,c=r.prehidingStyle,u=function(C){var O=C.eventManager,g=C.mergeDecisionsMeta;return function(h){var w=h.decisionsMeta,p=w===void 0?[]:w,I=h.documentMayUnload,b=I!==void 0&&I,k=h.viewName,E=O.createEvent(),D={eventType:"decisioning.propositionDisplay"};return k&&(D.web={webPageDetails:{viewName:k}}),z(p)&&g(E,p,cr),E.mergeXdm(D),b&&E.documentMayUnload(),O.sendEvent(E)}}({eventManager:a,mergeDecisionsMeta:Yn}),s=ea(),d=s.getClickMetasBySelector,f=s.getClickSelectors,l=s.storeClickMetrics,y=function(C){var O=C.window;return function(){return O.location}}({window}),v=(t=wn(),{storeViews:function(C){C.then(function(O){n===void 0&&(n={}),Z(n,O),t.resolve()}).catch(function(){n===void 0&&(n={}),t.resolve()})},getView:function(C){return t.promise.then(function(){return n[C]||[]})},isInitialized:function(){return n!==void 0}}),R=Ui(l),x=zi({modules:R,logger:o,executeActions:_i}),A=function(C){var O=C.collect,g=C.window,h=C.logger,w=C.showContainers;return function(p){var I=function(E){var D=E[0],N=D.items,U=D.id,F=D.scope,_=D.scopeDetails;return{content:N[0].data.content,decisions:[{id:U,scope:F,scopeDetails:_}]}}(p),b=I.content,k=I.decisions;return O({decisionsMeta:k,documentMayUnload:!0}).then(function(){g.location.replace(b)}).catch(function(){w(),h.warn("An error occurred while executing the redirect offer.")})}}({collect:u,window,logger:o,showContainers:an}),j=function(C){var O=C.viewCache,g=C.executeDecisions,h=C.showContainers,w=C.collect;return function(p){var I=p.viewName,b=p.pageWideScopeDecisions,k=p.nonAutoRenderableDecisions;return Promise.resolve(b).then(function(E){return function(D){var N=D.viewCache,U=D.viewName,F=D.pageWideScopeDecisions;return U?N.getView(U).then(function(_){return{pageWideScopeDecisions:F,viewPropositions:_}}):{pageWideScopeDecisions:F,viewPropositions:[]}}({viewCache:O,viewName:I,pageWideScopeDecisions:E})}).then(function(E){return g(E.pageWideScopeDecisions).then(function(D){z(D)&&w({decisionsMeta:D})}),I&&g(E.viewPropositions).then(function(D){w({decisionsMeta:D,viewName:I})}),h(),[].concat(V(E.pageWideScopeDecisions),V(E.viewPropositions))}).then(function(E){return{decisions:V(k),propositions:[].concat(V(gn({decisions:E,renderAttempted:!0})),V(gn({decisions:k,renderAttempted:!1})))}})}}({viewCache:v,executeDecisions:x,showContainers:an,collect:u}),P=ra({executeDecisions:x}),B=function(C){var O=C.autoRenderingHandler,g=C.nonRenderingHandler,h=C.groupDecisions,w=C.handleRedirectDecisions,p=C.showContainers;return function(I){var b=I.decisionsDeferred,k=I.personalizationDetails,E=I.response.getPayloadsByType("personalization:decisions"),D=k.getViewName();if(E.length===0)return p(),b.resolve({}),{decisions:[],propositions:[]};var N=h(E),U=N.redirectDecisions,F=N.pageWideScopeDecisions,_=N.viewDecisions,T=N.nonAutoRenderableDecisions;return k.isRenderDecisions()&&z(U)?(b.resolve({}),w(U)):(b.resolve(_),k.isRenderDecisions()?O({viewName:D,pageWideScopeDecisions:F,nonAutoRenderableDecisions:T}):g({viewName:D,redirectDecisions:U,pageWideScopeDecisions:F,nonAutoRenderableDecisions:T}))}}({autoRenderingHandler:j,nonRenderingHandler:na({viewCache:v}),groupDecisions:Gi,handleRedirectDecisions:A,showContainers:an}),m=function(C){var O=C.prehidingStyle,g=C.responseHandler,h=C.hideContainers,w=C.mergeQuery;return function(p){var I=p.decisionsDeferred,b=p.personalizationDetails,k=p.event,E=p.onResponse;b.isRenderDecisions()&&h(O),w(k,b.createQueryDetails()),E(function(D){var N=D.response;return g({decisionsDeferred:I,personalizationDetails:b,response:N})})}}({prehidingStyle:c,responseHandler:B,hideContainers:Ii,mergeQuery:sr}),S=function(C){var O=C.mergeDecisionsMeta,g=C.collectClicks,h=C.getClickSelectors,w=C.getClickMetasBySelector;return function(p){var I=p.event,b=p.clickedElement,k=h();if(z(k)){var E=g(b,k,w),D=E.decisionsMeta,N=E.eventLabel;if(z(D)){var U={eventType:"decisioning.propositionInteract"},F=D[0].scope;F!==Ie&&(U.web={webPageDetails:{viewName:F}}),I.mergeXdm(U),O(I,D,Li,N)}}}}({mergeDecisionsMeta:Yn,collectClicks:$i,getClickSelectors:f,getClickMetasBySelector:d}),q=function(C){var O=C.mergeDecisionsMeta,g=C.collect,h=C.executeDecisions,w=C.viewCache;return function(p){var I=p.personalizationDetails,b=p.event,k=p.onResponse,E=I.getViewName();return w.getView(E).then(function(D){return I.isRenderDecisions()?h(D).then(function(N){if(z(N))return O(b,N,cr),void k(function(){return pn(D,!0)});k(function(){return g({decisionsMeta:[],viewName:E}),pn(D,!0)})}):(k(function(){return pn(D,!1)}),{})})}}({mergeDecisionsMeta:Yn,collect:u,executeDecisions:x,viewCache:v}),M=function(C){return C.targetMigrationEnabled?function(O){O.getPayload().mergeMeta({target:{migration:!0}})}:ne}({targetMigrationEnabled:i});return vi({getPageLocation:y,logger:o,fetchDataHandler:m,viewChangeHandler:q,onClickHandler:S,isAuthoringModeEnabled:Yi,mergeQuery:sr,viewCache:v,showContainers:an,applyPropositions:P,setTargetMigration:M})};Kn.namespace="Personalization",Kn.configValidators={prehidingStyle:W().nonEmpty(),targetMigrationEnabled:le().default(!1)};var lr,gr="2.17.0",pr=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]],oa=function(e){return function(n){var t={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};ie(n,{web:t})}}(window),ia=function(e){return function(n){var t=e.screen,r=t.width,o=t.height,a={},i=xe(o);i>=0&&(a.screenHeight=i);var c=xe(r);c>=0&&(a.screenWidth=c);var u=function(s){var d=s.screen.orientation;if(d==null||d.type==null)return null;var f=d.type.split("-");return f.length===0||f[0]!=="portrait"&&f[0]!=="landscape"?null:f[0]}(e)||function(s){if(pe(s.matchMedia)){if(s.matchMedia("(orientation: portrait)").matches)return"portrait";if(s.matchMedia("(orientation: landscape)").matches)return"landscape"}return null}(e);u&&(a.screenOrientation=u),Object.keys(a).length>0&&ie(n,{device:a})}}(window),aa=function(e){return function(n){var t=e.document.documentElement,r=(t=t===void 0?{}:t).clientWidth,o=t.clientHeight,a={type:"browser"},i=xe(r);i>=0&&(a.browserDetails={viewportWidth:i});var c=xe(o);c>=0&&(a.browserDetails=a.browserDetails||{},a.browserDetails.viewportHeight=c),ie(n,{environment:a})}}(window),ua=(lr=function(){return new Date},function(e){var n=lr(),t={},r=xe(n.getTimezoneOffset());r!==void 0&&(t.localTimezoneOffset=r),(r===void 0||Math.abs(r)<6e3)&&(t.localTime=function(o){var a=o.getFullYear(),i=ye(o.getMonth()+1,2,"0"),c=ye(o.getDate(),2,"0"),u=ye(o.getHours(),2,"0"),s=ye(o.getMinutes(),2,"0"),d=ye(o.getSeconds(),2,"0"),f=ye(o.getMilliseconds(),3,"0"),l=xe(o.getTimezoneOffset(),0);return a+"-"+i+"-"+c+"T"+u+":"+s+":"+d+"."+f+(l>0?"-":"+")+ye(Math.floor(Math.abs(l)/60),2,"0")+":"+ye(Math.abs(l)%60,2,"0")}(n)),ie(e,{placeContext:t})}),ca=function(e){return function(n){var t=e().toISOString();ie(n,{timestamp:t})}}(function(){return new Date}),mr={web:oa,device:ia,environment:aa,placeContext:ua},sa={highEntropyUserAgentHints:function(e){return function(n){return n.userAgentData!==void 0}(e)?function(n,t){try{return e.userAgentData.getHighEntropyValues(pr.map(function(r){return r[0]})).then(function(r){var o={};pr.forEach(function(a){var i=ke(a,2),c=i[0],u=i[1];Object.prototype.hasOwnProperty.call(r,c)&&ue(r[c])===u&&(o[c]=r[c])}),ie(n,{environment:{browserDetails:{userAgentClientHints:o}}})})}catch(r){return t.warn("Unable to collect user-agent client hints. "+r.message),ne}}:ne}(navigator)},da=L(L({},mr),sa),fa=[ca,function(e){ie(e,{implementationDetails:{name:"https://ns.adobe.com/experience/alloy",version:gr,environment:"browser"}})}],Zn=function(e){return function(n,t,r,o){var a=n.context,i=Dn(a,function(c,u){return r[c]?[r[c]]:(t.warn("Invalid context["+u+"]: '"+c+"' is not available."),[])}).concat(o);return{namespace:"Context",lifecycle:{onBeforeEvent:function(c){var u=c.event,s={};return Promise.all(i.map(function(d){return Promise.resolve(d(s,t))})).then(function(){return u.mergeXdm(s)})}}}}(e.config,e.logger,da,fa)};Zn.namespace="Context",Zn.configValidators={context:fe(W()).default(Object.keys(mr))};var la=function e(n){return Array.isArray(n)?n.map(function(t){return e(t)}):ue(n)==="object"&&n!==null?Object.keys(n).sort().reduce(function(t,r){return t[r]=e(n[r]),t},{}):n},ga=function(e){return Fr(JSON.stringify(la(e)))},pa=["standard","version"],Gn=function(e){return e.standard+"."+e.version},ma=function(){var e={},n=Un({content:e,addIdentity:function(t,r){e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(r)},hasIdentity:function(t){return(e.identityMap&&e.identityMap[t])!==void 0}});return n.setConsent=function(t){e.consent=t},n},va=function(e){return Bn({payload:e,getAction:function(){return"privacy/set-consent"},getUseSendBeacon:function(){return!1}})},ha=function(e){return e.split(";").reduce(function(n,t){var r=ke(t.split("="),2),o=r[0],a=r[1];return n[o]=a,n},{})},ya=$({consent:fe(Ge()).required().nonEmpty(),identityMap:At,edgeConfigOverrides:je}).noUnknownFields().required(),vr=function(e){var n,t,r=e.config,o=e.consent,a=e.sendEdgeNetworkRequest,i=e.createNamespacedStorage,c=r.orgId,u=r.defaultConsent,s=function(v){var R=v.parseConsentCookie,x=v.orgId,A=v.cookieJar,j=Rn(x,"consent");return{read:function(){var P=A.get(j);return P?R(P):{}},clear:function(){A.remove(j)}}}({parseConsentCookie:ha,orgId:c,cookieJar:we}),d=(n=0,t=Promise.resolve(),{addTask:function(v){n+=1;var R=function(){return v().finally(function(){n-=1})};return t=t.then(R,R)},get length(){return n}}),f=function(v){var R=v.createConsentRequestPayload,x=v.createConsentRequest,A=v.sendEdgeNetworkRequest,j=v.edgeConfigOverrides;return function(P){var B=P.consentOptions,m=P.identityMap,S=P.edgeConfigOverrides,q=R();q.setConsent(B),q.mergeConfigOverride(j),q.mergeConfigOverride(S),ee(m)&&Object.keys(m).forEach(function(C){m[C].forEach(function(O){q.addIdentity(C,O)})});var M=x(q);return A({request:M}).then(function(){})}}({createConsentRequestPayload:ma,createConsentRequest:va,sendEdgeNetworkRequest:a,edgeConfigOverrides:r.edgeConfigOverrides}),l=function(v){var R=v.storage;return{clear:function(){R.clear()},lookup:function(x){var A={},j=function(P){var B=Gn(P);P.standard,P.version;var m=Sr(P,pa);return A[B]||(A[B]=ga(m).toString()),A[B]};return{isNew:function(){return x.some(function(P){var B=Gn(P),m=R.getItem(B);return m===null||m!==j(P)})},save:function(){x.forEach(function(P){var B=Gn(P);R.setItem(B,j(P))})}}}}}({storage:i(kn(c)+".consentHashes.").persistent}),y=yt({orgId:c});return function(v){var R=v.storedConsent,x=v.taskQueue,A=v.defaultConsent,j=v.consent,P=v.sendSetConsentRequest,B=v.validateSetConsentOptions,m=v.consentHashStore,S=v.doesIdentityCookieExist,q=ce({},Mo,A),M=R.read(),C=S(),O=M.general!==void 0;C&&O||m.clear(),C||(R.clear(),M={}),j.initializeConsent(q,M);var g=function(){if(x.length===0){var h=R.read();h.general!==void 0&&j.setConsent(h)}};return{commands:{setConsent:{optionsValidator:B,run:function(h){var w=h.consent,p=h.identityMap,I=h.edgeConfigOverrides;j.suspend();var b=m.lookup(w);return x.addTask(function(){return b.isNew()?P({consentOptions:w,identityMap:p,edgeConfigOverrides:I}):Promise.resolve()}).then(function(){return b.save()}).finally(g)}}},lifecycle:{onResponse:g,onRequestFailure:g}}}({storedConsent:s,taskQueue:d,defaultConsent:u,consent:o,sendSetConsentRequest:f,validateSetConsentOptions:ya,consentHashStore:l,doesIdentityCookieExist:y})};vr.namespace="Privacy";var wa=function(){return{eventMergeId:On()}},et=function(){return{commands:{createEventMergeId:{run:wa}}}};et.namespace="EventMerge",et.configValidators={};var hr=function(e){var n=function(t){var r=t.config,o=t.componentRegistry,a=[].concat(V(o.getCommandNames()),[Mn,Tn]).sort(),i=L({},r);return Object.keys(r).forEach(function(c){var u=r[c];typeof u=="function"&&(i[c]=u.toString())}),{version:gr,configs:i,commands:a}}({config:e.config,componentRegistry:e.componentRegistry});return{commands:{getLibraryInfo:{run:function(){return{libraryInfo:n}}}}}};hr.namespace="LibraryInfo";var ba=function(e){return{inferences:e.response.getPayloadsByType("rtml:inferences")}},nt=function(){return{lifecycle:{onResponse:ba},commands:{}}};nt.namespace="MachineLearning",nt.configValidators={};var tt,yr,wr=[jn,nn,Fn,_n,Kn,Zn,vr,et,hr,nt],Ca=function(e){var n=e.options,t=e.componentCreators,r=e.coreConfigValidators,o=e.createConfig,a=e.logger,i=e.setDebugEnabled,c=function(d,f){var l={};return Z(l,d),f.forEach(function(y){var v=y.configValidators;Z(l,v)}),l}(r,t),u=o(function(d,f){try{return $(d).noUnknownFields().required()(f)}catch(l){throw new Error(`Resolve these configuration problems:
	 - `+l.message.split(`
`).join(`
	 - `)+`
For configuration documentation see: https://adobe.ly/3sHh553`)}}(c,n));i(u.debugEnabled,{fromConfig:!0});var s=function(d,f,l){return l.reduce(function(y,v){var R=v.buildOnInstanceConfiguredExtraParams;return R&&Z(y,R({config:d,logger:f})),y},{})}(u,a,t);return a.logOnInstanceConfigured(L(L({},s),{},{config:u})),u},Ea=function(e){return Z({},e)},br=function(e){var n=e.errorPrefix,t=e.logger;return function(r,o){var a=Et(r);if(a.code===Tt)return t.warn("The "+o+" could not fully complete. "+a.message),{};throw It({error:a,message:n+" "+a.message}),a}},Ia=function(e){var n=e.getDebugEnabled,t=e.console,r=e.getMonitors,o=e.context,a="["+o.instanceName+"]";o.componentName&&(a+=" ["+o.componentName+"]");var i=function(u,s){var d=r();if(d.length>0){var f=Z({},o,s);d.forEach(function(l){l[u]&&l[u](f)})}},c=function(u){for(var s=arguments.length,d=new Array(s>1?s-1:0),f=1;f<s;f++)d[f-1]=arguments[f];i("onBeforeLog",{level:u,arguments:d}),n()&&t[u].apply(t,[a].concat(d))};return{get enabled(){return r().length>0||n()},logOnInstanceCreated:function(u){i("onInstanceCreated",u),c("info","Instance initialized.")},logOnInstanceConfigured:function(u){i("onInstanceConfigured",u),c("info","Instance configured. Computed configuration:",u.config)},logOnBeforeCommand:function(u){i("onBeforeCommand",u),c("info","Executing "+u.commandName+" command. Options:",u.options)},logOnCommandResolved:function(u){i("onCommandResolved",u),c("info",u.commandName+" command resolved. Result:",u.result)},logOnCommandRejected:function(u){i("onCommandRejected",u),c("error",u.commandName+" command was rejected. Error:",u.error)},logOnBeforeNetworkRequest:function(u){i("onBeforeNetworkRequest",u),c("info","Request "+u.requestId+": Sending request.",u.payload)},logOnNetworkResponse:function(u){i("onNetworkResponse",u);var s=u.parsedBody||u.body?"response body:":"no response body.";c("info","Request "+u.requestId+": Received response with status code "+u.statusCode+" and "+s,u.parsedBody||u.body)},logOnNetworkError:function(u){i("onNetworkError",u),c("error","Request "+u.requestId+": Network request failed.",u.error)},info:c.bind(null,"info"),warn:c.bind(null,"warn"),error:c.bind(null,"error")}},Cr="Event was canceled because the onBeforeEventSend callback returned false.",Da=function(e){var n=e.orgId,t=e.targetMigrationEnabled;return function(r){return function(o,a){return a.indexOf("kndctr_"+kn(o)+"_")===0}(n,r)||r==="at_qa_mode"||t&&r==="mbox"}},Er=function(e){var n=e.shift()||[],t=e.shift()||[],r=e;return Z.apply(void 0,[{}].concat(V(n),V(t),V(r)))},Ir=function(e){return function(n){var t=function(){throw n};return e.call({error:n}).then(t,t)}},rt="The server responded with a",ka=function(e){var n=e.orgId,t=e.cookieJar,r=Rn(n,"cluster");return function(){return t.get(r)||function(){var o=t.get("mboxEdgeCluster");if(o)return"t"+o}()}},Ra=[429,503,502,504],Sa=function(e){var n=e.response;return e.retriesAttempted<3&&de(Ra,n.statusCode)},Oa=function(e){var n=e.response,t=e.retriesAttempted,r=function(o){var a,i=o.getHeader("Retry-After");if(i){var c=parseInt(i,10);a=Ct(c)?1e3*c:Math.max(0,new Date(i).getTime()-new Date().getTime())}return a}(n);return r===void 0&&(r=function(o){var a=1e3+1e3*o,i=.3*a,c=a-i,u=a+i;return Math.round(c+Math.random()*(u-c))}(t)),r},ot=(tt=window,function(e){var n=ht+e;return{session:wt(tt,"sessionStorage",n),persistent:wt(tt,"localStorage",n)}}),mn=window,Pa=mn.console,Dr=mn.fetch,it=mn.navigator,xa=mn.XMLHttpRequest,qa=function(){return window.__alloyMonitors||[]},Aa={debugEnabled:le().default(!1),defaultConsent:qt(xn,"out",Mt).default(xn),edgeConfigId:W().unique().required(),edgeDomain:W().domain().default("edge.adobedc.net"),edgeBasePath:W().nonEmpty().default("ee"),orgId:W().unique().required(),onBeforeEventSend:Ot().default(ne),edgeConfigOverrides:je},kr=function(e,n){for(var t,r,o="",a=e.location.hostname.toLowerCase().split("."),i=1;i<a.length&&!n.get(Xe);)o=(t=a,r=i+=1,t.slice(-r)).join("."),n.set(Xe,Xe,{domain:o});return n.remove(Xe,{domain:o}),o}(window,we),at=pe(Dr)?function(e){var n=e.fetch;return function(t,r){return n(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:r}).then(function(o){return o.text().then(function(a){return{statusCode:o.status,getHeader:function(i){return o.headers.get(i)},body:a}})})}}({fetch:Dr}):function(e){var n=e.XMLHttpRequest;return function(t,r){return new Promise(function(o,a){var i=new n;i.onreadystatechange=function(){i.readyState===4&&(i.status===0?a(new Error("Request aborted.")):o({statusCode:i.status,getHeader:function(c){return i.getResponseHeader(c)},body:i.responseText}))},i.onloadstart=function(){i.responseType="text"},i.open("POST",t,!0),i.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),i.withCredentials=!0,i.onerror=a,i.onabort=a,i.send(r)})}}({XMLHttpRequest:xa}),Na=function(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.appendNode,r=t===void 0?Oe:t,o=n.awaitSelector,a=o===void 0?vt:o,i=n.createNode,c=i===void 0?Ce:i,u=n.fireImage,s=u===void 0?Hr:u,d=s,f=function(){return a(Lr).then(function(y){var v=ke(y,1)[0];return e||(e=c(Vr,eo,no),r(v,e))})},l=function(y){var v=y.src;return f().then(function(R){var x=R.contentWindow.document;return s({src:v,currentDocument:x})})};return function(y){var v=y.hideReferrer,R=y.url;return v?l({src:R}):d({src:R})}}(),Ma=function(e){var n=e.window,t=(0,e.createNamespacedStorage)("validation.");return function(){var r=Sn(n.location.search).adb_validation_sessionid;if(!r)return"";var o=function(a){var i=a.persistent.getItem(Ht);return i||(i=On(),a.persistent.setItem(Ht,i)),i}(t);return"&"+uo({adobeAepValidationToken:r+"|"+o})}}({window,createNamespacedStorage:ot}),Ta=function(e){var n=e.instanceName,t=e.logController,r=t.setDebugEnabled,o=t.logger,a=t.createComponentLogger,i=No(),c=Ao(i),u=yn({logger:o,cookieJar:we}),s=br({errorPrefix:"["+n+"]",logger:o}),d=function(f){var l,y=f.logger,v=f.configureCommand,R=f.setDebugCommand,x=f.handleError,A=f.validateCommandOptions,j=function(P,B){var m;if(P===Mn){if(l)throw new Error("The library has already been configured and may only be configured once.");m=function(){return(l=v(B)).then(function(){})}}else{if(!l)throw new Error("The library must be configured first. Please do so by executing the configure command.");m=P===Tn?function(){return R(B)}:function(){return l.then(function(S){var q=S.getCommand(P);if(!q||!pe(q.run)){var M=[Mn,Tn].concat(S.getCommandNames()).join(", ");throw new Error("The "+P+" command does not exist. List of available commands: "+M+".")}var C=A({command:q,options:B});return q.run(C)},function(){return y.warn("An error during configuration is preventing the "+P+" command from executing."),new Promise(function(){})})}}return m};return function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(m){var S=j(P,B);y.logOnBeforeCommand({commandName:P,options:B}),m(S())}).catch(function(m){return x(m,P+" command")}).catch(function(m){throw y.logOnCommandRejected({commandName:P,options:B,error:m}),m}).then(function(m){var S=ee(m)?m:{};return y.logOnCommandResolved({commandName:P,options:B,result:S}),S})}}({logger:o,configureCommand:function(f){var l=Ca({options:f,componentCreators:wr,coreConfigValidators:Aa,createConfig:Ea,logger:o,setDebugEnabled:r}),y=l.orgId,v=l.targetMigrationEnabled,R=Da({orgId:y,targetMigrationEnabled:v}),x=function(g){var h=g.cookieJar,w=g.shouldTransferCookie,p=g.apexDomain,I=g.dateProvider;return{cookiesToPayload:function(b,k){var E,D=(E=p,k.substr(-E.length)===E),N={domain:p,cookiesEnabled:!0};if(!D){var U=h.get(),F=Object.keys(U).filter(w).map(function(_){return{key:_,value:U[_]}});F.length&&(N.entries=F)}b.mergeState(N)},responseToCookies:function(b){b.getPayloadsByType("state:store").forEach(function(k){var E={domain:p},D=k.attrs&&k.attrs.SameSite&&k.attrs.SameSite.toLowerCase();k.maxAge!==void 0&&(E.expires=new Date(I().getTime()+1e3*k.maxAge)),D!==void 0&&(E.sameSite=D),D==="none"&&(E.secure=!0),h.set(k.key,k.value,E)})}}}({cookieJar:u,shouldTransferCookie:R,apexDomain:kr,dateProvider:function(){return new Date}}),A=pe(it.sendBeacon)?function(g){var h=g.sendBeacon,w=g.sendFetchRequest,p=g.logger;return function(I,b){var k=new Blob([b],{type:"text/plain; charset=UTF-8"});return h(I,k)?Promise.resolve({statusCode:204,getHeader:function(){return null},body:""}):(p.info("Unable to use `sendBeacon`; falling back to `fetch`."),w(I,b))}}({sendBeacon:it.sendBeacon.bind(it),sendFetchRequest:at,logger:o}):at,j=function(g){var h=g.logger,w=g.sendFetchRequest,p=g.sendBeaconRequest,I=g.isRequestRetryable,b=g.getRequestRetryDelay;return function(k){var E=k.requestId,D=k.url,N=k.payload,U=k.useSendBeacon,F=JSON.stringify(N),_=JSON.parse(F);return h.logOnBeforeNetworkRequest({url:D,requestId:E,payload:_}),function T(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(U?p:w)(D,F).then(function(Y){var K;if(I({response:Y,retriesAttempted:Q})){var Re=b({response:Y,retriesAttempted:Q});return new Promise(function(ae){setTimeout(function(){ae(T(Q+1))},Re)})}try{K=JSON.parse(Y.body)}catch{}return h.logOnNetworkResponse(L(L({requestId:E,url:D,payload:_},Y),{},{parsedBody:K,retriesAttempted:Q})),{statusCode:Y.statusCode,body:Y.body,parsedBody:K,getHeader:Y.getHeader}})}().catch(function(T){throw h.logOnNetworkError({requestId:E,url:D,payload:_,error:T}),Ye({error:T,message:"Network request failed."})})}}({logger:o,sendFetchRequest:at,sendBeaconRequest:A,isRequestRetryable:Sa,getRequestRetryDelay:Oa}),P=function(g){var h=g.logger;return function(w){var p=w.statusCode,I=w.body,b=w.parsedBody;if(p<200||p>=300||!b&&p!==204||b&&!Array.isArray(b.handle)){var k=b?JSON.stringify(b,null,2):I;throw new Error(rt+" status code "+p+" and "+(k?`response body:
`+k:"no response body."))}if(b){var E=b.warnings,D=E===void 0?[]:E,N=b.errors,U=N===void 0?[]:N;D.forEach(function(F){h.warn(rt+" warning:",F)}),U.forEach(function(F){h.error(rt+" non-fatal error:",F)})}}}({logger:o}),B=function(g){var h=g.logger;return function(w){if(w){var p=w.split(";");if(p.length>=2&&p[1].length>0)try{var I=parseInt(p[1],10);if(!isNaN(I))return{regionId:I}}catch{}h.warn('Invalid adobe edge: "'+w+'"')}return{}}}({logger:o}),m=function(g){var h=g.extractEdgeInfo;return function(w){var p=w.content,I=p===void 0?{}:p,b=w.getHeader,k=I.handle,E=k===void 0?[]:k,D=I.errors,N=D===void 0?[]:D,U=I.warnings,F=U===void 0?[]:U;return{getPayloadsByType:function(_){return Dn(E.filter(function(T){return T.type===_}),function(T){return T.payload})},getErrors:function(){return N},getWarnings:function(){return F},getEdge:function(){return h(b("x-adobe-edge"))},toJSON:function(){return I}}}}({extractEdgeInfo:B}),S=ka({orgId:y,cookieJar:we}),q=function(g){var h=g.config,w=g.lifecycle,p=g.cookieTransfer,I=g.sendNetworkRequest,b=g.createResponse,k=g.processWarningsAndErrors,E=g.getLocationHint,D=g.getAssuranceValidationTokenParams,N=h.edgeDomain,U=h.edgeBasePath,F=h.edgeConfigId;return function(_){var T=_.request,Q=_.runOnResponseCallbacks,Y=Q===void 0?ne:Q,K=_.runOnRequestFailureCallbacks,Re=K===void 0?ne:K,ae=be();ae.add(w.onResponse),ae.add(Y);var se=be();return se.add(w.onRequestFailure),se.add(Re),w.onBeforeRequest({request:T,onResponse:ae.add,onRequestFailure:se.add}).then(function(){var re=T.getUseIdThirdPartyDomain()?"adobedc.demdex.net":N,ge=E(),oe="https://"+re+"/"+(ge?U+"/"+ge:U)+"/v1/"+T.getAction()+"?configId="+F+"&requestId="+T.getId()+D();return p.cookiesToPayload(T.getPayload(),re),I({requestId:T.getId(),url:oe,payload:T.getPayload(),useSendBeacon:T.getUseSendBeacon()})}).then(function(re){return k(re),re}).catch(Ir(se)).then(function(re){var ge=re.parsedBody,oe=re.getHeader,Le=b({content:ge,getHeader:oe});return p.responseToCookies(Le),ae.call({response:Le}).then(Er)})}}({config:l,lifecycle:c,cookieTransfer:x,sendNetworkRequest:j,createResponse:m,processWarningsAndErrors:P,getLocationHint:S,getAssuranceValidationTokenParams:Ma}),M=function(g){var h=g.cookieTransfer,w=g.lifecycle,p=g.createResponse,I=g.processWarningsAndErrors;return function(b){var k=b.request,E=b.responseHeaders,D=b.responseBody,N=b.runOnResponseCallbacks,U=N===void 0?ne:N,F=b.runOnRequestFailureCallbacks,_=F===void 0?ne:F,T=be();T.add(w.onResponse),T.add(U);var Q=be();Q.add(w.onRequestFailure),Q.add(_);var Y=function(K){return E[K]};return w.onBeforeRequest({request:k,onResponse:T.add,onRequestFailure:Q.add}).then(function(){return I({statusCode:200,getHeader:Y,body:JSON.stringify(D),parsedBody:D})}).catch(Ir(Q)).then(function(){var K=p({content:D,getHeader:Y});return h.responseToCookies(K),T.call({response:K}).then(Er)})}}({lifecycle:c,cookieTransfer:x,createResponse:m,processWarningsAndErrors:P}),C=function(g){var h=g.generalConsentState,w=g.logger,p=function(I,b){switch(I.general){case xn:h.in(b);break;case"out":h.out(b);break;case Mt:h.pending(b);break;default:w.warn("Unknown consent value: "+I.general)}};return{initializeConsent:function(I,b){b.general?p(b,qn):p(I,en)},setConsent:function(I){p(I,An)},suspend:function(){h.pending()},awaitConsent:function(){return h.awaitConsent()},withConsent:function(){return h.withConsent()}}}({generalConsentState:To({logger:o}),logger:o}),O=function(g){var h=g.config,w=g.logger,p=g.lifecycle,I=g.consent,b=g.createEvent,k=g.createDataCollectionRequestPayload,E=g.createDataCollectionRequest,D=g.sendEdgeNetworkRequest,N=g.applyResponse,U=h.onBeforeEventSend,F=h.edgeConfigOverrides;return{createEvent:b,sendEvent:function(_){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=T.renderDecisions,Y=Q!==void 0&&Q,K=T.decisionScopes,Re=T.edgeConfigOverrides,ae=T.personalization,se=k(),re=E(se),ge=be(),oe=be();return se.mergeConfigOverride(F),se.mergeConfigOverride(Re),p.onBeforeEvent({event:_,renderDecisions:Y,decisionScopes:K,personalization:ae,onResponse:ge.add,onRequestFailure:oe.add}).then(function(){return se.addEvent(_),I.awaitConsent()}).then(function(){try{_.finalize(U)}catch(Ar){var Le=function(){throw Ar};return oe.add(p.onRequestFailure),oe.call({error:Ar}).then(Le,Le)}if(!_.shouldSend()){oe.add(p.onRequestFailure),w.info(Cr);var _a=new Error(Cr);return oe.call({error:_a}).then(function(){})}return D({request:re,runOnResponseCallbacks:ge.call,runOnRequestFailureCallbacks:oe.call})})},applyResponse:function(_){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=T.renderDecisions,Y=Q!==void 0&&Q,K=T.responseHeaders,Re=K===void 0?{}:K,ae=T.responseBody,se=ae===void 0?{handle:[]}:ae,re=k(),ge=E(re),oe=be();return p.onBeforeEvent({event:_,renderDecisions:Y,decisionScopes:[Ie],personalization:{},onResponse:oe.add,onRequestFailure:ne}).then(function(){return re.addEvent(_),N({request:ge,responseHeaders:Re,responseBody:se,runOnResponseCallbacks:oe.call})})}}}({config:l,logger:o,lifecycle:c,consent:C,createEvent:jo,createDataCollectionRequestPayload:ni,createDataCollectionRequest:ei,sendEdgeNetworkRequest:q,applyResponse:M});return function(g){var h=g.componentCreators,w=g.lifecycle,p=g.componentRegistry,I=g.getImmediatelyAvailableTools;return h.forEach(function(b){var k,E=b.namespace,D=I(E);try{k=b(D)}catch(N){throw Ye({error:N,message:"["+E+"] An error occurred during component creation."})}p.register(E,k)}),w.onComponentsRegistered({lifecycle:w}).then(function(){return p})}({componentCreators:wr,lifecycle:c,componentRegistry:i,getImmediatelyAvailableTools:function(g){var h=a(g);return{config:l,componentRegistry:i,consent:C,eventManager:O,fireReferrerHideableImage:Na,logger:h,lifecycle:c,sendEdgeNetworkRequest:q,handleError:br({errorPrefix:"["+n+"] ["+g+"]",logger:h}),createNamespacedStorage:ot,apexDomain:kr}}})},setDebugCommand:function(f){r(f.enabled,{fromConfig:!1})},handleError:s,validateCommandOptions:Bo});return d};(yr=window.__alloyNS)&&yr.forEach(function(e){var n=xo({console:Pa,locationSearch:window.location.search,createLogger:Ia,instanceName:e,createNamespacedStorage:ot,getMonitors:qa}),t=function(o){return function(a){var i=a[0],c=a[1],u=a[2],s=u[0],d=u[1];o(s,d).then(i,c)}}(Ta({instanceName:e,logController:n})),r=window[e].q;r.push=t,n.logger.logOnInstanceCreated({instance:t}),r.forEach(t)})}function ja(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function vn(e,n){return e(n={exports:{}},n.exports),n.exports}function Rr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Rr(Object(t),!0).forEach(function(r){ce(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ue(e){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ue(e)}function ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Sr(e,n){if(e==null)return{};var t,r,o=function(i,c){if(i==null)return{};var u,s,d={},f=Object.keys(i);for(s=0;s<f.length;s++)u=f[s],c.indexOf(u)>=0||(d[u]=i[u]);return d}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function ke(e,n){return function(t){if(Array.isArray(t))return t}(e)||function(t,r){var o=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o!=null){var a,i,c=[],u=!0,s=!1;try{for(o=o.call(t);!(u=(a=o.next()).done)&&(c.push(a.value),!r||c.length!==r);u=!0);}catch(d){s=!0,i=d}finally{try{u||o.return==null||o.return()}finally{if(s)throw i}}return c}}(e,n)||Or(e,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(e){return function(n){if(Array.isArray(n))return ut(n)}(e)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(e)||Or(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Or(e,n){if(e){if(typeof e=="string")return ut(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ut(e,n):void 0}}function ut(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ba(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Pr(e){return!!(e&&e.length!==void 0)}function Ua(){}function H(e){if(!(this instanceof H))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],qr(e,this)}function xr(e,n){for(;e._state===3;)e=e._value;e._state!==0?(e._handled=!0,H._immediateFn(function(){var t=e._state===1?n.onFulfilled:n.onRejected;if(t!==null){var r;try{r=t(e._value)}catch(o){return void _e(n.promise,o)}ct(n.promise,r)}else(e._state===1?ct:_e)(n.promise,e._value)})):e._deferreds.push(n)}function ct(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(ue(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof H)return e._state=3,e._value=n,void st(e);if(typeof t=="function")return void qr(function(r,o){return function(){r.apply(o,arguments)}}(t,n),e)}e._state=1,e._value=n,st(e)}catch(r){_e(e,r)}}function _e(e,n){e._state=2,e._value=n,st(e)}function st(e){e._state===2&&e._deferreds.length===0&&H._immediateFn(function(){e._handled||H._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)xr(e,e._deferreds[n]);e._deferreds=null}function Fa(e,n,t){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function qr(e,n){var t=!1;try{e(function(r){t||(t=!0,ct(n,r))},function(r){t||(t=!0,_e(n,r))})}catch(r){if(t)return;t=!0,_e(n,r)}}})();
//# sourceMappingURL=alloy.min.js.map
