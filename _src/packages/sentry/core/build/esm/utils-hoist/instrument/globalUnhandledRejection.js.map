{"version":3,"file":"globalUnhandledRejection.js","sources":["../../../../../../../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/globalUnhandledRejection.js"],"sourcesContent":["import { GLOBAL_OBJ } from '../worldwide.js';\nimport { addHandler, maybeInstrument, triggerHandlers } from './handlers.js';\n\nlet _oldOnUnhandledRejectionHandler = null;\n\n/**\n * Add an instrumentation handler for when an unhandled promise rejection is captured.\n *\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\nfunction addGlobalUnhandledRejectionInstrumentationHandler(\n  handler,\n) {\n  const type = 'unhandledrejection';\n  addHandler(type, handler);\n  maybeInstrument(type, instrumentUnhandledRejection);\n}\n\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = GLOBAL_OBJ.onunhandledrejection;\n\n  // Note: The reason we are doing window.onunhandledrejection instead of window.addEventListener('unhandledrejection')\n  // is that we are using this handler in the Loader Script, to handle buffered rejections consistently\n  GLOBAL_OBJ.onunhandledrejection = function (e) {\n    const handlerData = e;\n    triggerHandlers('unhandledrejection', handlerData);\n\n    if (_oldOnUnhandledRejectionHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n\n  GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__ = true;\n}\n\nexport { addGlobalUnhandledRejectionInstrumentationHandler };\n//# sourceMappingURL=globalUnhandledRejection.js.map\n"],"names":["_oldOnUnhandledRejectionHandler","addGlobalUnhandledRejectionInstrumentationHandler","handler","type","addHandler","maybeInstrument","instrumentUnhandledRejection","GLOBAL_OBJ","e","triggerHandlers"],"mappings":"kIAGA,IAAIA,EAAkC,KAQtC,SAASC,EACPC,EACA,CACA,MAAMC,EAAO,qBACbC,EAAWD,EAAMD,CAAO,EACxBG,EAAgBF,EAAMG,CAA4B,CACpD,CAEA,SAASA,GAA+B,CACtCN,EAAkCO,EAAW,qBAI7CA,EAAW,qBAAuB,SAAUC,EAAG,CAI7C,OAFAC,EAAgB,qBADID,CAC6B,EAE7CR,EAEKA,EAAgC,MAAM,KAAM,SAAS,EAGvD,EACR,EAEDO,EAAW,qBAAqB,wBAA0B,EAC5D","x_google_ignoreList":[0]}