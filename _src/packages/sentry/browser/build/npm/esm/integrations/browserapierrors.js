import{WINDOW as p,wrap as l}from"../helpers.js";import{defineIntegration as m}from"../../../../../core/build/esm/integration.js";import{fill as i,getOriginalFunction as f}from"../../../../../core/build/esm/utils-hoist/object.js";import{getFunctionName as u}from"../../../../../core/build/esm/utils-hoist/stacktrace.js";const h=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],T="BrowserApiErrors",E=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:T,setupOnce(){e.setTimeout&&i(p,"setTimeout",d),e.setInterval&&i(p,"setInterval",d),e.requestAnimationFrame&&i(p,"requestAnimationFrame",y),e.XMLHttpRequest&&"XMLHttpRequest"in p&&i(XMLHttpRequest.prototype,"send",v);const n=e.eventTarget;n&&(Array.isArray(n)?n:h).forEach(A)}}},_=m(E);function d(t){return function(...e){const n=e[0];return e[0]=l(n,{mechanism:{data:{function:u(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function y(t){return function(e){return t.apply(this,[l(e,{mechanism:{data:{function:"requestAnimationFrame",handler:u(t)},handled:!1,type:"instrument"}})])}}function v(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in n&&typeof n[a]=="function"&&i(n,a,function(r){const o={mechanism:{data:{function:a,handler:u(r)},handled:!1,type:"instrument"}},c=f(r);return c&&(o.mechanism.data.handler=u(c)),l(r,o)})}),t.apply(this,e)}}function A(t){const n=p[t]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(i(n,"addEventListener",function(s){return function(a,r,o){try{L(r)&&(r.handleEvent=l(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:u(r),target:t},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[a,l(r,{mechanism:{data:{function:"addEventListener",handler:u(r),target:t},handled:!1,type:"instrument"}}),o])}}),i(n,"removeEventListener",function(s){return function(a,r,o){try{const c=r.__sentry_wrapped__;c&&s.call(this,a,c,o)}catch{}return s.call(this,a,r,o)}}))}function L(t){return typeof t.handleEvent=="function"}export{_ as browserApiErrorsIntegration};
//# sourceMappingURL=browserapierrors.js.map
