{"version":3,"file":"index.js","sources":["../../../../../../../../node_modules/@repobit/dex-data-layer/dist/src/events/user-detected-event/index.js"],"sourcesContent":["export class UserDetectedEvent {\n    event = 'user detected';\n    user;\n    constructor(page, userData) {\n        if (page && userData) {\n            const emarsysID = page.getParamValue('ems-uid') || page.getParamValue('sc_uid') || undefined;\n            this.user = {\n                loggedIN: userData.ID ? true : false\n            };\n            if (userData.ID) {\n                this.user.ID = userData.ID;\n            }\n            if (emarsysID) {\n                this.user.emarsysID = emarsysID;\n            }\n            if (userData.productFinding) {\n                this.user.productFinding = userData.productFinding;\n            }\n        }\n        else {\n            // find the existing user detected entry\n            const existingUserDetectedEvent = window.adobeDataLayer.find(adobeDataLayerEntry => adobeDataLayerEntry.event === 'user detected');\n            if (existingUserDetectedEvent) {\n                this.user = { ...existingUserDetectedEvent.user };\n            }\n            else {\n                this.user = { loggedIN: false };\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["UserDetectedEvent","page","userData","emarsysID","existingUserDetectedEvent","adobeDataLayerEntry"],"mappings":"AAAO,MAAMA,CAAkB,CAC3B,MAAQ,gBACR,KACA,YAAYC,EAAMC,EAAU,CACxB,GAAID,GAAQC,EAAU,CAClB,MAAMC,EAAYF,EAAK,cAAc,SAAS,GAAKA,EAAK,cAAc,QAAQ,GAAK,OACnF,KAAK,KAAO,CACR,SAAU,EAAAC,EAAS,EACtB,EACGA,EAAS,KACT,KAAK,KAAK,GAAKA,EAAS,IAExBC,IACA,KAAK,KAAK,UAAYA,GAEtBD,EAAS,iBACT,KAAK,KAAK,eAAiBA,EAAS,eAEpD,KACa,CAED,MAAME,EAA4B,OAAO,eAAe,KAAKC,GAAuBA,EAAoB,QAAU,eAAe,EAC7HD,EACA,KAAK,KAAO,CAAE,GAAGA,EAA0B,IAAM,EAGjD,KAAK,KAAO,CAAE,SAAU,EAAO,CAE/C,CACA,CACA","x_google_ignoreList":[0]}