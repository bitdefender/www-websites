{"version":3,"file":"hide.js","sources":["../../../../../../src/scripts/libs/store/resolver/staticAttributes/hide.js"],"sourcesContent":["import { parseKey } from \"../resolver.js\";\n\n/**\n * @param {HTMLElement} element \n * @param {import(\"../resolver.js\").Context} context \n */\nexport const resolve = (element, { product, option }) => {\n    if (!element.dataset.storeHide) { return; }\n\n    const [condition, type] = element.dataset.storeHide.split(\";\");\n    const [key, value] = condition ? condition.split(\"=\") : [];\n    const [, hideType] = type ? type.split(\"=\") : [];\n\n    /**\n     * Default hide is display none\n     * @param {HTMLElement} element \n     */\n    const hide = (element) => {\n        switch (hideType) {\n            case \"visibility\":\n                element.classList.add('global-visibility-hidden');\n                break;\n            case \"opacity\":\n                element.classList.add('global-opacity-zero');\n                break;\n            default:\n                element.classList.add('global-display-none');\n                break;\n        }\n    };\n\n    /**\n     * Default show is display unset\n     * @param {HTMLElement} element \n     */\n    const show = (element) => {\n        element.classList.remove('global-visibility-hidden', 'global-opacity-zero', 'global-display-none');\n    };\n\n    switch (key) {\n        case \"price\":\n            if (!option) { break; }\n            if (value === \"full\" && option.getPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n            if (value === \"discounted\" && option.getDiscountedPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n            if (value === undefined && option.getDiscountedPrice(\"value\") && option.getPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n\n            show(element);\n            break;\n        case \"no-price\":\n            if (!option) { break; }\n            if (value === \"full\" && !option.getPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n            if (value === \"discounted\" && !option.getDiscountedPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n            if (value === undefined && !option.getDiscountedPrice(\"value\") && !option.getPrice(\"value\")) {\n                hide(element);\n                break;\n            }\n\n            show(element);\n            break;\n        case \"no-option\":\n            if (value === undefined && !option) {\n                hide(element);\n                break;\n            }\n            if (!product.getOption(...parseKey(value))) {\n                hide(element);\n                break;\n            }\n\n            show(element);\n            break;\n        case \"if-true\":\n            if (value === \"true\") {\n                hide(element);\n            }\n            break;\n        case \"if-false\":\n            if (value === \"false\") {\n                hide(element);\n            }\n            break;\n        case \"if-product\":\n            if (value === product.getId()) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n        case \"if-not-product\":\n            if (value !== product.getId()) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n        case \"if-devices\":\n            if (Number(value) === option.getDevices()) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n        case \"if-not-devices\":\n            if (Number(value) !== option.getDevices()) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n        case \"if-years\":\n            if (Number(value) === option.getSubscription(\"years\")) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n        case \"if-not-years\":\n            if (Number(value) !== option.getSubscription(\"years\")) {\n                hide(element);\n            } else {\n                show(element);\n            }\n            break;\n    }\n}"],"names":["resolve","element","product","option","condition","type","key","value","hideType","hide","show","parseKey"],"mappings":"0CAMY,MAACA,EAAU,CAACC,EAAS,CAAE,QAAAC,EAAS,OAAAC,CAAM,IAAO,CACrD,GAAI,CAACF,EAAQ,QAAQ,UAAa,OAElC,KAAM,CAACG,EAAWC,CAAI,EAAIJ,EAAQ,QAAQ,UAAU,MAAM,GAAG,EACvD,CAACK,EAAKC,CAAK,EAAIH,EAAYA,EAAU,MAAM,GAAG,EAAI,CAAE,EACpD,CAAA,CAAGI,CAAQ,EAAIH,EAAOA,EAAK,MAAM,GAAG,EAAI,CAAE,EAM1CI,EAAQR,GAAY,CACtB,OAAQO,EAAQ,CACZ,IAAK,aACDP,EAAQ,UAAU,IAAI,0BAA0B,EAChD,MACJ,IAAK,UACDA,EAAQ,UAAU,IAAI,qBAAqB,EAC3C,MACJ,QACIA,EAAQ,UAAU,IAAI,qBAAqB,EAC3C,KAChB,CACK,EAMKS,EAAQT,GAAY,CACtBA,EAAQ,UAAU,OAAO,2BAA4B,sBAAuB,qBAAqB,CACpG,EAED,OAAQK,EAAG,CACP,IAAK,QACD,GAAI,CAACH,EAAU,MACf,GAAII,IAAU,QAAUJ,EAAO,SAAS,OAAO,EAAG,CAC9CM,EAAKR,CAAO,EACZ,KAChB,CACY,GAAIM,IAAU,cAAgBJ,EAAO,mBAAmB,OAAO,EAAG,CAC9DM,EAAKR,CAAO,EACZ,KAChB,CACY,GAAIM,IAAU,QAAaJ,EAAO,mBAAmB,OAAO,GAAKA,EAAO,SAAS,OAAO,EAAG,CACvFM,EAAKR,CAAO,EACZ,KAChB,CAEYS,EAAKT,CAAO,EACZ,MACJ,IAAK,WACD,GAAI,CAACE,EAAU,MACf,GAAII,IAAU,QAAU,CAACJ,EAAO,SAAS,OAAO,EAAG,CAC/CM,EAAKR,CAAO,EACZ,KAChB,CACY,GAAIM,IAAU,cAAgB,CAACJ,EAAO,mBAAmB,OAAO,EAAG,CAC/DM,EAAKR,CAAO,EACZ,KAChB,CACY,GAAIM,IAAU,QAAa,CAACJ,EAAO,mBAAmB,OAAO,GAAK,CAACA,EAAO,SAAS,OAAO,EAAG,CACzFM,EAAKR,CAAO,EACZ,KAChB,CAEYS,EAAKT,CAAO,EACZ,MACJ,IAAK,YACD,GAAIM,IAAU,QAAa,CAACJ,EAAQ,CAChCM,EAAKR,CAAO,EACZ,KAChB,CACY,GAAI,CAACC,EAAQ,UAAU,GAAGS,EAASJ,CAAK,CAAC,EAAG,CACxCE,EAAKR,CAAO,EACZ,KAChB,CAEYS,EAAKT,CAAO,EACZ,MACJ,IAAK,UACGM,IAAU,QACVE,EAAKR,CAAO,EAEhB,MACJ,IAAK,WACGM,IAAU,SACVE,EAAKR,CAAO,EAEhB,MACJ,IAAK,aACGM,IAAUL,EAAQ,QAClBO,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,MACJ,IAAK,iBACGM,IAAUL,EAAQ,QAClBO,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,MACJ,IAAK,aACG,OAAOM,CAAK,IAAMJ,EAAO,WAAU,EACnCM,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,MACJ,IAAK,iBACG,OAAOM,CAAK,IAAMJ,EAAO,WAAU,EACnCM,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,MACJ,IAAK,WACG,OAAOM,CAAK,IAAMJ,EAAO,gBAAgB,OAAO,EAChDM,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,MACJ,IAAK,eACG,OAAOM,CAAK,IAAMJ,EAAO,gBAAgB,OAAO,EAChDM,EAAKR,CAAO,EAEZS,EAAKT,CAAO,EAEhB,KACZ,CACA"}