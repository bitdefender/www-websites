{"version":3,"file":"store.js","sources":["../../../../src/scripts/libs/store/store.js"],"sourcesContent":["import { target } from \"../../target.js\";\nimport { User } from \"@repobit/dex-utils\";\nimport { Constants } from \"../constants.js\";\nimport { getCampaignBasedOnLocale, GLOBAL_V2_LOCALES, setUrlParams, getMetadata, getUrlPromotion } from \"../../utils/utils.js\";\nimport page from \"../../page.js\";\n\nexport class ProductInfo {\n\t/**\n\t *\n\t * @param {string} id\n\t * @param {string} department\n\t * @param {string} promotion\n\t * @param {boolean} forcePromotion\n\t */\n\tconstructor(id, department, promotion = null, forcePromotion = false) {\n\t\tthis.id = id;\n\t\tthis.department = department;\n\t\tthis.promotion = promotion;\n\t\tthis.forcePromotion = forcePromotion;\n\t}\n}\n\nexport class ProductOption {\n\t/**\n\t *\n\t * @param {{\n\t * \tprice: number,\n\t *\tpriceDiscounted: number,\n\t *\tbuyLink: string | Function,\n\t *\tisDiscounted: boolean,\n\t *\tcurrency: string,\n\t *\tsymbol: string,\n\t *\tname: string,\n\t *\tid: string,\n\t *\tproduct_id: string,\n\t *\tproduct_alias: string,\n\t *\tdepartment: string,\n\t *\tdevices: number,\n\t *\tsubscription: number,\n\t *\tavangateId: string,\n\t * }} option\n\t */\n\tconstructor(option) {\n\t\tthis.price = option.price;\n\t\tthis.priceDiscounted = option.priceDiscounted;\n\t\tthis.buyLink = option.buyLink;\n\t\tthis.isDiscounted = option.isDiscounted;\n\t\tthis.currency = option.currency;\n\t\tthis.symbol = option.symbol;\n\t\tthis.devices = option.devices;\n\t\tthis.subscription = option.subscription;\n\t\tthis.id = option.id;\n\t\tthis.productId = option.productId;\n\t\tthis.productAlias = option.productAlias;\n\t\tthis.department = option.department;\n\t\tthis.name = option.name;\n\t\tthis.avangateId = option.avangateId;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - Product Id : VPN-Y, TSMD2021\n\t */\n\tgetId() {\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * Returns product API ID\n\t * @returns {string} - Product Id : 8003\n\t */\n\tgetProductId() {\n\t\treturn this.productId;\n\t}\n\n\t/**\n\t * Returns product API ALIAS\n\t * @returns {string} - Product Id : tsmd/com.bitdefender.cl.tsmd\n\t */\n\tgetProductAlias() {\n\t\treturn this.productAlias;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - Product Avangate Id\n\t */\n\tgetAvangateId() {\n\t\treturn this.avangateId;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - Product Name\n\t */\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - USD | EUR ...\n\t */\n\tgetCurrency() {\n\t\treturn this.currency;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - $ | â‚¬ ...\n\t */\n\tgetSymbol() {\n\t\treturn this.symbol;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - consumer | business\n\t */\n\tgetDepartment() {\n\t\treturn this.department;\n\t}\n\n\t/**\n\t * @return {string} - product variation (ex. 10u-1y)\n\t */\n\tgetVariation() {\n\t\treturn `${this.devices}u-${this.getSubscription()}y`;\n\t}\n\n\t/**\n\t *\n\t * @param {\"value\"|\"valueWithCurrency\"|\"monthly\"|\"monthlyWithCurrency\"} [modifier=valueWithCurrency]\n\t * @return {number|string}\n\t */\n\tgetPrice(modifier = \"valueWithCurrency\") {\n\t\tswitch (modifier) {\n\t\t\tcase \"value\":\n\t\t\t\treturn this.price;\n\t\t\tcase \"valueWithCurrency\":\n\t\t\t\treturn Store.placeSymbol(this.price, this.currency);\n\t\t\tcase \"monthly\":\n\t\t\t\treturn this.subscription === 1 ? this.price : Number(Number(this.price / this.subscription).toFixed(2));\n\t\t\tcase \"monthlyWithCurrency\":\n\t\t\t\treturn this.subscription === 1\n\t\t\t\t\t? Store.placeSymbol(this.price, this.currency)\n\t\t\t\t\t: Store.placeSymbol(Number(Number(this.price / this.subscription).toFixed(2)), this.currency);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {\"value\"|\"valueWithCurrency\"|\"monthly\"|\"monthlyWithCurrency\"} [modifier=valueWithCurrency]\n\t * @return {number|string}\n\t */\n\tgetDiscountedPrice(modifier = \"valueWithCurrency\") {\n\t\tswitch (modifier) {\n\t\t\tcase \"value\":\n\t\t\t\treturn this.priceDiscounted;\n\t\t\tcase \"valueWithCurrency\":\n\t\t\t\treturn Store.placeSymbol(this.priceDiscounted, this.currency);\n\t\t\tcase \"monthly\":\n\t\t\t\treturn this.subscription === 1 ? this.priceDiscounted : Number(Number(this.priceDiscounted / this.subscription).toFixed(2));\n\t\t\tcase \"monthlyWithCurrency\":\n\t\t\t\treturn this.subscription === 1\n\t\t\t\t\t? Store.placeSymbol(this.priceDiscounted, this.currency)\n\t\t\t\t\t: Store.placeSymbol(Number(Number(this.priceDiscounted / this.subscription).toFixed(2)), this.currency);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {\"value\"|\"valueWithCurrency\"|\"percentage\"|\"percentageWithProcent\"} [modifier=value] - Modifier string for value\n\t * @return {number|string}\n\t */\n\tgetDiscount(modifier = 'value') {\n\t\tconst value = Math.round((this.price - this.priceDiscounted + Number.EPSILON) * 100) / 100 || 0;\n\t\tconst percentage = Math.round(((this.price - this.priceDiscounted) / this.price * 100)) || 0;\n\t\tswitch (modifier) {\n\t\t\tcase 'value':\n\t\t\t\treturn value;\n\t\t\tcase 'valueWithCurrency':\n\t\t\t\treturn Store.placeSymbol(value, this.currency);\n\t\t\tcase \"percentage\":\n\t\t\t\treturn percentage;\n\t\t\tcase \"percentageWithProcent\":\n\t\t\t\treturn `${percentage}%`\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {string[]} params\n\t * @return {Promise<string>}\n\t */\n\tasync getStoreUrl(params) {\n\t\tif (!params) { return this.buyLink; }\n\n\t\tif (!Array.isArray(params)) {\n\t\t\tconsole.error(`params must be an Array but you provided an ${typeof params}`);\n\t\t\treturn this.buyLink;\n\t\t}\n\n\t\treturn await target.appendVisitorIDsTo(\n\t\t\tsetUrlParams(this.buyLink, params)\n\t\t);\n\t}\n\n\tgetDevices() {\n\t\treturn this.devices;\n\t}\n\n\t/**\n\t *\n\t * @param {\"years\"|\"months\"} [modifier=years]\n\t * @return {number}\n\t */\n\tgetSubscription(modifier = \"years\") {\n\t\tswitch (modifier) {\n\t\t\tcase \"years\":\n\t\t\t\treturn Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct ? this.subscription : this.subscription / 12;\n\t\t\tcase \"months\":\n\t\t\t\treturn this.subscription;\n\t\t}\n\t}\n}\n\nexport class Product {\n\tconstructor(product) {\n\t\tthis.id = product.id;\n\t\tthis.productId = product.product_id;\n\t\tthis.productAlias = product.product_alias;\n\t\tthis.name = product.product_name;\n\t\tthis.options = product.variations;\n\t\tthis.department = product.department;\n\t\tthis.promotion = product.promotion || (GLOBAL_V2_LOCALES.find(domain => page.locale === domain) ? 'global_v2' : '');\n\t\tconst option = Object.values(Object.values(product.variations)[0])[0];\n\t\tthis.currency = option.currency_iso;\n\t\tthis.avangateId = Object.values(Object.values(product.variations)[0])[0]?.platform_product_id;\n\t\tthis.yearDevicesMapping = Object.entries(this.options).reduce((acc, [deviceKey, values]) => {\n\t\t\tObject.keys(values).forEach(yearKey => {\n\t\t\t\tif (!acc[yearKey]) {\n\t\t\t\t\tacc[yearKey] = [Number(deviceKey)];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tacc[yearKey].push(Number(deviceKey));\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t}, {});\n\n\t\t// TODO: remove this if after finishing Vlaicu migration. It is used because in init selector the variation\n\t\t// is wrongly placed as 1-1 instead of 4-1 as it should be for 'pass_sp' and 'pass_spm'\n\t\t// for 'vpn' in init selector it was 10-1 which also needs to be changed\n\t\tif (Store.config.provider === 'vlaicu'\n\t\t\t&& Object.keys(Constants.WRONG_DEVICES_PRODUCT_IDS).includes(product.product_alias)) {\n\t\t\tconst contentDevices = Constants.WRONG_DEVICES_PRODUCT_IDS[product.product_alias].contentDevices;\n\t\t\tconst providerDevices = Constants.WRONG_DEVICES_PRODUCT_IDS[product.product_alias].providerDevices\n\n\t\t\tthis.options[contentDevices] = this.options[providerDevices];\n\t\t\tif (!this.yearDevicesMapping[contentDevices]) {\n\t\t\t\tthis.yearDevicesMapping[contentDevices] = [providerDevices]\n\t\t\t} else {\n\t\t\t\tthis.yearDevicesMapping[contentDevices].push(providerDevices);\n\t\t\t}\t\n\t\t}\n\t}\n\n\t/**\n\t * Returns the id as provided Store.getProducts\n\t * @returns {string} - Product Id : tsmd\n\t */\n\tgetId() {\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * Returns product API ID\n\t * @returns {string} - Product Id : 8003\n\t */\n\tgetProductId() {\n\t\treturn this.productId;\n\t}\n\n\t/**\n\t * Returns product API ALIAS\n\t * @returns {string} - Product Id : tsmd/com.bitdefender.cl.tsmd\n\t */\n\tgetProductAlias() {\n\t\treturn this.productAlias;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - Product Avangate Id\n\t */\n\tgetAvangateId() {\n\t\treturn this.avangateId;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - Product Name\n\t */\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - USD | EUR ...\n\t */\n\tgetCurrency() {\n\t\treturn this.currency;\n\t}\n\n\t/**\n\t *\n\t * @returns {string} - consumer | business\n\t */\n\tgetDepartment() {\n\t\treturn this.department;\n\t}\n\n\t/**\n\t * @return {Boolean} - return true if there is at least one price set\n\t */\n\thasSomePrice() {\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const years of Object.values(devices)) {\n\t\t\t\tif (Number(years.price)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @return {Boolean} - return true if there is at least on discounted price set\n\t */\n\thasSomeDiscountedPrice() {\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const years of Object.values(devices)) {\n\t\t\t\tif (Number(years.discount?.discounted_price)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t *\n\t * @param {number} devices - Number of devices\n\t * @param {number} years - Subscription period in years\n\t * @param {ProductOption} bundle - Product to be bundled with the current option\n\t * @returns {ProductOption} - option containing price, discounted price and store url\n\t */\n\tgetOption(devices, years, bundle) {\n\t\tconst productVariation = `${devices}-${years}`;\n\t\tconst devicesOption = this.options[devices];\n\t\tconst yearsOption = devicesOption && devicesOption[years];\n\n\t\tif (!yearsOption) { return null; }\n\n\t\tconst option = new ProductOption({\n\t\t\tprice: Number(Number(yearsOption.price).toFixed(2)),\n\t\t\tpriceDiscounted: Number(Number(yearsOption.discount?.discounted_price).toFixed(2)),\n\t\t\tisDiscounted: yearsOption.discount?.discounted_price ? true : false,\n\t\t\tcurrency: this.currency,\n\t\t\tsymbol: this.symbol,\n\t\t\tname: this.name,\n\t\t\tid: this.id,\n\t\t\tproductId: this.productId,\n\t\t\tproductAlias: this.productAlias,\n\t\t\tdepartment: this.department,\n\t\t\tdevices,\n\t\t\tsubscription: Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct ? 1 : years * 12,\n\t\t\tavangateId: this.avangateId\n\t\t});\n\n\t\tif (bundle) {\n\t\t\tif (option.priceDiscounted && bundle.priceDiscounted) {\n\t\t\t\toption.price = Number(Number(option.price + bundle.price).toFixed(2));\n\t\t\t\toption.priceDiscounted = Number(Number(option.priceDiscounted + bundle.priceDiscounted).toFixed(2));\n\t\t\t}\n\n\t\t\tif (option.priceDiscounted && !bundle.priceDiscounted) {\n\t\t\t\toption.price = Number(Number(option.price + bundle.price).toFixed(2));\n\t\t\t\toption.priceDiscounted = Number(Number(option.priceDiscounted + bundle.price).toFixed(2));\n\t\t\t}\n\n\t\t\tif (!option.priceDiscounted && bundle.priceDiscounted) {\n\t\t\t\toption.price = Number(Number(option.price + bundle.priceDiscounted).toFixed(2));\n\t\t\t}\n\n\t\t\tif (!option.priceDiscounted && !bundle.priceDiscounted) {\n\t\t\t\toption.price = Number(Number(option.price + bundle.price).toFixed(2));\n\t\t\t}\n\t\t}\n\n\t\tlet buyLink = new URL(yearsOption.buyLink);\n\t\tbuyLink.searchParams.set(\"SHOPURL\", `${window.location.origin}/${window.location.pathname.split('/')[1]}/`);\n\t\tbuyLink.searchParams.set(\"REF\", this.promotion && this.promotion !== Store.NO_PROMOTION ? `WEBSITES_${this.promotion}` : \"N/A\");\n\t\tbuyLink.searchParams.set(\"SRC\", `${window.location.origin}${window.location.pathname}`);\n\n\t\tconst targetBuyLinkMapping = Store.targetBuyLinkMappings?.[this.productAlias]?.[productVariation];\n\t\t// replace the buy links with target links if they exist and return the option\n\t\tif (targetBuyLinkMapping) {\n\t\t\tbuyLink = new URL(targetBuyLinkMapping.buyLink);\n\n\t\t\t// if there are extra parameters which need to be added to the links, add them\n\t\t\ttargetBuyLinkMapping?.extraParameters?.forEach(extraParameter => {\n\t\t\t\tbuyLink.searchParams.set(extraParameter.key, extraParameter.value);\n\t\t\t});\n\t\t}\n\n\t\tif (window.UC_UI) {\n\t\t\tbuyLink.searchParams.set(\"ucControllerId\", window.UC_UI.getControllerId());\n\t\t}\n\t\toption.buyLink = buyLink.href;\n\n\t\treturn option;\n\t}\n\n\t/**\n\t * @returns {ProductOption[]} - option containing price, discounted price and store url\n\t * this is used primarily for renewal (when there are many combinations of devices / years)\n\t */\n\tgetAllOptions() {\n\t\tconst allOptions = [];\n\t\tObject.entries(this.options).forEach(([deviceNumber, yearsMapping]) => {\n\t\t\tObject.keys(yearsMapping).forEach(yearNumber => {\n\t\t\t\tallOptions.push(this.getOption(deviceNumber, yearNumber));\n\t\t\t});\n\t\t});\n\n\t\treturn allOptions;\n\t}\n\n\t/**\n\t * @param {\"min\"|\"max\"} value\n\t * @param {\"value\"|\"valueWithCurrency\"|\"monthly\"|\"monthlyWithCurrency\"} [modifier=valueWithCurrency]\n\t * @return {number|string}\n\t */\n\tgetPrice(value, modifier = \"valueWithCurrency\") {\n\t\tlet price = value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER;\n\t\tlet subscription = 1;\n\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const [years, entries] of Object.entries(devices)) {\n\t\t\t\tconst priceFull = Number(Number(entries.price).toFixed(2));\n\t\t\t\tif ((value === \"min\" && priceFull < price) || (value === \"max\" && priceFull > price)) {\n\t\t\t\t\tprice = priceFull;\n\t\t\t\t\tsubscription = Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct ? 1 : Number(years) * 12;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (price === (value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER)) {\n\t\t\treturn NaN;\n\t\t}\n\n\t\tswitch (modifier) {\n\t\t\tcase \"value\":\n\t\t\t\treturn price;\n\t\t\tcase \"valueWithCurrency\":\n\t\t\t\treturn Store.placeSymbol(price, this.currency);\n\t\t\tcase \"monthly\":\n\t\t\t\treturn subscription === 1 ? price : Number(Number(price / subscription).toFixed(2));\n\t\t\tcase \"monthlyWithCurrency\":\n\t\t\t\treturn subscription === 1\n\t\t\t\t\t? Store.placeSymbol(price, this.currency)\n\t\t\t\t\t: Store.placeSymbol(Number(Number(price / subscription).toFixed(2)), this.currency);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * @param {\"min\"|\"max\"} value\n\t * @param {\"value\"|\"valueWithCurrency\"|\"monthly\"|\"monthlyWithCurrency\"} [modifier=valueWithCurrency]\n\t * @return {number|string}\n\t */\n\tgetDiscountedPrice(value, modifier = \"valueWithCurrency\") {\n\t\tlet price = value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER;\n\t\tlet subscription = 1;\n\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const [years, entry] of Object.entries(devices)) {\n\t\t\t\tconst priceDiscounted = Number(Number(entry.discount?.discounted_price).toFixed(2));\n\t\t\t\tif ((value === \"min\" && priceDiscounted < price) || (value === \"max\" && priceDiscounted > price)) {\n\t\t\t\t\tprice = priceDiscounted;\n\t\t\t\t\tsubscription = Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct ? 1 : Number(years) * 12;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (price === (value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER)) {\n\t\t\treturn NaN;\n\t\t}\n\n\t\tswitch (modifier) {\n\t\t\tcase \"value\":\n\t\t\t\treturn price;\n\t\t\tcase \"valueWithCurrency\":\n\t\t\t\treturn Store.placeSymbol(price, this.currency);\n\t\t\tcase \"monthly\":\n\t\t\t\treturn subscription === 1 ? price : Number(Number(price / subscription).toFixed(2));\n\t\t\tcase \"monthlyWithCurrency\":\n\t\t\t\treturn subscription === 1\n\t\t\t\t\t? Store.placeSymbol(price, this.currency)\n\t\t\t\t\t: Store.placeSymbol(Number(Number(price / subscription).toFixed(2)), this.currency);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * @param {\"min\"|\"max\"} value\n\t * @param {\"value\"|\"valueWithCurrency\"|\"percentage\"|\"percentageWithProcent\"} [modifier=value] - Modifier string for value\n\t * @return {number|string}\n\t */\n\tgetDiscount(value, modifier = 'value') {\n\t\tlet discountValue = value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER;\n\t\tlet discountPercentage = NaN;\n\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const entry of Object.values(devices)) {\n\t\t\t\tconst priceDiscounted = Number(Number(entry.discount?.discounted_price).toFixed(2));\n\t\t\t\tconst priceFull = Number(Number(entry.price).toFixed(2));\n\t\t\t\tconst valueDiscount = Math.round((priceFull - priceDiscounted + Number.EPSILON) * 100) / 100 || 0;\n\t\t\t\tconst percentageDiscount = Math.round(((priceFull - priceDiscounted) / priceFull * 100)) || 0;\n\n\t\t\t\tif ((value === \"min\" && valueDiscount < discountValue) || (value === \"max\" && valueDiscount > discountValue)) {\n\t\t\t\t\tdiscountValue = valueDiscount;\n\t\t\t\t\tdiscountPercentage = percentageDiscount;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (discountValue === (value === \"max\" ? Number.MIN_SAFE_INTEGER : Number.MAX_SAFE_INTEGER)) {\n\t\t\treturn NaN;\n\t\t}\n\n\t\tswitch (modifier) {\n\t\t\tcase 'value':\n\t\t\t\treturn discountValue;\n\t\t\tcase 'valueWithCurrency':\n\t\t\t\treturn Store.placeSymbol(discountValue, this.currency);\n\t\t\tcase \"percentage\":\n\t\t\t\treturn discountPercentage;\n\t\t\tcase \"percentageWithProcent\":\n\t\t\t\treturn `${discountPercentage}%`\n\t\t\tdefault:\n\t\t\t\treturn \"\";\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {\"value\"|\"valueWithCurrency\"|\"monthly\"|\"monthlyWithCurrency\"} [modifier=valueWithCurrency]\n\t * @return {number|string}\n\t */\n\tgetSmallestPrice(modifier = \"valueWithCurrency\") {\n\t\tlet price = Number.MAX_SAFE_INTEGER;\n\t\tlet subscription = 1;\n\n\t\tfor (const devices of Object.values(this.options)) {\n\t\t\tfor (const [years, value] of Object.entries(devices)) {\n\t\t\t\tconst priceDiscounted = Number(Number(value.discount?.discounted_price || value.price).toFixed(2));\n\t\t\t\tif (priceDiscounted < price) {\n\t\t\t\t\tprice = priceDiscounted;\n\t\t\t\t\tsubscription = Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct ? 1 : Number(years) * 12;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (price === Number.MAX_SAFE_INTEGER) {\n\t\t\treturn NaN;\n\t\t}\n\n\t\tswitch (modifier) {\n\t\t\tcase \"value\":\n\t\t\t\treturn price;\n\t\t\tcase \"valueWithCurrency\":\n\t\t\t\treturn Store.placeSymbol(price, this.currency);\n\t\t\tcase \"monthly\":\n\t\t\t\treturn subscription === 1 ? price : Number(Number(price / subscription).toFixed(2));\n\t\t\tcase \"monthlyWithCurrency\":\n\t\t\t\treturn subscription === 1\n\t\t\t\t\t? Store.placeSymbol(price, this.currency)\n\t\t\t\t\t: Store.placeSymbol(Number(Number(price / subscription).toFixed(2)), this.currency);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * @return {[number, number]}\n\t */\n\tgetMinMaxDeviceNumbers() {\n\t\tlet minDeviceNumber = Number.MAX_SAFE_INTEGER;\n\t\tlet maxDeviceNumber = 0;\n\n\t\tfor (const devices of Object.keys(this.options)) {\n\t\t\tconst noDevices = Number(devices);\n\t\t\tif (noDevices < minDeviceNumber) {\n\t\t\t\tminDeviceNumber = noDevices;\n\t\t\t}\n\n\t\t\tif (noDevices > maxDeviceNumber) {\n\t\t\t\tmaxDeviceNumber = noDevices;\n\t\t\t}\n\t\t}\n\n\t\treturn [minDeviceNumber, maxDeviceNumber];\n\t};\n\n\t/**\n\t* @return {[number, number]}\n\t*/\n\tgetMinMaxYearNumbers() {\n\t\tlet minYearNumber = Number.MAX_SAFE_INTEGER;\n\t\tlet maxYearNumber = 0;\n\n\t\tconst firstDeviceVariation = Object.values(this.options)[0];\n\n\t\tfor (const year of Object.keys(firstDeviceVariation)) {\n\t\t\tconst noYears = Number(year);\n\t\t\tif (noYears < minYearNumber) {\n\t\t\t\tminYearNumber = noYears;\n\t\t\t}\n\n\t\t\tif (noYears > maxYearNumber) {\n\t\t\t\tmaxYearNumber = noYears;\n\t\t\t}\n\t\t}\n\n\t\treturn [minYearNumber, maxYearNumber];\n\t};\n\n\t/**\n\t * @return {[number]}\n\t */\n\tgetDevices(noYears) {\n\t\treturn this.yearDevicesMapping[noYears];\n\t}\n\n\t/**\n\t * @param {\"years\"|\"months\"} [modifier=years]\n\t * @return {[number]}\n\t */\n\tgetSubscriptions(modifier = \"years\", noDevices) {\n\t\tconst subscriptions = Object.keys(this.options[noDevices]);\n\t\tswitch (modifier) {\n\t\t\tcase \"years\":\n\t\t\t\treturn subscriptions.map(subscription => Number(subscription));\n\t\t\tcase \"months\":\n\t\t\t\treturn Constants.PRODUCT_ID_MAPPINGS[this.id].isMonthlyProduct\n\t\t\t\t\t? subscriptions.map(subscription => Number(subscription))\n\t\t\t\t\t: subscriptions.map(subscription => Number(subscription) * 12);\n\t\t}\n\t}\n}\n\nclass Vlaicu {\n\n\tstatic defaultPromotionPath = \"/p-api/v1/products/{bundleId}/locale/{locale}\";\n\tstatic promotionPath = \"/p-api/v1/products/{bundleId}/locale/{locale}/campaign/{campaignId}\";\n\n\t/**\n\t * TODO: please remove this after creating a way to define pids from inside the page documents for each card\n\t * @param {string} productId\n\t * @param {string} campaign\n\t * @returns {string} the DIP promotion\n\t */\n\tstatic #isDIPCornerCase(productId) {\n\t\tif (productId === 'com.bitdefender.dataprivacy' && page.locale === 'ro-ro') {\n\t\t\treturn 'DIP-RO';\n\t\t}\n\n\t\tif (productId === 'com.bitdefender.dataprivacy' && page.locale !== 'ro-ro') {\n\t\t\treturn 'DIP-promo';\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t/**\n     * TODO: please remove this function and all its calls once SOHO works correctly on de-de with zuora\n     * @param {string} productId \n     * @returns {string} the SOHO promotion\n     */\n    static #isSohoCornerCase(productId) {\n        if (Constants.SOHO_CORNER_CASES_LOCALSE.includes(page.locale) && productId === \"com.bitdefender.soho\") {\n\t\t\treturn 'SOHO_DE';\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t/**\n\t * TODO: please remove this function and all its calls once SOHO works correctly on de-de with zuora\n\t * @param {string} receivedBuyLink \n\t * @return {string} -> buyLink with lang parameter\n\t */\n\tstatic #addLangParameter(receivedBuyLink){\n\t\tconst buyLinkUrl = new URL(receivedBuyLink);\n\t\tbuyLinkUrl.searchParams.set('LANG', page.language);\n\n\t\treturn buyLinkUrl.href;\n\t}\n\n\tstatic async getProductVariations(productId, campaign) {\n\t\tlet locale = this.#isSohoCornerCase(productId) ? \"en-mt\" : page.locale;\n\t\tlet geoIpFlag = (await target.configMbox)?.useGeoIpPricing;\n\t\tif (geoIpFlag) {\n\t\t\tlocale = await User.locale;\n\t\t}\n\t\tconst pathVariablesResolverObject = {\n\t\t\t// TODO: please remove the ternary operators below and only use page.locale\n\t\t\t// and campaign once digital river works correctly\n\t\t\t\"{locale}\": locale,\n\t\t\t\"{bundleId}\": productId,\n\t\t\t\"{campaignId}\": this.#isDIPCornerCase(productId)\n\t\t\t\t|| this.#isSohoCornerCase(productId)\n\t\t\t\t|| campaign\n\t\t};\n\n\t\t// get the correct path to get the prices\n\t\tlet productPath = campaign !== Constants.NO_PROMOTION || this.#isDIPCornerCase(productId) || this.#isSohoCornerCase(productId) ?\n\t\t\tthis.promotionPath :\n\t\t\tthis.defaultPromotionPath;\n\n\t\t// replace all variables from the path\n\t\tconst pathVariablesRegex = new RegExp(Object.keys(pathVariablesResolverObject).join(\"|\"),\"gi\");\n\t\tproductPath = productPath.replace(pathVariablesRegex, (matched) => {\n\t\t\treturn pathVariablesResolverObject[matched]\n\t\t});\n\n\t\tconst endpoint = new URL(productPath, Store.config.vlaicuEndpoint);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\tendpoint.href,\n\t\t\t\t{\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (!response.ok) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn await response.json();\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tstatic async getProductVariationsPrice(id, campaignId) {\n\t\tconst productInfoResponse = await this.getProductVariations(Constants.PRODUCT_ID_MAPPINGS[id.trim()].bundleId, campaignId);\n\t\tconst productInfo = productInfoResponse?.product;\n\t\tif (!productInfo) {\n\t\t\treturn null;\n\t\t}\n\t\tconst isReceivedPromotionValid = productInfoResponse.campaign &&\n\t\t\tproductInfoResponse.campaignType &&\n\t\t\tproductInfoResponse.campaignType === \"def\";\n\n\t\tlet payload = productInfo?.options;\n\t\tif (!payload || !payload.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\twindow.StoreProducts.product[id] = {\n\t\t\tproduct_alias: id,\n\t\t\tproduct_id: Constants.PRODUCT_ID_MAPPINGS[id].bundleId,\n\t\t\tproduct_name: productInfo.productName,\n\t\t\tpromotion: isReceivedPromotionValid ? productInfoResponse.campaign : campaignId, \n\t\t\tvariations: {}\n\t\t}\n\n\t\tpayload.forEach(productVariation => {\n\n\t\t\t/**\n\t\t\t * for monthly products only add the monthly variations\n\t\t\t * e.g for vpn-monthly we do not care about the product variation if it passes 12 months (more than a year)\n\t\t\t */ \n\t\t\tif (Constants.PRODUCT_ID_MAPPINGS[id].isMonthlyProduct && productVariation.months >= 12) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * for yearly products only add the yearly variations\n\t\t\t * e.g for tsmd we do not care about the product variation if it is below 12 months (less than a year)\n\t\t\t */\n\n\t\t\tif (!Constants.PRODUCT_ID_MAPPINGS[id].isMonthlyProduct && productVariation.months < 12) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst yearsSubscription = Math.ceil(productVariation.months / 12);\n\t\t\tconst devices_no = productVariation.slots;\n\n\t\t\tconst devicesObj = {\n\t\t\t\tcurrency_iso: productVariation.currency,\n\t\t\t\tproduct_id: Constants.PRODUCT_ID_MAPPINGS[id].bundleId,\n\t\t\t\tplatform_product_id: productInfoResponse.platformProductId || Constants.PRODUCT_ID_MAPPINGS[id].bundleId,\n\t\t\t\tpromotion: isReceivedPromotionValid ?\n\t\t\t\t\tproductInfoResponse.campaign :\n\t\t\t\t\tcampaignId,\n\t\t\t\tprice: productVariation.price,\n\t\t\t\t// TODO: please remove this once SOHO works correctly on de-de with zuora\n\t\t\t\tbuyLink: this.#isSohoCornerCase(Constants.PRODUCT_ID_MAPPINGS[id].bundleId)\n\t\t\t\t\t? this.#addLangParameter(productVariation.buyLink)\n\t\t\t\t\t: productVariation.buyLink,\n\t\t\t\tvariation: {\n\t\t\t\t\tvariation_name: `${devices_no}u-${yearsSubscription}y`,\n\t\t\t\t\tyears: yearsSubscription,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (productVariation.discountAmount > 0) {\n\t\t\t\tdevicesObj['discount'] = {\n\t\t\t\t\tdiscounted_price: productVariation.discountedPrice,\n\t\t\t\t\tdiscount_value: productVariation.discountAmount,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twindow.StoreProducts.product[id].variations[devices_no] = window.StoreProducts.product[id].variations[devices_no]\n\t\t\t\t? window.StoreProducts.product[id].variations[devices_no]\n\t\t\t\t: {};\n\t\t\twindow.StoreProducts.product[id].variations[devices_no][yearsSubscription] = devicesObj;\n\t\t});\n\n\t\t// for the cases where there is no variation available in the price call\n\t\tif (!Object.keys(window.StoreProducts.product[id].variations).length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn window.StoreProducts.product[id];\n\t}\n\n\tstatic async loadProduct(id, campaign) {\n\t\twindow.StoreProducts = window.StoreProducts || [];\n\t\twindow.StoreProducts.product = window.StoreProducts.product || {};\n\t\treturn await this.getProductVariationsPrice(id, campaign);\n\t}\n}\n\nclass StoreConfig {\n\n\tconstructor() {\n\t\t/**\n\t\t * Api used to fetch the prices\n\t\t * @type {\"vlaicu\"}\n\t\t */\n\t\tthis.provider = \"vlaicu\";\n\n\t\t/**\n\t\t * @type {string}\n\t\t */\n\t\tthis.vlaicuEndpoint = Constants.DEV_DOMAINS.some(domain => window.location.hostname.includes(domain))\n\t\t\t? \"https://www.bitdefender.com\"\n\t\t\t: window.location.origin;\n\n\t\t/**\n\t\t * @type {\"GET\"}\n\t\t */\n\t\tthis.httpMethod = \"GET\";\n\t}\n}\n\nexport class Store {\n\tstatic countriesMapping = {\n\t\tgb: \"uk\",\n\t\tch: \"de\",\n\t\tat: \"de\",\n\t\tus: \"us\",\n\t\tmx: \"en\",\n\t\tnz: \"au\",\n\t}\n\n\tstatic consumer = \"consumer\";\n\tstatic business = \"business\";\n\tstatic products = {};\n\t/** country equals the geographic location given by IP */\n\tstatic country = page.country;\n\tstatic mappedCountry = this.getCountry();\n\t/** Private variables */\n\tstatic baseUrl = Constants.DEV_BASE_URL;\n\n\t/**\n\t * @type {StoreConfig}\n\t */\n\tstatic config = new StoreConfig();\n\tstatic targetBuyLinkMappings = null;\n\n\t/**\n\t * Get a product from the api.2checkout.com\n\t * @async\n\t * @param {ProductInfo[]} productsInfo - objects describing the product to be fetched\n\t * @returns {Promise<Product>}\n\t */\n\tstatic async getProducts(productsInfo) {\n\t\tif (!Array.isArray(productsInfo)) { return null; }\n\n\t\tif (!Constants.PRODUCT_ID_MAPPINGS) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// get the target buyLink mappings\n\t\tif (!this.targetBuyLinkMappings) {\n\t\t\tthis.targetBuyLinkMappings = (await target.configMbox)?.products;\n\t\t}\n\n\t\t// remove duplicates by id\n\t\tproductsInfo = [...new Map(productsInfo.map((product) => [`${product.id}`, product])).values()];\n\n\t\tthis.products = (await Promise\n\t\t\t.allSettled(\n\t\t\t\tproductsInfo.map(async product => {\n\t\t\t\t\t// target > url > produs > global_campaign > default campaign\n\t\t\t\t\tif (!product.forcePromotion) {\n\t\t\t\t\t\tproduct.promotion = (await target.configMbox)?.promotion\n\t\t\t\t\t\t\t|| getUrlPromotion()\n\t\t\t\t\t\t\t|| product.promotion\n\t\t\t\t\t\t\t|| getMetadata(\"pid\")\n\t\t\t\t\t\t\t|| getCampaignBasedOnLocale();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn await this.#apiCall(\n\t\t\t\t\t\tproduct\n\t\t\t\t\t);\n\t\t\t\t})))\n\t\t\t.filter(product => product.status === \"fulfilled\" && !!product.value)\n\t\t\t.map(product => new Product(product.value))\n\t\t\t.reduce((acc, product) => { acc[product.getId()] = product; return acc; }, {});\n\t\t\n\t\treturn this.products;\n\t}\n\n\t/**\n\t * @async\n\t * @param {ProductInfo} productInfo\n\t * @returns {Promise<Product>}\n\t */\n\tstatic async #apiCall(productInfo) {\n\t\ttry {\n\t\t\tconst product = await Vlaicu.loadProduct(productInfo.id, productInfo.promotion);\n\n\t\t\tif (!product) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...productInfo,\n\t\t\t\t...product\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the geografic country of the client\n\t * @returns {Promise<string>} - country as 2 letter ISO code\n\t */\n\tstatic getCountry() {\n\t\treturn this.countriesMapping[page.country] || page.country\n\t}\n\n\tstatic placeSymbol(price, currency) {\n\t\tif (!price) { return \"\"; }\n\n\t\treturn new Intl.NumberFormat('en-US', { style: 'currency', currency }).format(\n\t\t\tprice,\n\t\t);\n\t}\n}\n\nwindow.Store = Store;\nwindow.Product = Product;\nwindow.ProductOption = ProductOption;\nwindow.ProductInfo = ProductInfo;"],"names":["ProductInfo","id","department","promotion","forcePromotion","ProductOption","option","modifier","Store","value","percentage","params","target","setUrlParams","Constants","Product","product","GLOBAL_V2_LOCALES","domain","page","acc","deviceKey","values","yearKey","contentDevices","providerDevices","devices","years","bundle","productVariation","devicesOption","yearsOption","buyLink","targetBuyLinkMapping","extraParameter","allOptions","deviceNumber","yearsMapping","yearNumber","price","subscription","entries","priceFull","entry","priceDiscounted","discountValue","discountPercentage","valueDiscount","percentageDiscount","minDeviceNumber","maxDeviceNumber","noDevices","minYearNumber","maxYearNumber","firstDeviceVariation","year","noYears","subscriptions","Vlaicu","#isDIPCornerCase","productId","#isSohoCornerCase","#addLangParameter","receivedBuyLink","buyLinkUrl","campaign","locale","User","pathVariablesResolverObject","productPath","pathVariablesRegex","matched","endpoint","response","error","campaignId","productInfoResponse","productInfo","isReceivedPromotionValid","payload","yearsSubscription","devices_no","devicesObj","StoreConfig","productsInfo","getUrlPromotion","getMetadata","getCampaignBasedOnLocale","#apiCall","currency"],"mappings":"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"}