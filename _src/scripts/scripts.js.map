{"version":3,"mappings":"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","names":["LCP_BLOCKS","SUPPORTED_LANGUAGES","getMetadata","initMobileDetector","viewport","mobileDetectorDiv","createMetadata","name","value","meta","getLanguageCountryFromPath","currentPathUrl","getLocalizedResourceUrl","resourceName","pathname","lpIsInFolder","pathnameAsArray","basePathIndex","decorateLinkedPictures","main","picture","next","a","link","overlayPlayButton","event","modalContainer","createModal","up","pictureParent","decorateMain","decorateButtons","decorateIcons","decorateTags","decorateSections","decorateBlocks","path","template","stopAutomaticRefresh","modalClass","modalContent","resp","html","loadBlocks","closeModal","close","detectModalButtons","e","stopAutomaticModalRefresh","existingModal","StoreResolver","element","populateColumns","section","rightColContainer","leftColContainer","el","populateHero","buildTwoColumnsSection","buildCta","fullWidthContainer","createTag","buildCtaSections","loadTrackers","isPageNotInDraftsFolder","onAdobeMcLoaded","GLOBAL_EVENTS","Launch","page","target","loadEager","doc","getPageExperimentKey","resolveNonProductsDataLayer","decorateTemplateAndTheme","templateMetadata","loadCSS","waitForLCP","loadLazy","pageIsNotInFragmentsFolder","pageIsNotInWebviewFolder","loadHeader","hash","loadFooter","generateLDJsonSchema","sampleRUM","eventOnDropdownSlider","slider","titles","loadingBars","activeIndex","interval","showLoadingBar","index","loadingBar","width","interval2","moveToNextItem","title","startAutomaticMovement","stopAutomaticMovement","loadDelayed","loadPage","Constants","elements","adobeMcAppendVisitorId","pushTrialDownloadToDataLayer","AdobeDataLayerService","PageLoadedEvent"],"ignoreList":[],"sources":["../../src/scripts/scripts.js"],"sourcesContent":["import Launch from '@repobit/dex-launch';\nimport { PageLoadedEvent, AdobeDataLayerService } from '@repobit/dex-data-layer';\nimport { target, adobeMcAppendVisitorId } from './target.js';\nimport page from './page.js';\nimport {\n  sampleRUM,\n  loadHeader,\n  loadFooter,\n  decorateButtons,\n  decorateIcons,\n  decorateTags,\n  decorateSections,\n  decorateBlocks,\n  decorateTemplateAndTheme,\n  waitForLCP,\n  loadBlocks,\n  loadCSS,\n  getMetadata,\n} from './lib-franklin.js';\nimport {\n  resolveNonProductsDataLayer,\n} from './libs/data-layer.js';\nimport { StoreResolver } from './libs/store/index.js';\n\nimport {\n  createTag,\n  getPageExperimentKey,\n  GLOBAL_EVENTS,\n  pushTrialDownloadToDataLayer,\n  generateLDJsonSchema,\n} from './utils/utils.js';\nimport { Constants } from './libs/constants.js';\n\nconst LCP_BLOCKS = ['hero', 'password-generator']; // add your LCP blocks to the list\n\nexport const SUPPORTED_LANGUAGES = ['en'];\n\nwindow.hlx.plugins.add('rum-conversion', {\n  load: 'lazy',\n  url: '../plugins/rum-conversion/src/index.js',\n});\n\nwindow.hlx.plugins.add('experimentation', {\n  condition: () => getMetadata('experiment'),\n  options: {\n    prodHost: 'www.bitdefender.com',\n  },\n  url: '../plugins/experimentation/src/index.js',\n});\n\nwindow.ADOBE_MC_EVENT_LOADED = false;\n\nfunction initMobileDetector(viewport) {\n  const mobileDetectorDiv = document.createElement('div');\n  mobileDetectorDiv.setAttribute(`data-${viewport}-detector`, '');\n  document.body.append(mobileDetectorDiv);\n}\n\n/**\n * Creates a meta tag with the given name and value and appends it to the head.\n * @param {String} name The name of the meta tag\n * @param {String} value The value of the meta tag\n */\nexport function createMetadata(name, value) {\n  const meta = document.createElement('meta');\n  meta.setAttribute('name', name);\n  meta.setAttribute('content', value);\n  document.head.append(meta);\n}\n\nexport function getLanguageCountryFromPath() {\n  const currentPathUrl = window.location.pathname;\n  return {\n    language: currentPathUrl.split('/')[1].split('-')[0],\n    country: currentPathUrl.split('/')[1].split('-')[1],\n  };\n}\n\nexport function getLocalizedResourceUrl(resourceName) {\n  const { pathname } = window.location;\n  const lastCharFromUrl = pathname.charAt(pathname.length - 1);\n  const lpIsInFolder = lastCharFromUrl === '/';\n\n  let pathnameAsArray = pathname.split('/');\n\n  if (lpIsInFolder) {\n    return `${pathnameAsArray.join('/')}${resourceName}`;\n  }\n\n  const basePathIndex = pathname.startsWith('/pages/') ? 3 : 2;\n  pathnameAsArray = pathnameAsArray.slice(0, basePathIndex + 1); // \"/consumer/en\";\n\n  return `${pathnameAsArray.join('/')}/${resourceName}`;\n}\n\n/**\n * Decorates picture elements with a link to a video.\n * @param {Element} main The main element\n */\nexport default function decorateLinkedPictures(main) {\n  main.querySelectorAll('picture').forEach((picture) => {\n    // this condition checks if the picture is part of some content block ( rte )\n    // and not a direct element in some DIV block\n    // that could have different behaviour for some blocks (ex: columns )\n    if (!picture.closest('div.block') && picture.parentElement.tagName !== 'DIV') {\n      const next = picture.parentNode.nextElementSibling;\n      if (next) {\n        const a = next.querySelector('a');\n        const link = a?.textContent;\n        /* Modal video */\n        if (a && link.startsWith('https://') && link.includes('fragments')) {\n          a.innerHTML = '';\n          a.className = 'video-placeholder';\n          a.appendChild(picture);\n          const overlayPlayButton = document.createElement('span');\n          overlayPlayButton.className = 'video-placeholder-play';\n          a.appendChild(overlayPlayButton);\n          a.addEventListener('click', async (event) => {\n            event.preventDefault();\n            // eslint-disable-next-line no-use-before-define\n            const modalContainer = await createModal(link, 'video-modal');\n            document.body.append(modalContainer);\n          });\n          const up = a.parentElement;\n          if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n            up.classList.add('modal-video-container');\n          }\n          return;\n        }\n        // Basic linked image\n        if (a && link.startsWith('https://')) {\n          a.innerHTML = '';\n          a.className = 'linked-image';\n          const pictureParent = picture.parentNode;\n          a.append(picture);\n          if (pictureParent.children.length === 0) {\n            pictureParent.parentNode.removeChild(pictureParent);\n          }\n          const up = a.parentElement;\n          if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n            up.classList.add('linked-image-container');\n          }\n        }\n      }\n    }\n  });\n}\n\n/**\n * Decorates the main element.\n * @param {Element} main The main element\n */\n// eslint-disable-next-line import/prefer-default-export\nexport function decorateMain(main) {\n  // hopefully forward compatible button decoration\n  decorateButtons(main);\n  decorateIcons(main);\n  decorateTags(main);\n  decorateLinkedPictures(main);\n  decorateSections(main);\n  decorateBlocks(main);\n}\n\n/**\n *\n * @param {String} path The path to the modal\n * @param {String} template The template to use for the modal styling\n * @param {Boolean} stopAutomaticRefresh Wether the modal refreshes after exiting or not\n * @returns {Promise<Element>}\n * @example\n */\nexport async function createModal(path, template, stopAutomaticRefresh) {\n  const modalContainer = document.createElement('div');\n  modalContainer.classList.add('modal-container');\n\n  // add the class which makes the modal identifiable in the page\n  if (stopAutomaticRefresh) {\n    const modalClass = path.split('/').pop();\n    modalContainer.classList.add(modalClass);\n  }\n\n  const modalContent = document.createElement('div');\n  modalContent.classList.add('modal-content');\n\n  // fetch modal content\n  const resp = await fetch(`${path}.plain.html`);\n\n  if (!resp.ok) {\n    // eslint-disable-next-line no-console\n    console.error(`modal url cannot be loaded: ${path}`);\n    return modalContainer;\n  }\n\n  const html = await resp.text();\n  modalContent.innerHTML = html;\n\n  decorateMain(modalContent);\n  await loadBlocks(modalContent);\n  modalContainer.append(modalContent);\n\n  // add class to modal container for opportunity to add custom modal styling\n  if (template) modalContainer.classList.add(template);\n\n  const closeModal = () => {\n    // if the modal is still supposed to exist just hide it\n    if (stopAutomaticRefresh) {\n      modalContainer.classList.add('global-display-none');\n      return;\n    }\n\n    // if it's supposed to refresh delete it so that it can be rerendered\n    modalContainer.remove();\n  };\n\n  const close = document.createElement('div');\n  close.classList.add('modal-close');\n  close.addEventListener('click', closeModal);\n  modalContent.append(close);\n  return modalContainer;\n}\n\nexport async function detectModalButtons(main) {\n  main.querySelectorAll('a.button.modal').forEach((link) => {\n    link.addEventListener('click', async (e) => {\n      e.preventDefault();\n      const stopAutomaticModalRefresh = link.dataset.stopAutomaticModalRefresh === 'true';\n\n      // if we wish for the button to not generate a new modal everytime\n      if (stopAutomaticModalRefresh) {\n        // we use the last part of the link to identify the modals\n        const modalClass = link.href.split('/').pop();\n\n        // check if the modal exists in the page\n        const existingModal = document.querySelector(`div.modal-container.${modalClass}`);\n        if (existingModal) {\n          // if it exists just display it\n          existingModal.classList.remove('global-display-none');\n          return;\n        }\n      }\n\n      // generate new modal\n      const modalContainer = await createModal(link.href, undefined, stopAutomaticModalRefresh);\n      document.body.append(modalContainer);\n      await StoreResolver.resolve(modalContainer);\n      modalContainer.querySelectorAll('.await-loader').forEach((element) => {\n        element.classList.remove('await-loader');\n      });\n    });\n  });\n}\n\nfunction populateColumns(section) {\n  if (section.querySelectorAll('.columns div div').length === 2) {\n    const rightColContainer = section.querySelector('.columns div div:last-child');\n    rightColContainer.classList.add('right-col');\n    section.querySelector('.columns div div:last-child').classList.add('right-col');\n    const leftColContainer = section.querySelector('.columns div div:first-child');\n    leftColContainer.classList.add('left-col');\n\n    section.querySelectorAll('.right-column').forEach((el) => rightColContainer.append(el));\n    section.querySelectorAll('.left-column').forEach((el) => leftColContainer.append(el));\n  }\n}\n\nfunction populateHero(section) {\n  if (section.querySelectorAll('.hero div div').length === 2) {\n    const rightColContainer = section.querySelector('.hero div div:last-child');\n    rightColContainer.classList.add('right-col');\n    section.querySelector('.hero div div:last-child').classList.add('right-col');\n    const leftColContainer = section.querySelector('.hero div div:first-child');\n    leftColContainer.classList.add('left-col');\n\n    section.querySelectorAll('.right-column').forEach((el) => rightColContainer.append(el));\n    section.querySelectorAll('.left-column').forEach((el) => leftColContainer.append(el));\n  }\n}\n\nfunction buildTwoColumnsSection(main) {\n  main.querySelectorAll('div.section.two-columns').forEach((section) => {\n    populateHero(section);\n    populateColumns(section);\n  });\n}\n\nfunction buildCta(section) {\n  populateColumns(section);\n  const fullWidthContainer = createTag(\n    'div',\n    { class: 'full-width' },\n    '',\n  );\n  [...section.children].forEach((el) => fullWidthContainer.append(el));\n  section.append(fullWidthContainer);\n}\n\nfunction buildCtaSections(main) {\n  main.querySelectorAll('div.section.cta, div.section.footer-cta')\n    .forEach(buildCta);\n}\n\nexport async function loadTrackers() {\n  const isPageNotInDraftsFolder = window.location.pathname.indexOf('/drafts/') === -1;\n\n  const onAdobeMcLoaded = () => {\n    document.dispatchEvent(new Event(GLOBAL_EVENTS.ADOBE_MC_LOADED));\n    window.ADOBE_MC_EVENT_LOADED = true;\n  };\n\n  if (isPageNotInDraftsFolder) {\n    try {\n      await Launch.load(page.environment);\n      onAdobeMcLoaded();\n    } catch {\n      target.abort();\n    }\n  } else {\n    target.abort();\n    onAdobeMcLoaded();\n  }\n}\n\n/**\n * Loads everything needed to get to LCP.\n * @param {Element} doc The container element\n */\nasync function loadEager(doc) {\n  // load trackers early if there is a target experiment on the page\n  if (getPageExperimentKey()) {\n    loadTrackers();\n    await resolveNonProductsDataLayer();\n  }\n\n  createMetadata('nav', `${getLocalizedResourceUrl('nav')}`);\n  createMetadata('footer', `${getLocalizedResourceUrl('footer')}`);\n  decorateTemplateAndTheme();\n\n  const templateMetadata = getMetadata('template');\n  const hasTemplate = getMetadata('template') !== '';\n  if (hasTemplate) {\n    loadCSS(`${window.hlx.codeBasePath}/scripts/template-factories/${templateMetadata}.css`);\n  }\n  const main = doc.querySelector('main');\n  if (main) {\n    decorateMain(main);\n    buildCtaSections(main);\n    buildTwoColumnsSection(main);\n    detectModalButtons(main);\n    document.body.classList.add('appear', 'franklin');\n    if (window.location.href.indexOf('scuderiaferrari') !== -1) {\n      document.body.classList.add('sferrari');\n    }\n    await waitForLCP(LCP_BLOCKS);\n  }\n}\n\n/**\n * Loads everything that doesn't need to be delayed.\n * @param {Element} doc The container element\n */\nasync function loadLazy(doc) {\n  const main = doc.querySelector('main');\n\n  const pageIsNotInFragmentsFolder = window.location.pathname.indexOf('/fragments/') === -1;\n  const pageIsNotInWebviewFolder = window.location.pathname.indexOf('/webview/') === -1;\n  doc.querySelector('header').style.height = '0px';\n\n  if (pageIsNotInFragmentsFolder && pageIsNotInWebviewFolder) {\n    // eslint-disable-next-line no-unused-vars\n    doc.querySelector('header').style.height = 'initial';\n    loadHeader(doc.querySelector('header'));\n  }\n\n  // only call load Trackers here if there is no experiment on the page\n  if (!getPageExperimentKey()) {\n    loadTrackers();\n    await resolveNonProductsDataLayer();\n  }\n\n  // push basic events to dataLayer\n  await loadBlocks(main);\n\n  const { hash } = window.location;\n  const element = hash ? doc.getElementById(hash.substring(1)) : false;\n  if (hash && element) element.scrollIntoView();\n\n  if (pageIsNotInFragmentsFolder && pageIsNotInWebviewFolder) {\n    loadFooter(doc.querySelector('footer'));\n  }\n\n  generateLDJsonSchema();\n\n  loadCSS(`${window.hlx.codeBasePath}/styles/lazy-styles.css`);\n\n  window.hlx.plugins.run('loadLazy');\n\n  const templateMetadata = getMetadata('template');\n  const hasTemplate = getMetadata('template') !== '';\n  if (hasTemplate) {\n    loadCSS(`${window.hlx.codeBasePath}/scripts/template-factories/${templateMetadata}-lazy.css`)\n      .catch(() => {});\n  }\n\n  sampleRUM('lazy');\n  sampleRUM.observe(main.querySelectorAll('div[data-block-name]'));\n  sampleRUM.observe(main.querySelectorAll('picture > img'));\n}\n\n/**\n * Event listener for dropdown slider dropdown-box.js component.\n * This is imported from www-landing-pages repo.\n * @returns {void}\n* */\nfunction eventOnDropdownSlider() {\n  document.querySelectorAll('.dropdown-slider').forEach((slider) => {\n    const titles = slider.querySelectorAll('.title');\n    const loadingBars = slider.querySelectorAll('.loading-bar');\n    let activeIndex = 0;\n    let interval;\n\n    function showLoadingBar(index) {\n      const loadingBar = loadingBars[index];\n      loadingBar.style.width = '0';\n      let width = 0;\n      const interval2 = setInterval(() => {\n        width += 1;\n        loadingBar.style.width = `${width}%`;\n        if (width >= 100) {\n          clearInterval(interval2);\n        }\n      }, 30); // Adjust the interval for smoother animation\n    }\n\n    function moveToNextItem() {\n      titles.forEach((title, index) => {\n        if (index === activeIndex) {\n          title.parentNode.classList.add('active');\n          title.closest('.dropdown-slider').setAttribute('style', `min-height: ${title.parentNode.querySelector('.description').offsetHeight + 50}px`);\n          if (loadingBars.length) {\n            showLoadingBar(index);\n          }\n        } else {\n          title.parentNode.classList.remove('active');\n        }\n      });\n\n      activeIndex = (activeIndex + 1) % titles.length; // Move to the next item and handle wrapping\n    }\n\n    function startAutomaticMovement() {\n      interval = setInterval(moveToNextItem, 4000); // Set the interval\n    }\n\n    function stopAutomaticMovement() {\n      clearInterval(interval); // Clear the interval\n    }\n\n    // Set the initial active item\n    moveToNextItem();\n\n    if (loadingBars.length) {\n      // Start automatic movement after the loading is complete\n      setTimeout(() => {\n        startAutomaticMovement();\n      }, 1000);\n\n      // Click event listener on titles\n      titles.forEach((title, index) => {\n        title.addEventListener('click', () => {\n          stopAutomaticMovement();\n          activeIndex = index;\n          showLoadingBar(index);\n          moveToNextItem();\n          startAutomaticMovement();\n        });\n      });\n    }\n  });\n}\n\n/**\n * Loads everything that happens a lot later,\n * without impacting the user experience.\n */\nfunction loadDelayed() {\n  window.setTimeout(() => {\n    window.hlx.plugins.load('delayed');\n    window.hlx.plugins.run('loadDelayed');\n    // load anything that can be postponed to the latest here\n    eventOnDropdownSlider();\n    // eslint-disable-next-line import/no-cycle\n    return import('./delayed.js');\n  }, 3000);\n}\n\nasync function loadPage() {\n  await window.hlx.plugins.load('eager');\n\n  // specific for webview\n  const urlParams = new URLSearchParams(window.location.search);\n  if (urlParams.get('theme') === 'dark' && window.location.href.includes('canvas')) {\n    document.body.style = 'background-color: #141517';\n  }\n\n  await loadEager(document);\n  await window.hlx.plugins.load('lazy');\n  await Constants.PRODUCT_ID_MAPPINGS_CALL;\n  // eslint-disable-next-line import/no-unresolved\n  await loadLazy(document);\n\n  await StoreResolver.resolve();\n  const elements = document.querySelectorAll('.await-loader');\n  document.dispatchEvent(new Event('bd_page_ready'));\n  window.bd_page_ready = true;\n  elements.forEach((element) => {\n    element.classList.remove('await-loader');\n  });\n\n  // loader circle used in mbox-canvas\n  const loaderCircle = document.querySelectorAll('.loader-circle');\n  loaderCircle.forEach((element) => {\n    element.classList.remove('loader-circle');\n  });\n\n  adobeMcAppendVisitorId('main');\n\n  pushTrialDownloadToDataLayer();\n  // eslint-disable-next-line import/no-unresolved\n  // const fpPromise = import('https://fpjscdn.net/v3/V9XgUXnh11vhRvHZw4dw')\n  //   .then((FingerprintJS) => FingerprintJS.load({\n  //     region: 'eu',\n  //   }));\n\n  // Get the visitorId when you need it.\n  // await fpPromise\n  //   .then((fp) => fp.get())\n  //   .then((result) => {\n  //     const { visitorId } = result;\n  //     AdobeDataLayerService.push(new VisitorIdEvent(visitorId));\n  //   });\n  AdobeDataLayerService.push(new PageLoadedEvent());\n\n  loadDelayed();\n}\n\ninitMobileDetector('mobile');\ninitMobileDetector('tablet');\ninitMobileDetector('desktop');\n\nloadPage();\n"],"file":"scripts/scripts.js"}