{"version":3,"file":"utils.js","sources":["../../../src/scripts/utils/utils.js"],"sourcesContent":["import { debounce, UserAgent } from '@repobit/dex-utils';\nimport { ButtonClickEvent, AdobeDataLayerService } from '@repobit/dex-data-layer';\nimport page from '../page.js';\nimport { Constants } from '../libs/constants.js';\n\nconst TRACKED_PRODUCTS = [];\nconst TRACKED_PRODUCTS_COMPARISON = [];\n\nexport const GLOBAL_V2_LOCALES = ['en-bz', 'en-lv'];\nexport const IANA_BY_REGION_MAP = new Map([\n  [3, { locale: 'en-GB', label: 'united kingdom' }],\n  [4, { locale: 'au-AU', label: 'australia' }],\n  [5, { locale: 'de-DE', label: 'germany' }],\n  [6, { locale: 'ro-RO', label: 'romania' }],\n  [7, { locale: 'es-ES', label: 'spain' }],\n  [8, { locale: 'en-US', label: 'com' }],\n  [9, { locale: 'it-IT', label: 'italy' }],\n  [10, { locale: 'en-CA', label: 'canada' }],\n  [12, { locale: 'pt-PT', label: 'portugal' }],\n  [13, { locale: 'br-BR', label: 'brazil' }],\n  [14, { locale: 'fr-FR', label: 'france' }],\n  [15, { locale: 'en-GB', label: 'united kingdom' }],\n  [16, { locale: 'en-US', label: 'rest of the world EU countries' }],\n  [17, { locale: 'de-CH', label: 'germany-switzerland' }],\n  [19, { locale: 'en-ZA', label: 'en south africa' }],\n  [22, { locale: 'nl-NL', label: 'netherlands' }],\n  [24, { locale: 'en-VN', label: 'en vietnam' }],\n  [20, { locale: 'en-MX', label: 'en es mexico' }],\n  [21, { locale: 'en-CO', label: 'en es columbia' }],\n  [25, { locale: 'en-SG', label: 'en singapore' }],\n  [26, { locale: 'en-SE', label: 'en sweden' }],\n  [27, { locale: 'en-DK', label: 'en denmark' }],\n  [28, { locale: 'en-HU', label: 'en hungary' }],\n  [29, { locale: 'en-BG', label: 'en bulgaria' }],\n  [30, { locale: 'en-HR', label: 'en croatia' }],\n  [31, { locale: 'en-NO', label: 'en norway' }],\n  [32, { locale: 'en-MD', label: 'en moldova' }],\n  [33, { locale: 'en-RS', label: 'en serbia' }],\n  [34, { locale: 'en-RU', label: 'en russia' }],\n  [35, { locale: 'en-EG', label: 'en egypt' }],\n  [36, { locale: 'en-SA', label: 'en saudi arabia' }],\n  [37, { locale: 'fr-DZ', label: 'en Algeria' }],\n  [38, { locale: 'en-AE', label: 'en united arab emirates' }],\n  [39, { locale: 'en-PS', label: 'en palestinia' }],\n  [40, { locale: 'en-CN', label: 'en china' }],\n  [41, { locale: 'en-HK', label: 'en hong kong' }],\n  [42, { locale: 'en-CK', label: 'Cook Islands' }],\n  [43, { locale: 'en-KE', label: 'en kenya' }],\n  [44, { locale: 'en-NG', label: 'en nigeria' }],\n  [45, { locale: 'fr-TN', label: 'en Tunisia' }],\n  [46, { locale: 'en-PL', label: 'en poland' }],\n  [47, { locale: 'en-CZ', label: 'en Czech' }],\n  [48, { locale: 'es-VE', label: 'en Venezuela' }],\n  [49, { locale: 'en-TR', label: 'en turkey' }],\n  [50, { locale: 'en-ID', label: 'en Indonesia' }],\n  [51, { locale: 'en-PH', label: 'en Philippines' }],\n  [52, { locale: 'en-TW', label: 'en taiwan' }],\n  [53, { locale: 'en-UA', label: 'en Ukraine' }],\n  [54, { locale: 'es-CL', label: 'en Chile' }],\n  [55, { locale: 'en-MY', label: 'en Malaysia' }],\n  [56, { locale: 'es-AR', label: 'en Argentina' }],\n  [57, { locale: 'es-PE', label: 'en Peru' }],\n  [59, { locale: 'hr-HR', label: 'Croatia' }],\n  [60, { locale: 'ma-MA', label: 'Morocco' }],\n  [61, { locale: 'pk-PK', label: 'Pakistan' }],\n  [62, { locale: 'bo-BO', label: 'Bolivia' }],\n  [63, { locale: 'do-DO', label: 'Dominican Republic' }],\n  [64, { locale: 'kw-KW', label: 'Kuwait' }],\n  [65, { locale: 'jo-JO', label: 'Jordan' }],\n  [66, { locale: 'th-TH', label: 'Thailand' }],\n  [67, { locale: 'en-BD', label: 'en Bangladesh' }],\n  [68, { locale: 'en-LK', label: 'en Sri Lanka' }],\n  [69, { locale: 'en-PY', label: 'en Paraguay' }],\n  [70, { locale: 'en-UY', label: 'en Uruguay' }],\n  [72, { locale: 'en-JP', label: 'en Japan' }],\n]);\n\nconst PRICE_LOCALE_MAP = new Map([\n  ['en-us', { force_country: 'en', country_code: 'us' }],\n  ['en-bg', { force_country: 'bg', country_code: 'bg' }],\n  ['en-ca', { force_country: 'ca', country_code: 'ca' }],\n  ['en-cl', { force_country: 'cl', country_code: 'cl' }],\n  ['en-dk', { force_country: 'dk', country_code: 'dk' }],\n  ['en-hu', { force_country: 'hu', country_code: 'hu' }],\n  ['en-id', { force_country: 'id', country_code: 'id' }],\n  ['en-il', { force_country: 'il', country_code: 'il' }],\n  ['en-in', { force_country: 'in', country_code: 'in' }],\n  ['en-kr', { force_country: 'kr', country_code: 'kr' }],\n  ['en-my', { force_country: 'my', country_code: 'my' }],\n  ['en-no', { force_country: 'no', country_code: 'no' }],\n  ['en-ph', { force_country: 'ph', country_code: 'ph' }],\n  ['en-pl', { force_country: 'pl', country_code: 'pl' }],\n  ['en-sa', { force_country: 'sa', country_code: 'sa' }],\n  ['en-th', { force_country: 'th', country_code: 'th' }],\n  ['en-za', { force_country: 'za', country_code: 'za' }],\n  ['en-ae', { force_country: 'ae', country_code: 'ae' }],\n  ['en-sg', { force_country: 'sg', country_code: 'sg' }],\n  ['en-sd', { force_country: 'sd', country_code: 'sd' }],\n  ['en-mt', { force_country: 'mt', country_code: 'mt' }],\n  ['en-lv', { force_country: 'lv', country_code: 'lv' }],\n  ['en-jm', { force_country: 'jm', country_code: 'jm' }],\n  ['en-bz', { force_country: 'bz', country_code: 'bz' }],\n  ['en-gb', { force_country: 'uk', country_code: 'gb' }],\n  ['en-au', { force_country: 'au', country_code: 'au' }],\n  ['en-nz', { force_country: 'nz', country_code: 'nz' }],\n  ['en-cz', { force_country: 'cz', country_code: 'cz' }],\n  ['en-global', { force_country: 'en', country_code: null }],\n  ['es-cl', { force_country: 'cl', country_code: 'cl' }],\n  ['es-co', { force_country: 'co', country_code: 'co' }],\n  ['es-mx', { force_country: 'mx', country_code: 'mx' }],\n  ['es-pe', { force_country: 'pe', country_code: 'pe' }],\n  ['es-bz', { force_country: 'bz', country_code: 'bz' }],\n  ['es-es', { force_country: 'es', country_code: 'es' }],\n  ['es-global', { force_country: 'en', country_code: null }],\n  ['ro-ro', { force_country: 'ro', country_code: 'ro' }],\n  ['it-it', { force_country: 'it', country_code: 'it' }],\n  ['fr-fr', { force_country: 'fr', country_code: 'fr' }],\n  ['fr-be', { force_country: null, country_code: null, isZuora: true }],\n  ['nl-be', { force_country: null, country_code: null, isZuora: true }],\n  ['nl-nl', { force_country: null, country_code: null, isZuora: true }],\n  ['de-de', { force_country: 'de', country_code: 'de' }],\n  ['de-at', { force_country: 'de', country_code: 'at' }],\n  ['de-ch', { force_country: 'ch', country_code: 'ch' }],\n  ['sv-se', { force_country: 'se', country_code: 'se' }],\n  ['pt-br', { force_country: 'br', country_code: 'br' }],\n  ['pt-pt', { force_country: 'pt', country_code: 'pt' }],\n  ['zh-hk', { force_country: 'en', country_code: 'hk' }],\n  ['zh-tw', { force_country: 'en', country_code: 'tw' }],\n]);\n\n/**\n * @returns {boolean} check if you are on exactly the consumer page (e.g /en-us/consumer/)\n */\nexport function checkIfNotProductPage() {\n  return Constants.NONE_PRODUCT_PAGES.includes(page.name);\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport function createTag(tag, attributes, html) {\n  const el = document.createElement(tag);\n  if (html) {\n    if (html instanceof HTMLElement\n      || html instanceof SVGElement\n      || html instanceof DocumentFragment) {\n      el.append(html);\n    } else if (Array.isArray(html)) {\n      el.append(...html);\n    } else {\n      el.insertAdjacentHTML('beforeend', html);\n    }\n  }\n  if (attributes) {\n    Object.entries(attributes).forEach(([key, val]) => {\n      el.setAttribute(key, val);\n    });\n  }\n  return el;\n}\n\nfunction isZuora() {\n  const url = new URL(window.location.href);\n  return url.pathname.includes('/nl-nl/') || url.pathname.includes('/nl-be/');\n}\n\nexport function getMetadata(name) {\n  const attr = name && name.includes(':') ? 'property' : 'name';\n  const meta = [...document.head.querySelectorAll(`meta[${attr}=\"${name}\"]`)].map((m) => m.content).join(', ');\n  return meta || '';\n}\n\nexport function getProductLinkCountryPrefix() {\n  const { pathname } = window.location;\n\n  if (pathname.includes('/en-au/')) {\n    return 'https://www.bitdefender.com.au/site/Store/ajax';\n  }\n\n  if (pathname.includes('/en-gb/')) {\n    return 'https://www.bitdefender.com.uk/site/Store/ajax';\n  }\n\n  if (pathname.includes('/ro-ro/')) {\n    return 'https://www.bitdefender.ro/site/Store/ajax';\n  }\n\n  if (pathname.includes('/it-it/')) {\n    return 'https://www.bitdefender.it/site/Store/ajax';\n  }\n\n  if (pathname.includes('/fr-fr/')) {\n    return 'https://www.bitdefender.fr/site/Store/ajax';\n  }\n\n  if (pathname.includes('/fr-be/')) {\n    return 'https://www.bitdefender.be/site/Store/ajax';\n  }\n\n  if (pathname.includes('/nl-be/')) {\n    return 'https://www.bitdefender.be/site/Store/ajax';\n  }\n\n  if (pathname.includes('/nl-nl/')) {\n    return 'https://www.bitdefender.nl/site/Store/ajax';\n  }\n\n  if (pathname.includes('/de-de/')) {\n    return 'https://www.bitdefender.de/site/Store/ajax';\n  }\n\n  if (pathname.includes('/de-ch/')) {\n    return 'https://www.bitdefender.de/site/Store/ajax';\n  }\n\n  if (pathname.includes('/sv-se/')) {\n    return 'https://www.bitdefender.se/site/Store/ajax';\n  }\n\n  if (pathname.includes('/pt-br/')) {\n    return 'https://www.bitdefender.com.br/site/Store/ajax';\n  }\n\n  if (pathname.includes('/pt-pt/')) {\n    return 'https://www.bitdefender.pt/site/Store/ajax';\n  }\n\n  if (pathname.includes('/es-es/')) {\n    return 'https://www.bitdefender.es/site/Store/ajax';\n  }\n\n  return 'https://www.bitdefender.com/site/Store/ajax';\n}\n\nexport function getBuyLinkCountryPrefix() {\n  return 'https://www.bitdefender.com/site/Store/buy';\n}\n\nexport function getPriceLocalMapByLocale() {\n  const locale = window.location.pathname.split('/')[1];\n  return PRICE_LOCALE_MAP.get(locale) || PRICE_LOCALE_MAP.get('en-us');\n}\n\n// eslint-disable-next-line max-len\nexport function generateProductBuyLink(product, productCode, month = null, years = null, pid = null) {\n  if (isZuora()) {\n    return product.buy_link;\n  }\n\n  const m = product.variation?.dimension_value || month;\n  const y = product.variation?.years || years;\n  const url = new URL(window.location.href);\n  let buyLinkPid = '';\n\n  if (pid) {\n    buyLinkPid = `pid.${pid}`;\n  } else if (url.searchParams.get('pid')) {\n    buyLinkPid = `pid.${url.searchParams.get('pid')}`;\n  } else if (getMetadata('pid')) {\n    buyLinkPid = `pid.${getMetadata('pid')}`;\n  }\n\n  if (GLOBAL_V2_LOCALES.includes(page.locale)) {\n    buyLinkPid = 'pid.global_v2';\n  }\n\n  const forceCountry = getPriceLocalMapByLocale().force_country;\n  return `${getBuyLinkCountryPrefix()}/${productCode}/${m}/${y}/${buyLinkPid}?force_country=${forceCountry}`;\n}\n\nexport function setDataOnBuyLinks(element, dataInfo) {\n  const { productId, variation } = dataInfo;\n  if (productId) element.dataset.product = productId.trim();\n\n  // element.dataset.buyPrice = variation.discounted_price || variation.price || 0;\n  if (variation.price) element.dataset.buyPrice = variation.price.trim();\n  if (variation.oldPrice) element.dataset.oldPrice = variation.oldPrice.trim();\n  if (variation.currency_label) element.dataset.currency = variation.currency_label.trim();\n  if (variation.region_id) element.dataset.region = variation.region_id.trim();\n  if (variation.variation_name) element.dataset.variation = variation.variation_name.trim();\n}\n\nexport function formatPrice(price, currency) {\n  if (!price) {\n    return null;\n  }\n  // const loc = region ? IANA_BY_REGION_MAP.get(Number(region))?.locale || 'en-US' : locale;\n  return new Intl.NumberFormat('en-US', { style: 'currency', currency }).format(price);\n}\n\nconst nanoBlocks = new Map();\n\nfunction findTextNodes(parent) {\n  let all = [];\n  for (let node = parent.firstChild; node; node = node.nextSibling) {\n    if (node.nodeType === Node.TEXT_NODE) all.push(node);\n    else all = all.concat(findTextNodes(node));\n  }\n  return all;\n}\n\n/**\n * Create a nano block\n * The renderer should return a valid HTMLElement. This parameter is mandatory.\n * @param name The name of the block\n * @param renderer The renderer function\n */\nexport function createNanoBlock(name, renderer) {\n  nanoBlocks.set(name.toLowerCase(), renderer);\n}\n\n/**\n * Parse nano block parameters, support string and array.\n * parseString(\"aa, bb, cc\") -> [ 'aa', 'bb', 'cc' ]\n * parseString(\"aa, [x, y, z], cc\") -> [ 'aa', [ 'x', 'y', 'z' ], 'cc' ]\n * @param params string representing nanoblock parameters\n * @returns an array representation of the parameters\n */\nfunction parseParams(params) {\n  const segments = params.split(',').map((segment) => segment.trim());\n  const result = [];\n\n  let tempArray = [];\n  let isInArray = false;\n\n  segments.forEach((segment) => {\n    if (isInArray) {\n      if (segment.endsWith(']')) {\n        tempArray.push(segment.slice(0, -1).trim());\n        result.push(tempArray);\n        tempArray = [];\n        isInArray = false;\n      } else {\n        tempArray.push(segment.trim());\n      }\n    } else if (segment.startsWith('[')) {\n      if (segment.endsWith(']')) {\n        result.push(segment.slice(1, -1).trim());\n      } else {\n        tempArray.push(segment.slice(1).trim());\n        isInArray = true;\n      }\n    } else {\n      result.push(segment);\n    }\n  });\n\n  return result;\n}\n\n// this was added as a translation support ( adding new breaklines in content was needed )\n// as a part of a new line metadata\n// values could be something like \"value, value2, ,,new text on new line\"\nfunction replaceDoubleCommas(str) {\n  // Convert the string to an array for easy manipulation\n  const arr = str.split('');\n\n  // Loop through the array from the end to the beginning\n  for (let i = arr.length - 1; i > 0; i -= 1) {\n    // Check if there are two consecutive commas\n    if (arr[i] === ',' && arr[i - 1] === ',') {\n      // Replace the two consecutive commas with a single comma\n      arr.splice(i, 1);\n    }\n  }\n\n  // Convert the array back to a string\n  return arr.join('');\n}\n\nexport function getDatasetFromSection(block) {\n  const parentSelector = block.closest('.section');\n  return parentSelector.dataset;\n}\n\n/**\n * Renders nano blocks\n * @param parent The parent element\n */\nexport async function renderNanoBlocks(\n  parent = document.body,\n  mv = undefined,\n  index = undefined,\n  block = undefined,\n) {\n  const regex = /{([^}]+)}/g;\n  findTextNodes(parent).forEach((node) => {\n    const text = node.textContent.trim();\n    const matches = text.match(regex);\n    if (matches) {\n      matches.forEach((match) => {\n        const [name] = parseParams(match.slice(1, -1));\n        const datasetValue = getDatasetFromSection(parent);\n\n        const datasetEntryValue = (index !== undefined ? datasetValue[`${name.toLowerCase()}${index + 1}`] : datasetValue[name.toLowerCase()]) || '';\n        const formattedDatasetEntryValue = replaceDoubleCommas(datasetEntryValue);\n\n        const newMatch = [match, formattedDatasetEntryValue.split(',')].join(',').replace(/[{}]/g, '');\n\n        const [newName, ...params] = parseParams(newMatch);\n        const renderer = nanoBlocks.get(newName.toLowerCase());\n        if (renderer) {\n          // eslint-disable-next-line max-len\n          const element = mv ? renderer(mv, ...params, block, index, parent) : renderer(...params, block, index, parent);\n          element.classList.add('nanoblock');\n          const oldElement = node.parentNode;\n          oldElement.parentNode.replaceChild(element, oldElement);\n        }\n      });\n    }\n  });\n}\n\n/**\n * Results returned from {@link fetchIndex} come from a derived Excel sheet that is constructed\n * with the FILTER function. This FILTER function has the unwanted side effect of returning '0' in\n * cells that are empty in the original sheet.\n *\n * This function replaces those '0' values with empty cells again.\n *\n * @see fetchIndex\n * @param {Object} data - the data returned from the fetchIndex function.\n */\nexport function fixExcelFilterZeroes(data) {\n  data.forEach((line) => {\n    Object.keys(line).forEach((k) => {\n      line[k] = line[k] === '0' ? '' : line[k];\n    });\n  });\n}\n\nexport async function fetchIndex(indexFile, sheet, pageSize = 500) {\n  const idxKey = indexFile.concat(sheet || '');\n\n  const handleIndex = async (offset) => {\n    const sheetParam = sheet ? `&sheet=${sheet}` : '';\n\n    const resp = await fetch(`/${window.location.pathname.split('/')[1]}/${indexFile}.json?limit=${pageSize}&offset=${offset}${sheetParam}`);\n    const json = await resp.json();\n\n    const newIndex = {\n      complete: (json.limit + json.offset) === json.total,\n      offset: json.offset + pageSize,\n      promise: null,\n      data: [...window.index[idxKey].data, ...json.data],\n    };\n\n    return newIndex;\n  };\n\n  window.index = window.index || {};\n  window.index[idxKey] = window.index[idxKey] || {\n    data: [],\n    offset: 0,\n    complete: false,\n    promise: null,\n  };\n\n  if (window.index[idxKey].complete) {\n    return window.index[idxKey];\n  }\n\n  if (window.index[idxKey].promise) {\n    return window.index[idxKey].promise;\n  }\n\n  window.index[idxKey].promise = handleIndex(window.index[idxKey].offset);\n  const newIndex = await (window.index[idxKey].promise);\n  window.index[idxKey] = newIndex;\n\n  return newIndex;\n}\n\nexport const GLOBAL_EVENTS = {\n  ADOBE_MC_LOADED: 'adobe_mc::loaded',\n  PAGE_LOADED: 'page::loaded',\n};\n\nconst ICONS_CACHE = {};\nexport async function decorateIcons(element) {\n  // Prepare the inline sprite\n  let svgSprite = document.getElementById('franklin-svg-sprite');\n  if (!svgSprite) {\n    const div = document.createElement('div');\n    div.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"franklin-svg-sprite\" style=\"display: none\"></svg>';\n    svgSprite = div.firstElementChild;\n    document.body.append(div.firstElementChild);\n  }\n\n  // Download all new icons\n  const icons = [...element.querySelectorAll('span.icon')];\n  await Promise.all(icons.map(async (span) => {\n    const iconName = Array.from(span.classList).find((c) => c.startsWith('icon-')).substring(5);\n    if (!ICONS_CACHE[iconName]) {\n      ICONS_CACHE[iconName] = true;\n      try {\n        let dynamicIconsSharepointPath = '/common/icons/';\n        if (window.location.hostname.includes('www-landing-pages') || window.location.hostname.includes('bitdefender.com/pages')) {\n          dynamicIconsSharepointPath = '/icons/';\n        }\n        const response = await fetch(`${dynamicIconsSharepointPath}${iconName}.svg`);\n        if (!response.ok) {\n          ICONS_CACHE[iconName] = false;\n          return;\n        }\n        // Styled icons don't play nice with the sprite approach because of shadow dom isolation\n        const svg = await response.text();\n        if (svg.match(/(<style | class=)/)) {\n          ICONS_CACHE[iconName] = { styled: true, html: svg };\n        } else {\n          ICONS_CACHE[iconName] = {\n            html: svg\n              .replace('<svg', `<symbol id=\"icons-sprite-${iconName}\"`)\n              .replace(/ width=\".*?\"/, '')\n              .replace(/ height=\".*?\"/, '')\n              .replace('</svg>', '</symbol>'),\n          };\n        }\n      } catch (error) {\n        ICONS_CACHE[iconName] = false;\n        // eslint-disable-next-line no-console\n        console.error(error);\n      }\n    }\n  }));\n\n  const symbols = Object\n    .keys(ICONS_CACHE).filter((k) => !svgSprite.querySelector(`#icons-sprite-${k}`))\n    .map((k) => ICONS_CACHE[k])\n    .filter((v) => !v.styled)\n    .map((v) => v.html)\n    .join('\\n');\n  svgSprite.innerHTML += symbols;\n\n  icons.forEach((span) => {\n    const iconName = Array.from(span.classList).find((c) => c.startsWith('icon-')).substring(5);\n    const parent = span.firstElementChild?.tagName === 'A' ? span.firstElementChild : span;\n    // Styled icons need to be inlined as-is, while unstyled ones can leverage the sprite\n    if (ICONS_CACHE[iconName].styled) {\n      parent.innerHTML = ICONS_CACHE[iconName].html;\n    } else {\n      parent.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\"><use href=\"#icons-sprite-${iconName}\"/></svg>`;\n    }\n  });\n}\n\n// General function to match the height of elements based on a selector\nexport async function matchHeights(targetNode, selector) {\n  const resetHeights = () => {\n    const elements = targetNode.querySelectorAll(selector);\n    elements.forEach((element) => {\n      element.style.minHeight = '';\n    });\n  };\n\n  const adjustHeights = () => {\n    if (window.innerWidth >= 768) {\n      resetHeights();\n      const elements = targetNode.querySelectorAll(selector);\n      const elementsHeight = Array.from(elements).map((element) => element.offsetHeight);\n      const maxHeight = Math.max(...elementsHeight);\n\n      elements.forEach((element) => {\n        element.style.minHeight = `${maxHeight}px`;\n      });\n    } else {\n      resetHeights();\n    }\n  };\n\n  const matchHeightsCallback = (mutationsList) => {\n    Array.from(mutationsList).forEach((mutation) => {\n      if (mutation.type === 'childList') {\n        adjustHeights();\n      }\n    });\n  };\n\n  const observer = new MutationObserver(matchHeightsCallback);\n  const resizeObserver = new ResizeObserver(debounce((entries) => {\n    // eslint-disable-next-line no-unused-vars\n    entries.forEach((entry) => {\n      adjustHeights();\n    });\n  }), 100);\n\n  if (targetNode) {\n    observer.observe(targetNode, { childList: true, subtree: true });\n  }\n\n  window.addEventListener('resize', () => {\n    adjustHeights();\n  });\n\n  const elements = targetNode.querySelectorAll(selector);\n  elements.forEach((element) => {\n    resizeObserver.observe(element);\n  });\n\n  adjustHeights();\n}\n\nexport function getPidFromUrl() {\n  const url = new URL(window.location.href);\n  return url.searchParams.get('pid') || getMetadata('pid');\n}\n\nexport function trackProduct(product, location = '') {\n  // eslint-disable-next-line max-len\n  if (!product && product.length === 0) return;\n  if (location && location === 'comparison') {\n    // eslint-disable-next-line max-len\n    const isDuplicate = TRACKED_PRODUCTS_COMPARISON.find((p) => p.platformProductId === product.platformProductId && p.variantId === product.variantId);\n    if (!isDuplicate) TRACKED_PRODUCTS_COMPARISON.push(product);\n  } else {\n    // eslint-disable-next-line max-len\n    const isDuplicate = TRACKED_PRODUCTS.find((p) => p.platformProductId === product.platformProductId && p.variantId === product.variantId);\n    if (!isDuplicate) TRACKED_PRODUCTS.push(product);\n  }\n}\n\nexport function pushTrialDownloadToDataLayer() {\n  const trialPaths = [\n    'fragments/thank-you-for-downloading',\n    'fragments/get-bitdefender',\n    'fragments/trial',\n  ];\n\n  const getTrialID = (currentPage, button) => {\n    if (['thank-you', 'free-antivirus'].includes(currentPage)) {\n      return '8430';\n    }\n\n    if (button?.dataset?.storeId) return button.dataset.storeId;\n\n    const closestStoreElementWithId = button?.closest('.section')?.querySelector('[data-store-id]');\n    if (closestStoreElementWithId) {\n      return closestStoreElementWithId.dataset.storeId;\n    }\n\n    // eslint-disable-next-line max-len\n    return getMetadata('breadcrumb-title') || getMetadata('og:title');\n  };\n\n  const currentPage = page.name;\n  const downloadType = currentPage === 'thank-you' ? 'product' : 'trial';\n\n  const pushTrialData = (button = null) => {\n    AdobeDataLayerService.push(new ButtonClickEvent(\n      `${downloadType} downloaded`,\n      getTrialID(currentPage, button),\n    ));\n  };\n\n  const sections = document.querySelectorAll('a.button.modal');\n  if (sections.length) {\n    sections.forEach((button) => {\n      const href = button.getAttribute('href');\n      if (trialPaths.some((trialPath) => href.includes(trialPath))) {\n        button.addEventListener('click', () => { pushTrialData(button); });\n      }\n    });\n  } else if (currentPage === 'thank-you') {\n    pushTrialData();\n  }\n}\n\nexport function setUrlParams(urlIn, paramsIn = []) {\n  const isRelativeLink = /^(?!\\/\\/|[a-z]+:)/i;\n\n  if (!Array.isArray(paramsIn)) {\n    // eslint-disable-next-line no-console\n    console.error(`paramsIn must be an Array but you provided an ${typeof paramsIn}`);\n    return urlIn;\n  }\n\n  const url = isRelativeLink.test(urlIn) ? new URL(urlIn, window.location.origin) : new URL(urlIn);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const param of paramsIn) {\n    if (!param) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    const [key, value] = param.split('=');\n\n    if (value === '') {\n      url.searchParams.delete(key);\n    } else {\n      url.searchParams.set(key, value || '');\n    }\n  }\n\n  return url.href;\n}\n\nexport function getDomain() {\n  return window.location.pathname.split('/').filter((item) => item)[0];\n}\n\nexport function isView(viewport) {\n  const element = document.querySelectorAll(`[data-${viewport}-detector]`)[0];\n  return !!(element && getComputedStyle(element).display !== 'none');\n}\n\nexport function openUrlForOs(urlMacos, urlWindows, urlAndroid, urlIos, anchorSelector = null) {\n  // Open the appropriate URL based on the OS\n  let openUrl;\n  switch (UserAgent.os) {\n    case 'Mac/iOS':\n      openUrl = urlMacos;\n      break;\n    case 'Windows':\n      openUrl = urlWindows;\n      break;\n    case 'Linux':\n    case 'android':\n      openUrl = urlAndroid;\n      break;\n    case 'ios':\n      openUrl = urlIos;\n      break;\n    default:\n      openUrl = null; // Fallback or 'Unknown' case\n  }\n\n  if (openUrl) {\n    if (anchorSelector) {\n      anchorSelector.href = openUrl;\n    } else {\n      window.open(openUrl, '_self');\n    }\n  }\n}\n\nexport function getBrowserName() {\n  const { userAgent } = navigator;\n\n  if (userAgent.includes('Firefox')) {\n    return 'Firefox';\n  } if (userAgent.includes('Edg')) {\n    return 'Edge';\n  } if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) {\n    return 'Chrome';\n  } if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {\n    return 'Safari';\n  }\n  return 'Unknown';\n}\n\n/**\n * Returns the promotion/campaign found in the URL\n * @returns {string|null}\n */\nexport const getUrlPromotion = () => page.getParamValue('pid')\n  || page.getParamValue('promotionId')\n  || page.getParamValue('campaign')\n  || null;\n\n/**\n * Returns the promotion/campaign found in the Vlaicu file or 'global_v2' for specific locales\n * @returns {string|null}\n */\nexport const getCampaignBasedOnLocale = () => {\n  if (GLOBAL_V2_LOCALES.find((domain) => page.locale === domain)) {\n    return 'global_v2';\n  }\n\n  if (!Constants.ZUROA_LOCALES.includes(page.locale)) {\n    return Constants.NO_PROMOTION;\n  }\n\n  return Constants.PRODUCT_ID_MAPPINGS?.campaign || Constants.NO_PROMOTION;\n};\n\nexport function decorateBlockWithRegionId(element, id) {\n  // we could consider to use `element.setAttribute('s-object-region', id);` in the future\n  if (element) element.id = id;\n}\n\nexport function decorateLinkWithLinkTrackingId(element, id) {\n  if (element) element.setAttribute('s-object-id', id);\n}\n\nexport const getPageExperimentKey = () => getMetadata(Constants.TARGET_EXPERIMENT_METADATA_KEY);\n\n/**\n *\n * @returns {boolean} returns wether A/B tests should be disabled or not\n */\nexport const shouldABTestsBeDisabled = () => {\n  /** This is a special case for when adobe.target is disabled using dotest query param */\n  const windowSearchParams = new URLSearchParams(window.location.search);\n  if (windowSearchParams.get(Constants.DISABLE_TARGET_PARAMS.key)\n    === Constants.DISABLE_TARGET_PARAMS.value) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n *\n * @returns {object} - get experiment information\n */\nexport const getExperimentDetails = () => {\n  if (!window.hlx || !window.hlx.experiment) {\n    return null;\n  }\n\n  const { id: experimentId, selectedVariant: experimentVariant } = window.hlx.experiment;\n  return { experimentId, experimentVariant };\n};\n\n/**\n * get the name of the page as seen by analytics\n * @returns {string}\n */\nexport const generatePageLoadStartedName = () => {\n  /**\n   *\n   * @param {string[]} tags\n   * @returns {string[]} get all analytic tags\n   */\n  const getTags = (tags) => (tags ? tags.split(':').filter((tag) => !!tag).map((tag) => tag.trim()) : []);\n  const { pathname } = window.location;\n\n  const METADATA_ANALYTICS_TAGS = 'analytics-tags';\n  const tags = getTags(getMetadata(METADATA_ANALYTICS_TAGS));\n  const { locale } = page;\n  // currenty, the language is the default first tag and section parameter, with webview, we want\n  // something else to be the first tag and section\n  const pageSectionDataLocale = getMetadata('locale') || page.locale;\n\n  let tagName;\n  if (tags.length) {\n    tagName = [pageSectionDataLocale, ...tags].filter(Boolean).join(':'); // e.g. au:consumer:product:internet security\n  } else {\n    const allSegments = pathname.split('/').filter((segment) => segment !== '');\n    const lastSegment = allSegments[allSegments.length - 1];\n    const subSubSubSection = allSegments[allSegments.length - 1].replace('-', ' ');\n    tagName = `${locale}:product:${subSubSubSection}`;\n    if (lastSegment === 'consumer') {\n      tagName = `${locale}:consumer:solutions`;\n    }\n\n    if (window.errorCode === '404') {\n      tagName = `${locale}:404`;\n    }\n  }\n\n  return tagName;\n};\n\n/**\n *\n * @returns {string} get product findings for analytics\n */\nexport const getProductFinding = () => {\n  const pageName = page.name.toLowerCase();\n  let productFinding;\n  switch (pageName) {\n    case 'consumer':\n      productFinding = 'solutions page';\n      break;\n    case 'thank-you':\n      productFinding = 'thank you page';\n      break;\n    case 'toolbox page':\n      productFinding = 'toolbox page';\n      break;\n    case 'downloads':\n      productFinding = 'downloads page';\n      break;\n    default:\n      productFinding = 'product pages';\n      break;\n  }\n\n  return productFinding;\n};\n\nexport function generateLDJsonSchema() {\n  const country = getMetadata('jsonld-areaserved')\n    .split(';')\n    .map((pair) => pair.split(':'))\n    .findLast(([key]) => key === page.locale)?.[1] || null;\n\n  const jsonldName = getMetadata('jsonld-name');\n\n  if (!country || !jsonldName) {\n    return;\n  }\n\n  const ldJson = {\n    '@context': 'https://schema.org',\n    '@type': 'WebPage',\n    name: jsonldName,\n    url: `${window.location.origin}${window.location.pathname}`,\n    inLanguage: page.locale,\n    areaServed: {\n      '@type': 'Country',\n      name: country,\n    },\n    isPartOf: {\n      '@type': 'WebSite',\n      name: 'Bitdefender',\n      url: `${window.location.origin}/${page.locale}/`,\n    },\n  };\n\n  const script = document.createElement('script');\n  script.type = 'application/ld+json';\n  script.textContent = JSON.stringify(ldJson, null, 2); // Pretty print\n  document.head.appendChild(script);\n}\n"],"names":["TRACKED_PRODUCTS","TRACKED_PRODUCTS_COMPARISON","GLOBAL_V2_LOCALES","IANA_BY_REGION_MAP","PRICE_LOCALE_MAP","checkIfNotProductPage","Constants","page","createTag","tag","attributes","html","el","key","val","isZuora","url","getMetadata","name","attr","m","getProductLinkCountryPrefix","pathname","getBuyLinkCountryPrefix","getPriceLocalMapByLocale","locale","generateProductBuyLink","product","productCode","month","years","pid","y","buyLinkPid","forceCountry","setDataOnBuyLinks","element","dataInfo","productId","variation","formatPrice","price","currency","nanoBlocks","findTextNodes","parent","all","node","createNanoBlock","renderer","parseParams","params","segments","segment","result","tempArray","isInArray","replaceDoubleCommas","str","arr","i","getDatasetFromSection","block","renderNanoBlocks","mv","index","regex","matches","match","datasetValue","datasetEntryValue","formattedDatasetEntryValue","newMatch","newName","oldElement","fixExcelFilterZeroes","data","line","k","fetchIndex","indexFile","sheet","pageSize","idxKey","handleIndex","offset","sheetParam","json","newIndex","GLOBAL_EVENTS","ICONS_CACHE","decorateIcons","svgSprite","div","icons","span","iconName","c","dynamicIconsSharepointPath","response","svg","error","symbols","v","matchHeights","targetNode","selector","resetHeights","adjustHeights","elements","elementsHeight","maxHeight","matchHeightsCallback","mutationsList","mutation","observer","resizeObserver","debounce","entries","entry","getPidFromUrl","trackProduct","location","p","pushTrialDownloadToDataLayer","trialPaths","getTrialID","currentPage","button","closestStoreElementWithId","downloadType","pushTrialData","AdobeDataLayerService","ButtonClickEvent","sections","href","trialPath","setUrlParams","urlIn","paramsIn","isRelativeLink","param","value","getDomain","item","isView","viewport","openUrlForOs","urlMacos","urlWindows","urlAndroid","urlIos","anchorSelector","openUrl","UserAgent","getBrowserName","userAgent","getUrlPromotion","getCampaignBasedOnLocale","domain","decorateBlockWithRegionId","id","decorateLinkWithLinkTrackingId","getPageExperimentKey","shouldABTestsBeDisabled","getExperimentDetails","experimentId","experimentVariant","generatePageLoadStartedName","getTags","tags","pageSectionDataLocale","tagName","allSegments","lastSegment","subSubSubSection","getProductFinding","pageName","productFinding","generateLDJsonSchema","country","pair","jsonldName","ldJson","script"],"mappings":"+gBAKA,MAAMA,EAAmB,CAAE,EACrBC,EAA8B,CAAE,EAEzBC,EAAoB,CAAC,QAAS,OAAO,EACrCC,EAAqB,IAAI,IAAI,CACxC,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,gBAAgB,CAAE,EAChD,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC3C,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EACzC,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EACzC,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,OAAO,CAAE,EACvC,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,KAAK,CAAE,EACrC,CAAC,EAAG,CAAE,OAAQ,QAAS,MAAO,OAAO,CAAE,EACvC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,QAAQ,CAAE,EACzC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,QAAQ,CAAE,EACzC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,QAAQ,CAAE,EACzC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,gBAAgB,CAAE,EACjD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,gCAAgC,CAAE,EACjE,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,qBAAqB,CAAE,EACtD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,iBAAiB,CAAE,EAClD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,aAAa,CAAE,EAC9C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,gBAAgB,CAAE,EACjD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,aAAa,CAAE,EAC9C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,iBAAiB,CAAE,EAClD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,yBAAyB,CAAE,EAC1D,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,eAAe,CAAE,EAChD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,gBAAgB,CAAE,EACjD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,WAAW,CAAE,EAC5C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,aAAa,CAAE,EAC9C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EAC1C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EAC1C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EAC1C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,SAAS,CAAE,EAC1C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,oBAAoB,CAAE,EACrD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,QAAQ,CAAE,EACzC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,QAAQ,CAAE,EACzC,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,EAC3C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,eAAe,CAAE,EAChD,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,cAAc,CAAE,EAC/C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,aAAa,CAAE,EAC9C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,YAAY,CAAE,EAC7C,CAAC,GAAI,CAAE,OAAQ,QAAS,MAAO,UAAU,CAAE,CAC7C,CAAC,EAEKC,EAAmB,IAAI,IAAI,CAC/B,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,YAAa,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACzD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,YAAa,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACzD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,KAAM,QAAS,GAAM,EACpE,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,KAAM,QAAS,GAAM,EACpE,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,KAAM,QAAS,GAAM,EACpE,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,EACrD,CAAC,QAAS,CAAE,cAAe,KAAM,aAAc,IAAI,CAAE,CACvD,CAAC,EAKM,SAASC,GAAwB,CACtC,OAAOC,EAAU,mBAAmB,SAASC,EAAK,IAAI,CACxD,CAGO,SAASC,EAAUC,EAAKC,EAAYC,EAAM,CAC/C,MAAMC,EAAK,SAAS,cAAcH,CAAG,EACrC,OAAIE,IACEA,aAAgB,aACfA,aAAgB,YAChBA,aAAgB,iBACnBC,EAAG,OAAOD,CAAI,EACL,MAAM,QAAQA,CAAI,EAC3BC,EAAG,OAAO,GAAGD,CAAI,EAEjBC,EAAG,mBAAmB,YAAaD,CAAI,GAGvCD,GACF,OAAO,QAAQA,CAAU,EAAE,QAAQ,CAAC,CAACG,EAAKC,CAAG,IAAM,CACjDF,EAAG,aAAaC,EAAKC,CAAG,CAC9B,CAAK,EAEIF,CACT,CAEA,SAASG,GAAU,CACjB,MAAMC,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxC,OAAOA,EAAI,SAAS,SAAS,SAAS,GAAKA,EAAI,SAAS,SAAS,SAAS,CAC5E,CAEO,SAASC,EAAYC,EAAM,CAChC,MAAMC,EAAOD,GAAQA,EAAK,SAAS,GAAG,EAAI,WAAa,OAEvD,MADa,CAAC,GAAG,SAAS,KAAK,iBAAiB,QAAQC,CAAI,KAAKD,CAAI,IAAI,CAAC,EAAE,IAAKE,GAAMA,EAAE,OAAO,EAAE,KAAK,IAAI,GAC5F,EACjB,CAEO,SAASC,GAA8B,CAC5C,KAAM,CAAE,SAAAC,GAAa,OAAO,SAE5B,OAAIA,EAAS,SAAS,SAAS,EACtB,iDAGLA,EAAS,SAAS,SAAS,EACtB,iDAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,GAI3BA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,GAI3BA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,iDAGLA,EAAS,SAAS,SAAS,EACtB,6CAGLA,EAAS,SAAS,SAAS,EACtB,6CAGF,6CACT,CAEO,SAASC,GAA0B,CACxC,MAAO,4CACT,CAEO,SAASC,GAA2B,CACzC,MAAMC,EAAS,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,EACpD,OAAOrB,EAAiB,IAAIqB,CAAM,GAAKrB,EAAiB,IAAI,OAAO,CACrE,CAGO,SAASsB,EAAuBC,EAASC,EAAaC,EAAQ,KAAMC,EAAQ,KAAMC,EAAM,KAAM,CACnG,GAAIhB,EAAO,EACT,OAAOY,EAAQ,SAGjB,MAAMP,EAAIO,EAAQ,WAAW,iBAAmBE,EAC1CG,EAAIL,EAAQ,WAAW,OAASG,EAChCd,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxC,IAAIiB,EAAa,GAEbF,EACFE,EAAa,OAAOF,CAAG,GACdf,EAAI,aAAa,IAAI,KAAK,EACnCiB,EAAa,OAAOjB,EAAI,aAAa,IAAI,KAAK,CAAC,GACtCC,EAAY,KAAK,IAC1BgB,EAAa,OAAOhB,EAAY,KAAK,CAAC,IAGpCf,EAAkB,SAASK,EAAK,MAAM,IACxC0B,EAAa,iBAGf,MAAMC,EAAeV,EAAwB,EAAG,cAChD,MAAO,GAAGD,EAAuB,CAAE,IAAIK,CAAW,IAAIR,CAAC,IAAIY,CAAC,IAAIC,CAAU,kBAAkBC,CAAY,EAC1G,CAEO,SAASC,EAAkBC,EAASC,EAAU,CACnD,KAAM,CAAE,UAAAC,EAAW,UAAAC,CAAS,EAAKF,EAC7BC,IAAWF,EAAQ,QAAQ,QAAUE,EAAU,KAAM,GAGrDC,EAAU,QAAOH,EAAQ,QAAQ,SAAWG,EAAU,MAAM,KAAM,GAClEA,EAAU,WAAUH,EAAQ,QAAQ,SAAWG,EAAU,SAAS,KAAM,GACxEA,EAAU,iBAAgBH,EAAQ,QAAQ,SAAWG,EAAU,eAAe,KAAM,GACpFA,EAAU,YAAWH,EAAQ,QAAQ,OAASG,EAAU,UAAU,KAAM,GACxEA,EAAU,iBAAgBH,EAAQ,QAAQ,UAAYG,EAAU,eAAe,KAAM,EAC3F,CAEO,SAASC,EAAYC,EAAOC,EAAU,CAC3C,OAAKD,EAIE,IAAI,KAAK,aAAa,QAAS,CAAE,MAAO,WAAY,SAAAC,CAAU,CAAA,EAAE,OAAOD,CAAK,EAH1E,IAIX,CAEA,MAAME,EAAa,IAAI,IAEvB,SAASC,EAAcC,EAAQ,CAC7B,IAAIC,EAAM,CAAE,EACZ,QAASC,EAAOF,EAAO,WAAYE,EAAMA,EAAOA,EAAK,YAC/CA,EAAK,WAAa,KAAK,UAAWD,EAAI,KAAKC,CAAI,EAC9CD,EAAMA,EAAI,OAAOF,EAAcG,CAAI,CAAC,EAE3C,OAAOD,CACT,CAQO,SAASE,EAAgB9B,EAAM+B,EAAU,CAC9CN,EAAW,IAAIzB,EAAK,YAAW,EAAI+B,CAAQ,CAC7C,CASA,SAASC,EAAYC,EAAQ,CAC3B,MAAMC,EAAWD,EAAO,MAAM,GAAG,EAAE,IAAKE,GAAYA,EAAQ,MAAM,EAC5DC,EAAS,CAAE,EAEjB,IAAIC,EAAY,CAAE,EACdC,EAAY,GAEhB,OAAAJ,EAAS,QAASC,GAAY,CACxBG,EACEH,EAAQ,SAAS,GAAG,GACtBE,EAAU,KAAKF,EAAQ,MAAM,EAAG,EAAE,EAAE,MAAM,EAC1CC,EAAO,KAAKC,CAAS,EACrBA,EAAY,CAAE,EACdC,EAAY,IAEZD,EAAU,KAAKF,EAAQ,MAAM,EAEtBA,EAAQ,WAAW,GAAG,EAC3BA,EAAQ,SAAS,GAAG,EACtBC,EAAO,KAAKD,EAAQ,MAAM,EAAG,EAAE,EAAE,MAAM,GAEvCE,EAAU,KAAKF,EAAQ,MAAM,CAAC,EAAE,MAAM,EACtCG,EAAY,IAGdF,EAAO,KAAKD,CAAO,CAEzB,CAAG,EAEMC,CACT,CAKA,SAASG,EAAoBC,EAAK,CAEhC,MAAMC,EAAMD,EAAI,MAAM,EAAE,EAGxB,QAASE,EAAID,EAAI,OAAS,EAAGC,EAAI,EAAGA,GAAK,EAEnCD,EAAIC,CAAC,IAAM,KAAOD,EAAIC,EAAI,CAAC,IAAM,KAEnCD,EAAI,OAAOC,EAAG,CAAC,EAKnB,OAAOD,EAAI,KAAK,EAAE,CACpB,CAEO,SAASE,EAAsBC,EAAO,CAE3C,OADuBA,EAAM,QAAQ,UAAU,EACzB,OACxB,CAMO,eAAeC,GACpBlB,EAAS,SAAS,KAClBmB,EAAK,OACLC,EAAQ,OACRH,EAAQ,OACR,CACA,MAAMI,EAAQ,aACdtB,EAAcC,CAAM,EAAE,QAASE,GAAS,CAEtC,MAAMoB,EADOpB,EAAK,YAAY,KAAM,EACf,MAAMmB,CAAK,EAC5BC,GACFA,EAAQ,QAASC,GAAU,CACzB,KAAM,CAAClD,CAAI,EAAIgC,EAAYkB,EAAM,MAAM,EAAG,EAAE,CAAC,EACvCC,EAAeR,EAAsBhB,CAAM,EAE3CyB,GAAqBL,IAAU,OAAYI,EAAa,GAAGnD,EAAK,YAAW,CAAE,GAAG+C,EAAQ,CAAC,EAAE,EAAII,EAAanD,EAAK,YAAa,CAAA,IAAM,GACpIqD,EAA6Bd,EAAoBa,CAAiB,EAElEE,EAAW,CAACJ,EAAOG,EAA2B,MAAM,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,QAAQ,QAAS,EAAE,EAEvF,CAACE,EAAS,GAAGtB,CAAM,EAAID,EAAYsB,CAAQ,EAC3CvB,EAAWN,EAAW,IAAI8B,EAAQ,YAAW,CAAE,EACrD,GAAIxB,EAAU,CAEZ,MAAMb,EAAU4B,EAAKf,EAASe,EAAI,GAAGb,EAAQW,EAAOG,EAAOpB,CAAM,EAAII,EAAS,GAAGE,EAAQW,EAAOG,EAAOpB,CAAM,EAC7GT,EAAQ,UAAU,IAAI,WAAW,EACjC,MAAMsC,EAAa3B,EAAK,WACxB2B,EAAW,WAAW,aAAatC,EAASsC,CAAU,CAChE,CACA,CAAO,CAEP,CAAG,CACH,CAYO,SAASC,GAAqBC,EAAM,CACzCA,EAAK,QAASC,GAAS,CACrB,OAAO,KAAKA,CAAI,EAAE,QAASC,GAAM,CAC/BD,EAAKC,CAAC,EAAID,EAAKC,CAAC,IAAM,IAAM,GAAKD,EAAKC,CAAC,CAC7C,CAAK,CACL,CAAG,CACH,CAEO,eAAeC,GAAWC,EAAWC,EAAOC,EAAW,IAAK,CACjE,MAAMC,EAASH,EAAU,OAAOC,GAAS,EAAE,EAErCG,EAAc,MAAOC,GAAW,CACpC,MAAMC,EAAaL,EAAQ,UAAUA,CAAK,GAAK,GAGzCM,EAAO,MADA,MAAM,MAAM,IAAI,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC,IAAIP,CAAS,eAAeE,CAAQ,WAAWG,CAAM,GAAGC,CAAU,EAAE,GAC/G,KAAM,EAS9B,MAPiB,CACf,SAAWC,EAAK,MAAQA,EAAK,SAAYA,EAAK,MAC9C,OAAQA,EAAK,OAASL,EACtB,QAAS,KACT,KAAM,CAAC,GAAG,OAAO,MAAMC,CAAM,EAAE,KAAM,GAAGI,EAAK,IAAI,CAClD,CAGF,EAUD,GARA,OAAO,MAAQ,OAAO,OAAS,CAAE,EACjC,OAAO,MAAMJ,CAAM,EAAI,OAAO,MAAMA,CAAM,GAAK,CAC7C,KAAM,CAAE,EACR,OAAQ,EACR,SAAU,GACV,QAAS,IACV,EAEG,OAAO,MAAMA,CAAM,EAAE,SACvB,OAAO,OAAO,MAAMA,CAAM,EAG5B,GAAI,OAAO,MAAMA,CAAM,EAAE,QACvB,OAAO,OAAO,MAAMA,CAAM,EAAE,QAG9B,OAAO,MAAMA,CAAM,EAAE,QAAUC,EAAY,OAAO,MAAMD,CAAM,EAAE,MAAM,EACtE,MAAMK,EAAW,MAAO,OAAO,MAAML,CAAM,EAAE,QAC7C,cAAO,MAAMA,CAAM,EAAIK,EAEhBA,CACT,CAEY,MAACC,GAAgB,CAC3B,gBAAiB,mBACjB,YAAa,cACf,EAEMC,EAAc,CAAE,EACf,eAAeC,GAAcvD,EAAS,CAE3C,IAAIwD,EAAY,SAAS,eAAe,qBAAqB,EAC7D,GAAI,CAACA,EAAW,CACd,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,gGAChBD,EAAYC,EAAI,kBAChB,SAAS,KAAK,OAAOA,EAAI,iBAAiB,CAC9C,CAGE,MAAMC,EAAQ,CAAC,GAAG1D,EAAQ,iBAAiB,WAAW,CAAC,EACvD,MAAM,QAAQ,IAAI0D,EAAM,IAAI,MAAOC,GAAS,CAC1C,MAAMC,EAAW,MAAM,KAAKD,EAAK,SAAS,EAAE,KAAME,GAAMA,EAAE,WAAW,OAAO,CAAC,EAAE,UAAU,CAAC,EAC1F,GAAI,CAACP,EAAYM,CAAQ,EAAG,CAC1BN,EAAYM,CAAQ,EAAI,GACxB,GAAI,CACF,IAAIE,EAA6B,kBAC7B,OAAO,SAAS,SAAS,SAAS,mBAAmB,GAAK,OAAO,SAAS,SAAS,SAAS,uBAAuB,KACrHA,EAA6B,WAE/B,MAAMC,EAAW,MAAM,MAAM,GAAGD,CAA0B,GAAGF,CAAQ,MAAM,EAC3E,GAAI,CAACG,EAAS,GAAI,CAChBT,EAAYM,CAAQ,EAAI,GACxB,MACV,CAEQ,MAAMI,EAAM,MAAMD,EAAS,KAAM,EAC7BC,EAAI,MAAM,mBAAmB,EAC/BV,EAAYM,CAAQ,EAAI,CAAE,OAAQ,GAAM,KAAMI,CAAK,EAEnDV,EAAYM,CAAQ,EAAI,CACtB,KAAMI,EACH,QAAQ,OAAQ,4BAA4BJ,CAAQ,GAAG,EACvD,QAAQ,eAAgB,EAAE,EAC1B,QAAQ,gBAAiB,EAAE,EAC3B,QAAQ,SAAU,WAAW,CACjC,CAEJ,OAAQK,EAAO,CACdX,EAAYM,CAAQ,EAAI,GAExB,QAAQ,MAAMK,CAAK,CAC3B,CACA,CACA,CAAG,CAAC,EAEF,MAAMC,EAAU,OACb,KAAKZ,CAAW,EAAE,OAAQZ,GAAM,CAACc,EAAU,cAAc,iBAAiBd,CAAC,EAAE,CAAC,EAC9E,IAAKA,GAAMY,EAAYZ,CAAC,CAAC,EACzB,OAAQyB,GAAM,CAACA,EAAE,MAAM,EACvB,IAAKA,GAAMA,EAAE,IAAI,EACjB,KAAK;AAAA,CAAI,EACZX,EAAU,WAAaU,EAEvBR,EAAM,QAASC,GAAS,CACtB,MAAMC,EAAW,MAAM,KAAKD,EAAK,SAAS,EAAE,KAAME,GAAMA,EAAE,WAAW,OAAO,CAAC,EAAE,UAAU,CAAC,EACpFpD,EAASkD,EAAK,mBAAmB,UAAY,IAAMA,EAAK,kBAAoBA,EAE9EL,EAAYM,CAAQ,EAAE,OACxBnD,EAAO,UAAY6C,EAAYM,CAAQ,EAAE,KAEzCnD,EAAO,UAAY,oEAAoEmD,CAAQ,WAErG,CAAG,CACH,CAGO,eAAeQ,GAAaC,EAAYC,EAAU,CACvD,MAAMC,EAAe,IAAM,CACRF,EAAW,iBAAiBC,CAAQ,EAC5C,QAAStE,GAAY,CAC5BA,EAAQ,MAAM,UAAY,EAChC,CAAK,CACF,EAEKwE,EAAgB,IAAM,CAC1B,GAAI,OAAO,YAAc,IAAK,CAC5BD,EAAc,EACd,MAAME,EAAWJ,EAAW,iBAAiBC,CAAQ,EAC/CI,EAAiB,MAAM,KAAKD,CAAQ,EAAE,IAAKzE,GAAYA,EAAQ,YAAY,EAC3E2E,EAAY,KAAK,IAAI,GAAGD,CAAc,EAE5CD,EAAS,QAASzE,GAAY,CAC5BA,EAAQ,MAAM,UAAY,GAAG2E,CAAS,IAC9C,CAAO,CACP,MACMJ,EAAc,CAEjB,EAEKK,EAAwBC,GAAkB,CAC9C,MAAM,KAAKA,CAAa,EAAE,QAASC,GAAa,CAC1CA,EAAS,OAAS,aACpBN,EAAe,CAEvB,CAAK,CACF,EAEKO,EAAW,IAAI,iBAAiBH,CAAoB,EACpDI,EAAiB,IAAI,eAAeC,EAAUC,GAAY,CAE9DA,EAAQ,QAASC,GAAU,CACzBX,EAAe,CACrB,CAAK,CACF,CAAA,EAAG,GAAG,EAEHH,GACFU,EAAS,QAAQV,EAAY,CAAE,UAAW,GAAM,QAAS,GAAM,EAGjE,OAAO,iBAAiB,SAAU,IAAM,CACtCG,EAAe,CACnB,CAAG,EAEgBH,EAAW,iBAAiBC,CAAQ,EAC5C,QAAStE,GAAY,CAC5BgF,EAAe,QAAQhF,CAAO,CAClC,CAAG,EAEDwE,EAAe,CACjB,CAEO,SAASY,IAAgB,CAE9B,OADY,IAAI,IAAI,OAAO,SAAS,IAAI,EAC7B,aAAa,IAAI,KAAK,GAAKvG,EAAY,KAAK,CACzD,CAEO,SAASwG,GAAa9F,EAAS+F,EAAW,GAAI,CAE/C,CAAC/F,GAAWA,EAAQ,SAAW,IAC/B+F,GAAYA,IAAa,aAEPzH,EAA4B,KAAM0H,GAAMA,EAAE,oBAAsBhG,EAAQ,mBAAqBgG,EAAE,YAAchG,EAAQ,SAAS,GAChI1B,EAA4B,KAAK0B,CAAO,EAGtC3B,EAAiB,KAAM2H,GAAMA,EAAE,oBAAsBhG,EAAQ,mBAAqBgG,EAAE,YAAchG,EAAQ,SAAS,GACrH3B,EAAiB,KAAK2B,CAAO,EAEnD,CAEO,SAASiG,IAA+B,CAC7C,MAAMC,EAAa,CACjB,sCACA,4BACA,iBACD,EAEKC,EAAa,CAACC,EAAaC,IAAW,CAC1C,GAAI,CAAC,YAAa,gBAAgB,EAAE,SAASD,CAAW,EACtD,MAAO,OAGT,GAAIC,GAAQ,SAAS,QAAS,OAAOA,EAAO,QAAQ,QAEpD,MAAMC,EAA4BD,GAAQ,QAAQ,UAAU,GAAG,cAAc,iBAAiB,EAC9F,OAAIC,EACKA,EAA0B,QAAQ,QAIpChH,EAAY,kBAAkB,GAAKA,EAAY,UAAU,CACjE,EAEK8G,EAAcxH,EAAK,KACnB2H,EAAeH,IAAgB,YAAc,UAAY,QAEzDI,EAAgB,CAACH,EAAS,OAAS,CACvCI,EAAsB,KAAK,IAAIC,EAC7B,GAAGH,CAAY,cACfJ,EAAWC,EAAaC,CAAM,CACpC,CAAK,CACF,EAEKM,EAAW,SAAS,iBAAiB,gBAAgB,EACvDA,EAAS,OACXA,EAAS,QAASN,GAAW,CAC3B,MAAMO,EAAOP,EAAO,aAAa,MAAM,EACnCH,EAAW,KAAMW,GAAcD,EAAK,SAASC,CAAS,CAAC,GACzDR,EAAO,iBAAiB,QAAS,IAAM,CAAEG,EAAcH,CAAM,EAAI,CAEzE,CAAK,EACQD,IAAgB,aACzBI,EAAe,CAEnB,CAEO,SAASM,GAAaC,EAAOC,EAAW,GAAI,CACjD,MAAMC,EAAiB,qBAEvB,GAAI,CAAC,MAAM,QAAQD,CAAQ,EAEzB,eAAQ,MAAM,iDAAiD,OAAOA,CAAQ,EAAE,EACzED,EAGT,MAAM1H,EAAM4H,EAAe,KAAKF,CAAK,EAAI,IAAI,IAAIA,EAAO,OAAO,SAAS,MAAM,EAAI,IAAI,IAAIA,CAAK,EAG/F,UAAWG,KAASF,EAAU,CAC5B,GAAI,CAACE,EAEH,SAEF,KAAM,CAAChI,EAAKiI,CAAK,EAAID,EAAM,MAAM,GAAG,EAEhCC,IAAU,GACZ9H,EAAI,aAAa,OAAOH,CAAG,EAE3BG,EAAI,aAAa,IAAIH,EAAKiI,GAAS,EAAE,CAE3C,CAEE,OAAO9H,EAAI,IACb,CAEO,SAAS+H,IAAY,CAC1B,OAAO,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,OAAQC,GAASA,CAAI,EAAE,CAAC,CACrE,CAEO,SAASC,GAAOC,EAAU,CAC/B,MAAM9G,EAAU,SAAS,iBAAiB,SAAS8G,CAAQ,YAAY,EAAE,CAAC,EAC1E,MAAO,CAAC,EAAE9G,GAAW,iBAAiBA,CAAO,EAAE,UAAY,OAC7D,CAEO,SAAS+G,GAAaC,EAAUC,EAAYC,EAAYC,EAAQC,EAAiB,KAAM,CAE5F,IAAIC,EACJ,OAAQC,EAAU,GAAE,CAClB,IAAK,UACHD,EAAUL,EACV,MACF,IAAK,UACHK,EAAUJ,EACV,MACF,IAAK,QACL,IAAK,UACHI,EAAUH,EACV,MACF,IAAK,MACHG,EAAUF,EACV,MACF,QACEE,EAAU,IAChB,CAEMA,IACED,EACFA,EAAe,KAAOC,EAEtB,OAAO,KAAKA,EAAS,OAAO,EAGlC,CAEO,SAASE,IAAiB,CAC/B,KAAM,CAAE,UAAAC,CAAS,EAAK,UAEtB,OAAIA,EAAU,SAAS,SAAS,EACvB,UACHA,EAAU,SAAS,KAAK,EACrB,OACHA,EAAU,SAAS,QAAQ,GAAK,CAACA,EAAU,SAAS,KAAK,EACtD,SACHA,EAAU,SAAS,QAAQ,GAAK,CAACA,EAAU,SAAS,QAAQ,EACzD,SAEF,SACT,CAMY,MAACC,GAAkB,IAAMtJ,EAAK,cAAc,KAAK,GACxDA,EAAK,cAAc,aAAa,GAChCA,EAAK,cAAc,UAAU,GAC7B,KAMQuJ,GAA2B,IAClC5J,EAAkB,KAAM6J,GAAWxJ,EAAK,SAAWwJ,CAAM,EACpD,YAGJzJ,EAAU,cAAc,SAASC,EAAK,MAAM,EAI1CD,EAAU,qBAAqB,UAAYA,EAAU,aAHnDA,EAAU,aAMd,SAAS0J,GAA0B5H,EAAS6H,EAAI,CAEjD7H,IAASA,EAAQ,GAAK6H,EAC5B,CAEO,SAASC,GAA+B9H,EAAS6H,EAAI,CACtD7H,GAASA,EAAQ,aAAa,cAAe6H,CAAE,CACrD,CAEY,MAACE,GAAuB,IAAMlJ,EAAYX,EAAU,8BAA8B,EAMjF8J,GAA0B,IAEV,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC9C,IAAI9J,EAAU,sBAAsB,GAAG,IACxDA,EAAU,sBAAsB,MAW3B+J,GAAuB,IAAM,CACxC,GAAI,CAAC,OAAO,KAAO,CAAC,OAAO,IAAI,WAC7B,OAAO,KAGT,KAAM,CAAE,GAAIC,EAAc,gBAAiBC,GAAsB,OAAO,IAAI,WAC5E,MAAO,CAAE,aAAAD,EAAc,kBAAAC,CAAmB,CAC5C,EAMaC,GAA8B,IAAM,CAM/C,MAAMC,EAAWC,GAAUA,EAAOA,EAAK,MAAM,GAAG,EAAE,OAAQjK,GAAQ,CAAC,CAACA,CAAG,EAAE,IAAKA,GAAQA,EAAI,MAAM,EAAI,GAC9F,CAAE,SAAAa,GAAa,OAAO,SAGtBoJ,EAAOD,EAAQxJ,EADW,gBACwB,CAAC,EACnD,CAAE,OAAAQ,CAAM,EAAKlB,EAGboK,EAAwB1J,EAAY,QAAQ,GAAKV,EAAK,OAE5D,IAAIqK,EACJ,GAAIF,EAAK,OACPE,EAAU,CAACD,EAAuB,GAAGD,CAAI,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,MAC9D,CACL,MAAMG,EAAcvJ,EAAS,MAAM,GAAG,EAAE,OAAQ+B,GAAYA,IAAY,EAAE,EACpEyH,EAAcD,EAAYA,EAAY,OAAS,CAAC,EAChDE,EAAmBF,EAAYA,EAAY,OAAS,CAAC,EAAE,QAAQ,IAAK,GAAG,EAC7ED,EAAU,GAAGnJ,CAAM,YAAYsJ,CAAgB,GAC3CD,IAAgB,aAClBF,EAAU,GAAGnJ,CAAM,uBAGjB,OAAO,YAAc,QACvBmJ,EAAU,GAAGnJ,CAAM,OAEzB,CAEE,OAAOmJ,CACT,EAMaI,GAAoB,IAAM,CACrC,MAAMC,EAAW1K,EAAK,KAAK,YAAa,EACxC,IAAI2K,EACJ,OAAQD,EAAQ,CACd,IAAK,WACHC,EAAiB,iBACjB,MACF,IAAK,YACHA,EAAiB,iBACjB,MACF,IAAK,eACHA,EAAiB,eACjB,MACF,IAAK,YACHA,EAAiB,iBACjB,MACF,QACEA,EAAiB,gBACjB,KACN,CAEE,OAAOA,CACT,EAEO,SAASC,IAAuB,CACrC,MAAMC,EAAUnK,EAAY,mBAAmB,EAC5C,MAAM,GAAG,EACT,IAAKoK,GAASA,EAAK,MAAM,GAAG,CAAC,EAC7B,SAAS,CAAC,CAACxK,CAAG,IAAMA,IAAQN,EAAK,MAAM,IAAI,CAAC,GAAK,KAE9C+K,EAAarK,EAAY,aAAa,EAE5C,GAAI,CAACmK,GAAW,CAACE,EACf,OAGF,MAAMC,EAAS,CACb,WAAY,qBACZ,QAAS,UACT,KAAMD,EACN,IAAK,GAAG,OAAO,SAAS,MAAM,GAAG,OAAO,SAAS,QAAQ,GACzD,WAAY/K,EAAK,OACjB,WAAY,CACV,QAAS,UACT,KAAM6K,CACP,EACD,SAAU,CACR,QAAS,UACT,KAAM,cACN,IAAK,GAAG,OAAO,SAAS,MAAM,IAAI7K,EAAK,MAAM,GAC9C,CACF,EAEKiL,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,sBACdA,EAAO,YAAc,KAAK,UAAUD,EAAQ,KAAM,CAAC,EACnD,SAAS,KAAK,YAAYC,CAAM,CAClC"}