import"../../vendor/repobit/dex-utils/dist/src/index.js";import{AdobeDataLayerService as T}from"../../vendor/repobit/dex-data-layer/dist/src/adobe-data-layer-service/index.js";import{ButtonClickEvent as D}from"../../vendor/repobit/dex-data-layer/dist/src/events/button-click-event/index.js";import u from"../page.js";import{Constants as y}from"../libs/constants.js";import O from"../../vendor/repobit/dex-utils/dist/src/user-agent/index.js";import{debounce as I}from"../../vendor/repobit/dex-utils/dist/src/utils.js";const g=[],A=[],P=["en-bz","en-lv"],K=new Map([[3,{locale:"en-GB",label:"united kingdom"}],[4,{locale:"au-AU",label:"australia"}],[5,{locale:"de-DE",label:"germany"}],[6,{locale:"ro-RO",label:"romania"}],[7,{locale:"es-ES",label:"spain"}],[8,{locale:"en-US",label:"com"}],[9,{locale:"it-IT",label:"italy"}],[10,{locale:"en-CA",label:"canada"}],[12,{locale:"pt-PT",label:"portugal"}],[13,{locale:"br-BR",label:"brazil"}],[14,{locale:"fr-FR",label:"france"}],[15,{locale:"en-GB",label:"united kingdom"}],[16,{locale:"en-US",label:"rest of the world EU countries"}],[17,{locale:"de-CH",label:"germany-switzerland"}],[19,{locale:"en-ZA",label:"en south africa"}],[22,{locale:"nl-NL",label:"netherlands"}],[24,{locale:"en-VN",label:"en vietnam"}],[20,{locale:"en-MX",label:"en es mexico"}],[21,{locale:"en-CO",label:"en es columbia"}],[25,{locale:"en-SG",label:"en singapore"}],[26,{locale:"en-SE",label:"en sweden"}],[27,{locale:"en-DK",label:"en denmark"}],[28,{locale:"en-HU",label:"en hungary"}],[29,{locale:"en-BG",label:"en bulgaria"}],[30,{locale:"en-HR",label:"en croatia"}],[31,{locale:"en-NO",label:"en norway"}],[32,{locale:"en-MD",label:"en moldova"}],[33,{locale:"en-RS",label:"en serbia"}],[34,{locale:"en-RU",label:"en russia"}],[35,{locale:"en-EG",label:"en egypt"}],[36,{locale:"en-SA",label:"en saudi arabia"}],[37,{locale:"fr-DZ",label:"en Algeria"}],[38,{locale:"en-AE",label:"en united arab emirates"}],[39,{locale:"en-PS",label:"en palestinia"}],[40,{locale:"en-CN",label:"en china"}],[41,{locale:"en-HK",label:"en hong kong"}],[42,{locale:"en-CK",label:"Cook Islands"}],[43,{locale:"en-KE",label:"en kenya"}],[44,{locale:"en-NG",label:"en nigeria"}],[45,{locale:"fr-TN",label:"en Tunisia"}],[46,{locale:"en-PL",label:"en poland"}],[47,{locale:"en-CZ",label:"en Czech"}],[48,{locale:"es-VE",label:"en Venezuela"}],[49,{locale:"en-TR",label:"en turkey"}],[50,{locale:"en-ID",label:"en Indonesia"}],[51,{locale:"en-PH",label:"en Philippines"}],[52,{locale:"en-TW",label:"en taiwan"}],[53,{locale:"en-UA",label:"en Ukraine"}],[54,{locale:"es-CL",label:"en Chile"}],[55,{locale:"en-MY",label:"en Malaysia"}],[56,{locale:"es-AR",label:"en Argentina"}],[57,{locale:"es-PE",label:"en Peru"}],[59,{locale:"hr-HR",label:"Croatia"}],[60,{locale:"ma-MA",label:"Morocco"}],[61,{locale:"pk-PK",label:"Pakistan"}],[62,{locale:"bo-BO",label:"Bolivia"}],[63,{locale:"do-DO",label:"Dominican Republic"}],[64,{locale:"kw-KW",label:"Kuwait"}],[65,{locale:"jo-JO",label:"Jordan"}],[66,{locale:"th-TH",label:"Thailand"}],[67,{locale:"en-BD",label:"en Bangladesh"}],[68,{locale:"en-LK",label:"en Sri Lanka"}],[69,{locale:"en-PY",label:"en Paraguay"}],[70,{locale:"en-UY",label:"en Uruguay"}],[72,{locale:"en-JP",label:"en Japan"}]]),S=new Map([["en-us",{force_country:"en",country_code:"us"}],["en-bg",{force_country:"bg",country_code:"bg"}],["en-ca",{force_country:"ca",country_code:"ca"}],["en-cl",{force_country:"cl",country_code:"cl"}],["en-dk",{force_country:"dk",country_code:"dk"}],["en-hu",{force_country:"hu",country_code:"hu"}],["en-id",{force_country:"id",country_code:"id"}],["en-il",{force_country:"il",country_code:"il"}],["en-in",{force_country:"in",country_code:"in"}],["en-kr",{force_country:"kr",country_code:"kr"}],["en-my",{force_country:"my",country_code:"my"}],["en-no",{force_country:"no",country_code:"no"}],["en-ph",{force_country:"ph",country_code:"ph"}],["en-pl",{force_country:"pl",country_code:"pl"}],["en-sa",{force_country:"sa",country_code:"sa"}],["en-th",{force_country:"th",country_code:"th"}],["en-za",{force_country:"za",country_code:"za"}],["en-ae",{force_country:"ae",country_code:"ae"}],["en-sg",{force_country:"sg",country_code:"sg"}],["en-sd",{force_country:"sd",country_code:"sd"}],["en-mt",{force_country:"mt",country_code:"mt"}],["en-lv",{force_country:"lv",country_code:"lv"}],["en-jm",{force_country:"jm",country_code:"jm"}],["en-bz",{force_country:"bz",country_code:"bz"}],["en-gb",{force_country:"uk",country_code:"gb"}],["en-au",{force_country:"au",country_code:"au"}],["en-nz",{force_country:"nz",country_code:"nz"}],["en-cz",{force_country:"cz",country_code:"cz"}],["en-global",{force_country:"en",country_code:null}],["es-cl",{force_country:"cl",country_code:"cl"}],["es-co",{force_country:"co",country_code:"co"}],["es-mx",{force_country:"mx",country_code:"mx"}],["es-pe",{force_country:"pe",country_code:"pe"}],["es-bz",{force_country:"bz",country_code:"bz"}],["es-es",{force_country:"es",country_code:"es"}],["es-global",{force_country:"en",country_code:null}],["ro-ro",{force_country:"ro",country_code:"ro"}],["it-it",{force_country:"it",country_code:"it"}],["fr-fr",{force_country:"fr",country_code:"fr"}],["fr-be",{force_country:null,country_code:null,isZuora:!0}],["nl-be",{force_country:null,country_code:null,isZuora:!0}],["nl-nl",{force_country:null,country_code:null,isZuora:!0}],["de-de",{force_country:"de",country_code:"de"}],["de-at",{force_country:"de",country_code:"at"}],["de-ch",{force_country:"ch",country_code:"ch"}],["sv-se",{force_country:"se",country_code:"se"}],["pt-br",{force_country:"br",country_code:"br"}],["pt-pt",{force_country:"pt",country_code:"pt"}],["zh-hk",{force_country:"en",country_code:"hk"}],["zh-tw",{force_country:"en",country_code:"tw"}]]);function F(){return y.NONE_PRODUCT_PAGES.includes(u.name)}function q(e,n,o){const t=document.createElement(e);return o&&(o instanceof HTMLElement||o instanceof SVGElement||o instanceof DocumentFragment?t.append(o):Array.isArray(o)?t.append(...o):t.insertAdjacentHTML("beforeend",o)),n&&Object.entries(n).forEach(([a,r])=>{t.setAttribute(a,r)}),t}function j(){const e=new URL(window.location.href);return e.pathname.includes("/nl-nl/")||e.pathname.includes("/nl-be/")}function f(e){const n=e&&e.includes(":")?"property":"name";return[...document.head.querySelectorAll(`meta[${n}="${e}"]`)].map(t=>t.content).join(", ")||""}function Z(){const{pathname:e}=window.location;return e.includes("/en-au/")?"https://www.bitdefender.com.au/site/Store/ajax":e.includes("/en-gb/")?"https://www.bitdefender.com.uk/site/Store/ajax":e.includes("/ro-ro/")?"https://www.bitdefender.ro/site/Store/ajax":e.includes("/it-it/")?"https://www.bitdefender.it/site/Store/ajax":e.includes("/fr-fr/")?"https://www.bitdefender.fr/site/Store/ajax":e.includes("/fr-be/")||e.includes("/nl-be/")?"https://www.bitdefender.be/site/Store/ajax":e.includes("/nl-nl/")?"https://www.bitdefender.nl/site/Store/ajax":e.includes("/de-de/")||e.includes("/de-ch/")?"https://www.bitdefender.de/site/Store/ajax":e.includes("/sv-se/")?"https://www.bitdefender.se/site/Store/ajax":e.includes("/pt-br/")?"https://www.bitdefender.com.br/site/Store/ajax":e.includes("/pt-pt/")?"https://www.bitdefender.pt/site/Store/ajax":e.includes("/es-es/")?"https://www.bitdefender.es/site/Store/ajax":"https://www.bitdefender.com/site/Store/ajax"}function R(){return"https://www.bitdefender.com/site/Store/buy"}function N(){const e=window.location.pathname.split("/")[1];return S.get(e)||S.get("en-us")}function J(e,n,o=null,t=null,a=null){if(j())return e.buy_link;const r=e.variation?.dimension_value||o,l=e.variation?.years||t,i=new URL(window.location.href);let c="";a?c=`pid.${a}`:i.searchParams.get("pid")?c=`pid.${i.searchParams.get("pid")}`:f("pid")&&(c=`pid.${f("pid")}`),P.includes(u.locale)&&(c="pid.global_v2");const s=N().force_country;return`${R()}/${n}/${r}/${l}/${c}?force_country=${s}`}function Y(e,n){const{productId:o,variation:t}=n;o&&(e.dataset.product=o.trim()),t.price&&(e.dataset.buyPrice=t.price.trim()),t.oldPrice&&(e.dataset.oldPrice=t.oldPrice.trim()),t.currency_label&&(e.dataset.currency=t.currency_label.trim()),t.region_id&&(e.dataset.region=t.region_id.trim()),t.variation_name&&(e.dataset.variation=t.variation_name.trim())}function X(e,n){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:n}).format(e):null}const x=new Map;function L(e){let n=[];for(let o=e.firstChild;o;o=o.nextSibling)o.nodeType===Node.TEXT_NODE?n.push(o):n=n.concat(L(o));return n}function Q(e,n){x.set(e.toLowerCase(),n)}function E(e){const n=e.split(",").map(r=>r.trim()),o=[];let t=[],a=!1;return n.forEach(r=>{a?r.endsWith("]")?(t.push(r.slice(0,-1).trim()),o.push(t),t=[],a=!1):t.push(r.trim()):r.startsWith("[")?r.endsWith("]")?o.push(r.slice(1,-1).trim()):(t.push(r.slice(1).trim()),a=!0):o.push(r)}),o}function $(e){const n=e.split("");for(let o=n.length-1;o>0;o-=1)n[o]===","&&n[o-1]===","&&n.splice(o,1);return n.join("")}function M(e){return e.closest(".section").dataset}async function ee(e=document.body,n=void 0,o=void 0,t=void 0){const a=/{([^}]+)}/g;L(e).forEach(r=>{const i=r.textContent.trim().match(a);i&&i.forEach(c=>{const[s]=E(c.slice(1,-1)),m=M(e),p=(o!==void 0?m[`${s.toLowerCase()}${o+1}`]:m[s.toLowerCase()])||"",k=$(p),C=[c,k.split(",")].join(",").replace(/[{}]/g,""),[v,...b]=E(C),w=x.get(v.toLowerCase());if(w){const h=n?w(n,...b,t,o,e):w(...b,t,o,e);h.classList.add("nanoblock");const _=r.parentNode;_.parentNode.replaceChild(h,_)}})})}function ne(e){e.forEach(n=>{Object.keys(n).forEach(o=>{n[o]=n[o]==="0"?"":n[o]})})}async function te(e,n,o=500){const t=e.concat(n||""),a=async l=>{const i=n?`&sheet=${n}`:"",s=await(await fetch(`/${window.location.pathname.split("/")[1]}/${e}.json?limit=${o}&offset=${l}${i}`)).json();return{complete:s.limit+s.offset===s.total,offset:s.offset+o,promise:null,data:[...window.index[t].data,...s.data]}};if(window.index=window.index||{},window.index[t]=window.index[t]||{data:[],offset:0,complete:!1,promise:null},window.index[t].complete)return window.index[t];if(window.index[t].promise)return window.index[t].promise;window.index[t].promise=a(window.index[t].offset);const r=await window.index[t].promise;return window.index[t]=r,r}const oe={ADOBE_MC_LOADED:"adobe_mc::loaded",PAGE_LOADED:"page::loaded"},d={};async function re(e){let n=document.getElementById("franklin-svg-sprite");if(!n){const a=document.createElement("div");a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" id="franklin-svg-sprite" style="display: none"></svg>',n=a.firstElementChild,document.body.append(a.firstElementChild)}const o=[...e.querySelectorAll("span.icon")];await Promise.all(o.map(async a=>{const r=Array.from(a.classList).find(l=>l.startsWith("icon-")).substring(5);if(!d[r]){d[r]=!0;try{let l="/common/icons/";(window.location.hostname.includes("www-landing-pages")||window.location.hostname.includes("bitdefender.com/pages"))&&(l="/icons/");const i=await fetch(`${l}${r}.svg`);if(!i.ok){d[r]=!1;return}const c=await i.text();c.match(/(<style | class=)/)?d[r]={styled:!0,html:c}:d[r]={html:c.replace("<svg",`<symbol id="icons-sprite-${r}"`).replace(/ width=".*?"/,"").replace(/ height=".*?"/,"").replace("</svg>","</symbol>")}}catch(l){d[r]=!1,console.error(l)}}}));const t=Object.keys(d).filter(a=>!n.querySelector(`#icons-sprite-${a}`)).map(a=>d[a]).filter(a=>!a.styled).map(a=>a.html).join(`
`);n.innerHTML+=t,o.forEach(a=>{const r=Array.from(a.classList).find(i=>i.startsWith("icon-")).substring(5),l=a.firstElementChild?.tagName==="A"?a.firstElementChild:a;d[r].styled?l.innerHTML=d[r].html:l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg"><use href="#icons-sprite-${r}"/></svg>`})}async function ae(e,n){const o=()=>{e.querySelectorAll(n).forEach(s=>{s.style.minHeight=""})},t=()=>{if(window.innerWidth>=768){o();const c=e.querySelectorAll(n),s=Array.from(c).map(p=>p.offsetHeight),m=Math.max(...s);c.forEach(p=>{p.style.minHeight=`${m}px`})}else o()},a=c=>{Array.from(c).forEach(s=>{s.type==="childList"&&t()})},r=new MutationObserver(a),l=new ResizeObserver(I(c=>{c.forEach(s=>{t()})}),100);e&&r.observe(e,{childList:!0,subtree:!0}),window.addEventListener("resize",()=>{t()}),e.querySelectorAll(n).forEach(c=>{l.observe(c)}),t()}function ce(){return new URL(window.location.href).searchParams.get("pid")||f("pid")}function le(e,n=""){!e&&e.length===0||(n&&n==="comparison"?A.find(t=>t.platformProductId===e.platformProductId&&t.variantId===e.variantId)||A.push(e):g.find(t=>t.platformProductId===e.platformProductId&&t.variantId===e.variantId)||g.push(e))}function ie(){const e=["fragments/thank-you-for-downloading","fragments/get-bitdefender","fragments/trial"],n=(l,i)=>{if(["thank-you","free-antivirus"].includes(l))return"8430";if(i?.dataset?.storeId)return i.dataset.storeId;const c=i?.closest(".section")?.querySelector("[data-store-id]");return c?c.dataset.storeId:f("breadcrumb-title")||f("og:title")},o=u.name,t=o==="thank-you"?"product":"trial",a=(l=null)=>{T.push(new D(`${t} downloaded`,n(o,l)))},r=document.querySelectorAll("a.button.modal");r.length?r.forEach(l=>{const i=l.getAttribute("href");e.some(c=>i.includes(c))&&l.addEventListener("click",()=>{a(l)})}):o==="thank-you"&&a()}function se(e,n=[]){const o=/^(?!\/\/|[a-z]+:)/i;if(!Array.isArray(n))return console.error(`paramsIn must be an Array but you provided an ${typeof n}`),e;const t=o.test(e)?new URL(e,window.location.origin):new URL(e);for(const a of n){if(!a)continue;const[r,l]=a.split("=");l===""?t.searchParams.delete(r):t.searchParams.set(r,l||"")}return t.href}function ue(){return window.location.pathname.split("/").filter(e=>e)[0]}function de(e){const n=document.querySelectorAll(`[data-${e}-detector]`)[0];return!!(n&&getComputedStyle(n).display!=="none")}function fe(e,n,o,t,a=null){let r;switch(O.os){case"Mac/iOS":r=e;break;case"Windows":r=n;break;case"Linux":case"android":r=o;break;case"ios":r=t;break;default:r=null}r&&(a?a.href=r:window.open(r,"_self"))}function ye(){const{userAgent:e}=navigator;return e.includes("Firefox")?"Firefox":e.includes("Edg")?"Edge":e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Safari")&&!e.includes("Chrome")?"Safari":"Unknown"}const me=()=>u.getParamValue("pid")||u.getParamValue("promotionId")||u.getParamValue("campaign")||null,pe=()=>P.find(e=>u.locale===e)?"global_v2":y.ZUROA_LOCALES.includes(u.locale)?y.PRODUCT_ID_MAPPINGS?.campaign||y.NO_PROMOTION:y.NO_PROMOTION;function we(e,n){e&&(e.id=n)}function be(e,n){e&&e.setAttribute("s-object-id",n)}const he=()=>f(y.TARGET_EXPERIMENT_METADATA_KEY),_e=()=>new URLSearchParams(window.location.search).get(y.DISABLE_TARGET_PARAMS.key)===y.DISABLE_TARGET_PARAMS.value,ge=()=>{if(!window.hlx||!window.hlx.experiment)return null;const{id:e,selectedVariant:n}=window.hlx.experiment;return{experimentId:e,experimentVariant:n}},Ae=()=>{const e=i=>i?i.split(":").filter(c=>!!c).map(c=>c.trim()):[],{pathname:n}=window.location,t=e(f("analytics-tags")),{locale:a}=u,r=f("locale")||u.locale;let l;if(t.length)l=[r,...t].filter(Boolean).join(":");else{const i=n.split("/").filter(m=>m!==""),c=i[i.length-1],s=i[i.length-1].replace("-"," ");l=`${a}:product:${s}`,c==="consumer"&&(l=`${a}:consumer:solutions`),window.errorCode==="404"&&(l=`${a}:404`)}return l},Se=()=>{const e=u.name.toLowerCase();let n;switch(e){case"consumer":n="solutions page";break;case"thank-you":n="thank you page";break;case"toolbox page":n="toolbox page";break;case"downloads":n="downloads page";break;default:n="product pages";break}return n};function Ee(){const e=f("jsonld-areaserved").split(";").map(a=>a.split(":")).findLast(([a])=>a===u.locale)?.[1]||null,n=f("jsonld-name");if(!e||!n)return;const o={"@context":"https://schema.org","@type":"WebPage",name:n,url:`${window.location.origin}${window.location.pathname}`,inLanguage:u.locale,areaServed:{"@type":"Country",name:e},isPartOf:{"@type":"WebSite",name:"Bitdefender",url:`${window.location.origin}/${u.locale}/`}},t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(o,null,2),document.head.appendChild(t)}export{oe as GLOBAL_EVENTS,P as GLOBAL_V2_LOCALES,K as IANA_BY_REGION_MAP,F as checkIfNotProductPage,Q as createNanoBlock,q as createTag,we as decorateBlockWithRegionId,re as decorateIcons,be as decorateLinkWithLinkTrackingId,te as fetchIndex,ne as fixExcelFilterZeroes,X as formatPrice,Ee as generateLDJsonSchema,Ae as generatePageLoadStartedName,J as generateProductBuyLink,ye as getBrowserName,R as getBuyLinkCountryPrefix,pe as getCampaignBasedOnLocale,M as getDatasetFromSection,ue as getDomain,ge as getExperimentDetails,f as getMetadata,he as getPageExperimentKey,ce as getPidFromUrl,N as getPriceLocalMapByLocale,Se as getProductFinding,Z as getProductLinkCountryPrefix,me as getUrlPromotion,de as isView,ae as matchHeights,fe as openUrlForOs,ie as pushTrialDownloadToDataLayer,ee as renderNanoBlocks,Y as setDataOnBuyLinks,se as setUrlParams,_e as shouldABTestsBeDisabled,le as trackProduct};
//# sourceMappingURL=utils.js.map
