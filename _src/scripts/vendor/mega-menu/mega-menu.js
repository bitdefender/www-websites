import"../../../packages/repobit/dex-utils/dist/src/index.js";import{throttle as B}from"../../../packages/repobit/dex-utils/dist/src/utils.js";const T=window.matchMedia("(hover: hover) and (pointer: fine)").matches,e={selectors:{viewAllButtons:".navigation__view-all",popupContainer:".mega-menu__popup-container",popupLink:".mega-menu__popup-container .mega-menu__right-link",menuLink:".mega-menu__l2-link",menuItem:".mega-menu__l2-item",mobileBack:".mega-menu__back-button",mobileBackL2:".mega-menu__back-button-l2",mobileTrigger:".mega-menu__button",l2active:".mega-menu__l2-item.active",viewAll:".navigation--view-all",navLinks:".navigation__links",menuItemFirst:".mega-menu__item",navHeaderLink:".navigation__header-link",navContainer:".navigation__container",itemOpened:".mega-menu--item-opened",quickLinks:".navigation__quick-links .navigation__list",qucikLinksMobileContainer:".mega-menu__quick-links-mobile",thirdLevelContent:".mega-menu__third-level-content",categoryLinks:".mega-menu__category-links",menuLinkRoot:".mega-menu__link",firstLevel:".mega-menu__first-level",navigationItems:".navigation__list .navigation__item",menuList:".mega-menu__list"},classes:{popupActive:"popup-active",menuOpened:"mega-menu--active",viewAll:"navigation--view-all",itemOpened:"mega-menu--item-opened",menuItemFirst:"mega-menu__item",menuLinkText:"mega-menu__l2-link-text",firstLevelItemText:"mega-menu__link-text"}},k=()=>window.innerWidth<1200;function O(n){let _=window.innerWidth;const E=()=>{const s=n.querySelector(e.selectors.firstLevel).getBoundingClientRect().height+1;n.style.setProperty("--right-links-offset",`${s}px`)},h=()=>{const t=n.querySelectorAll(e.selectors.viewAll);Array.from(t).forEach(s=>{s.classList.remove(e.classes.viewAll)})},p=()=>{const t=n.querySelector(e.selectors.l2active);if(t)return t.classList.remove("active"),t},L=t=>{n.querySelectorAll(e.selectors.popupContainer).forEach(s=>{s!==t&&s.classList.remove("popup-active")})},b=()=>{n.classList.contains(e.classes.menuOpened)?window.removeEventListener("resize",this.windowResizeEvent):window.addEventListener("resize",this.windowResizeEvent=B(()=>{const t=window.innerWidth;t!==_&&(n.classList.remove(e.classes.menuOpened),p(),h(),window.removeEventListener("resize",this.windowResizeEvent),_=t)})),n.classList.toggle(e.classes.menuOpened),p(),h()},q=t=>{Array.from(t).forEach(s=>{s.addEventListener("click",u=>{u.target.closest(e.selectors.navLinks).classList.add(e.classes.viewAll)})})},S=()=>{const t=n.querySelectorAll(e.selectors.thirdLevelContent);Array.from(t).forEach(s=>{const u=s.querySelector(e.selectors.qucikLinksMobileContainer),a=s.querySelector(e.selectors.quickLinks),l=s.querySelector(e.selectors.categoryLinks);a&&u.appendChild(a.cloneNode(!0)),l&&u.appendChild(l.cloneNode(!0))})},y=t=>{const s=t.closest(e.selectors.menuItem);return s||t},A=t=>{t.classList.remove("active"),this.isClosed=!0},C=t=>{t.classList.add("active"),this.isClosed=!1};this.isClosed=!0;const I=()=>{n.querySelector(e.selectors.mobileTrigger).addEventListener("click",()=>{b()});const s=n.querySelectorAll(e.selectors.menuLink);Array.from(s).forEach(c=>{c.addEventListener("click",i=>{if(T&&window.innerWidth>1199)return;i.stopPropagation();const r=i.target;if(!r.classList.contains(e.classes.menuLinkText)){i.preventDefault();const o=y(r);L(),this.isClosed||p()!==o?C(o):A(o)}})});const u=n.querySelectorAll(e.selectors.mobileBackL2);u&&Array.from(u).forEach(c=>{c.addEventListener("click",i=>{const r=y(i.target);A(r)})});const a=n.querySelectorAll(e.selectors.mobileBack);Array.from(a).forEach(c=>{c.addEventListener("click",i=>{i.target.closest(e.selectors.menuItemFirst).classList.remove(e.classes.itemOpened),i.stopPropagation(),!n.style.getPropertyValue("--right-links-offset")&&E()})});const l=n.querySelector(e.selectors.itemOpened);if(l)l.addEventListener("click",c=>{const i=c.target,r=l.querySelector(e.selectors.menuLinkRoot);k()&&(r===i||r.contains(i))&&(c.preventDefault(),L()),l.closest(e.selectors.menuItemFirst).classList.add(e.classes.itemOpened)});else{const c=n.querySelectorAll(e.selectors.menuItemFirst);Array.from(c).forEach(i=>{i.addEventListener("click",r=>{const o=r.target;let g=null;if(o.classList.contains(e.classes.firstLevelItemText))return;o.classList.contains(e.classes.menuItemFirst)?g=o:g=o.closest(e.selectors.menuItemFirst);const w=g.querySelector(e.selectors.menuLinkRoot);g.querySelector(e.selectors.menuList)&&k()&&(w===o||w.contains(o))&&(r.preventDefault(),g.classList.add(e.classes.itemOpened))})})}const m=n.querySelectorAll(e.selectors.navHeaderLink);Array.from(m).forEach(c=>{c.addEventListener("click",i=>{const r=i.target;!r.classList.contains(e.selectors.navHeaderText)&&k()&&(i.preventDefault(),r.closest(e.selectors.navContainer).classList.toggle("active"))})});const d=n.querySelectorAll(e.selectors.viewAllButtons);q(d);const v=n.querySelectorAll(e.selectors.popupLink);Array.from(v).forEach(c=>{c.addEventListener("click",i=>{i.stopPropagation();const o=i.target.closest(e.selectors.popupContainer);L(o),o.classList.toggle(e.classes.popupActive)})}),document.addEventListener("click",window.toggleGlobal=()=>{k()||(L(),p())})},M=()=>{const t=f.querySelectorAll(".navigation__links");Array.from(t).forEach(s=>{const u=s.getAttribute("id"),a=s.closest(".navigation"),l=s.closest(".mega-menu__third-level")?.getAttribute("id")||s.closest(".mega-menu__second-level-right").getAttribute("id");u&&l&&a&&(a.setAttribute("id",l),s.setAttribute("id",l+"|"+u))})};(()=>{document.querySelectorAll(e.selectors.popupContainer).forEach(s=>{s.querySelectorAll(e.selectors.navigationItems).forEach(function(a,l){const m=document.createElement("div");m.className="navigation__item";const d=a.querySelector(".navigation__link");d.className="navigation__anchor",m.appendChild(d);const v=document.createElement("li");v.className="navigation__link link-"+l,v.innerHTML=d.innerHTML,d.innerHTML="",m.appendChild(v),a.parentNode.replaceChild(m,a)})})})(),I(),M(),S()}const P=document.querySelector("body > div:first-child").shadowRoot,f=P.querySelector(".mega-menu__container");f&&new O(f);
//# sourceMappingURL=mega-menu.js.map
