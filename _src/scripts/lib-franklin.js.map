{"version":3,"file":"lib-franklin.js","sources":["../../src/scripts/lib-franklin.js"],"sourcesContent":["/* eslint-disable max-classes-per-file */\n/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport { UserAgent } from '@repobit/dex-utils';\nimport * as Sentry from '@sentry/browser';\nimport page from './page.js';\n\nconst STICKY_NAVIGATION_SECTION_METADATA_KEY = 'sticky-navigation-item';\nexport const ALL_FRANKLIN_DEV_SUBDOMAINS = ['localhost', '.aem.page', '.aem.live'];\nexport const STICKY_NAVIGATION_DATASET_KEY = 'stickyNavName';\n\n/**\n * log RUM if part of the sample.\n * @param {string} checkpoint identifies the checkpoint in funnel\n * @param {Object} data additional data for RUM sample\n * @param {string} data.source DOM node that is the source of a checkpoint event\n * identified by #id or .classname\n * @param {string} data.target subject of the checkpoint event,\n * for instance the href of a link, or a search term\n */\nexport function sampleRUM(checkpoint, data = {}) {\n  const SESSION_STORAGE_KEY = 'aem-rum';\n  sampleRUM.baseURL = sampleRUM.baseURL || new URL(window.RUM_BASE == null ? 'https://rum.aem.page' : window.RUM_BASE, window.location);\n  sampleRUM.defer = sampleRUM.defer || [];\n  const defer = (fnname) => {\n    sampleRUM[fnname] = sampleRUM[fnname]\n      || ((...args) => sampleRUM.defer.push({ fnname, args }));\n  };\n  sampleRUM.drain = sampleRUM.drain\n    || ((dfnname, fn) => {\n      sampleRUM[dfnname] = fn;\n      sampleRUM.defer\n        .filter(({ fnname }) => dfnname === fnname)\n        .forEach(({ fnname, args }) => sampleRUM[fnname](...args));\n    });\n  sampleRUM.always = sampleRUM.always || [];\n  sampleRUM.always.on = (chkpnt, fn) => { sampleRUM.always[chkpnt] = fn; };\n  sampleRUM.on = (chkpnt, fn) => { sampleRUM.cases[chkpnt] = fn; };\n  defer('observe');\n  defer('cwv');\n  try {\n    window.hlx = window.hlx || {};\n    if (!window.hlx.rum) {\n      const usp = new URLSearchParams(window.location.search);\n      const weight = (usp.get('rum') === 'on') ? 1 : 100; // with parameter, weight is 1. Defaults to 100.\n      // eslint-disable-next-line no-bitwise\n      const id = Array.from({ length: 75 }, (_, i) => String.fromCharCode(48 + i)).filter((a) => /\\d|[A-Z]/i.test(a)).filter(() => Math.random() * 75 > 70).join('');\n      const random = Math.random();\n      const isSelected = (random * weight < 1);\n      const firstReadTime = window.performance ? window.performance.timeOrigin : Date.now();\n      const urlSanitizers = {\n        full: () => window.location.href,\n        origin: () => window.location.origin,\n        path: () => window.location.href.replace(/\\?.*$/, ''),\n      };\n      // eslint-disable-next-line max-len\n      const rumSessionStorage = sessionStorage.getItem(SESSION_STORAGE_KEY) ? JSON.parse(sessionStorage.getItem(SESSION_STORAGE_KEY)) : {};\n      // eslint-disable-next-line object-curly-newline, max-len\n      rumSessionStorage.pages = (rumSessionStorage.pages ? rumSessionStorage.pages : 0) + 1 + /* noise */ (Math.floor(Math.random() * 20) - 10);\n      sessionStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(rumSessionStorage));\n      window.hlx.rum = {\n        weight, id, random, isSelected, firstReadTime, sampleRUM, sanitizeURL: urlSanitizers[window.hlx.RUM_MASK_URL || 'path'], rumSessionStorage,\n      };\n    }\n    const { weight, id, firstReadTime } = window.hlx.rum;\n    if (window.hlx && window.hlx.rum && window.hlx.rum.isSelected) {\n      const knownProperties = ['weight', 'id', 'referer', 'checkpoint', 't', 'source', 'target', 'cwv', 'CLS', 'FID', 'LCP', 'INP', 'TTFB'];\n      const sendPing = (pdata = data) => {\n        // eslint-disable-next-line max-len\n        const t = Math.round(window.performance ? window.performance.now() : (Date.now() - firstReadTime));\n        // eslint-disable-next-line object-curly-newline, max-len, no-use-before-define\n        const body = JSON.stringify({ weight, id, referer: window.hlx.rum.sanitizeURL(), checkpoint, t, ...data }, knownProperties);\n        const url = new URL(`.rum/${weight}`, sampleRUM.baseURL).href;\n        // eslint-disable-next-line no-unused-expressions\n        navigator.sendBeacon(url, body);\n        // eslint-disable-next-line no-console\n        console.debug(`ping:${checkpoint}`, pdata);\n      };\n      sampleRUM.cases = sampleRUM.cases || {\n        cwv: () => sampleRUM.cwv(data) || true,\n        lazy: () => {\n          // use classic script to avoid CORS issues\n          const script = document.createElement('script');\n          script.src = 'https://rum.aem.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js';\n          document.head.appendChild(script);\n          return true;\n        },\n      };\n      sendPing(data);\n      if (sampleRUM.cases[checkpoint]) { sampleRUM.cases[checkpoint](); }\n    }\n    if (sampleRUM.always[checkpoint]) { sampleRUM.always[checkpoint](data); }\n  } catch (error) {\n    // something went wrong\n  }\n}\n\n/**\n * Loads a CSS file.\n * @param {string} href URL to the CSS file\n */\nexport async function loadCSS(href) {\n  return new Promise((resolve, reject) => {\n    if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = href;\n      link.onload = resolve;\n      link.onerror = reject;\n      document.head.append(link);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * Retrieves the content of metadata tags.\n * @param {string} name The metadata name (or property)\n * @returns {string} The metadata value(s)\n */\nexport function getMetadata(name) {\n  const attr = name && name.includes(':') ? 'property' : 'name';\n  const meta = [...document.head.querySelectorAll(`meta[${attr}=\"${name}\"]`)].map((m) => m.content).join(', ');\n  return meta || '';\n}\n\n/**\n * Sanitizes a string for use as class name.\n * @param {string} name The unsanitized string\n * @returns {string} The class name\n */\nexport function toClassName(name) {\n  return typeof name === 'string'\n    ? name.toLowerCase()\n      .replace(/[^\\w\\u4e00-\\u9fa5]/g, '-') // Include Chinese characters in the regular expression\n      .replace(/-+/g, '-') // Replace consecutive hyphens with a single hyphen\n      .replace(/^-|-$/g, '') // Remove leading and trailing hyphens\n    : '';\n}\n\n/**\n * Sanitizes a string for use as a js property name.\n * @param {string} name The unsanitized string\n * @returns {string} The camelCased name\n */\nexport function toCamelCase(name) {\n  return toClassName(name).replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n}\n\n/**\n * Gets all the metadata elements that are in the given scope.\n * @param {String} scope The scope/prefix for the metadata\n * @returns an array of HTMLElement nodes that match the given scope\n */\nexport function getAllMetadata(scope) {\n  return [...document.head.querySelectorAll(`meta[property^=\"${scope}:\"],meta[name^=\"${scope}-\"]`)]\n    .reduce((res, meta) => {\n      const id = toClassName(meta.name\n        ? meta.name.substring(scope.length + 1)\n        : meta.getAttribute('property').split(':')[1]);\n      res[id] = meta.getAttribute('content');\n      return res;\n    }, {});\n}\n\nconst ICONS_CACHE = {};\n/**\n * Replace icons with inline SVG and prefix with codeBasePath.\n * @param {Element} [element] Element containing icons\n */\nasync function internalDecorateIcons(element) {\n  // Download all new icons\n  const icons = [...element.querySelectorAll('span.icon')];\n  await Promise.all(icons.map(async (span) => {\n    const iconName = Array.from(span.classList).find((c) => c.startsWith('icon-')).substring(5);\n    if (!ICONS_CACHE[iconName]) {\n      ICONS_CACHE[iconName] = true;\n      try {\n        const dynamicIconsSharepointPath = '/common/icons/';\n        const response = await fetch(`${dynamicIconsSharepointPath}${iconName}.svg`);\n        if (!response.ok) {\n          ICONS_CACHE[iconName] = false;\n          return;\n        }\n\n        const svg = await response.text();\n        ICONS_CACHE[iconName] = { html: svg };\n      } catch (error) {\n        ICONS_CACHE[iconName] = false;\n        // eslint-disable-next-line no-console\n        console.error(error);\n      }\n    }\n  }));\n\n  icons.forEach((span) => {\n    const iconName = Array.from(span.classList).find((c) => c.startsWith('icon-')).substring(5);\n    const parent = span.firstElementChild?.tagName === 'A' ? span.firstElementChild : span;\n\n    // Set aria-label if the parent is an anchor tag\n    try {\n      const spanParent = span.parentElement;\n      if (spanParent?.tagName === 'A' && !spanParent?.hasAttribute('aria-label')) {\n        spanParent.setAttribute('aria-label', iconName);\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(`Error setting aria-label for icon ${iconName}:`, error);\n    }\n\n    parent.innerHTML = ICONS_CACHE[iconName].html;\n  });\n}\n\nlet previousDecoration = Promise.resolve();\n\n/**\n * Replace icons with inline SVG and prefix with codeBasePath.\n * @param {Element} [element] Element containing icons\n */\nexport async function decorateIcons(element) {\n  previousDecoration = previousDecoration.then(() => internalDecorateIcons(element));\n  await previousDecoration;\n}\n\nexport async function decorateTags(element) {\n  const tagTypes = [\n    { regex: /\\[#(.*?)#\\]/g, className: 'dark-blue' },\n    { regex: /\\[{(.*?)}\\]/g, className: 'light-blue' },\n    { regex: /\\[blue-round(.*?)blue-round\\]/g, className: 'light-blue-round' },\n    { regex: /\\[\\$(.*?)\\$\\]/g, className: 'green' },\n  ];\n\n  function replaceTags(inputValue) {\n    let nodeValue = inputValue; // Create a local copy to work on\n    let replaced = false;\n\n    tagTypes.forEach((tagType) => {\n      let match = tagType.regex.exec(nodeValue);\n      while (match !== null) {\n        nodeValue = nodeValue.replace(match[0], `<span class=\"tag tag-${tagType.className}\">${match[1]}</span>`);\n        replaced = true;\n        tagType.regex.lastIndex = 0; // Reset regex index\n        match = tagType.regex.exec(nodeValue);\n      }\n    });\n\n    return { nodeValue, replaced };\n  }\n\n  function replaceTagsInNode(node) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      const originalValue = node.nodeValue;\n      const { nodeValue } = replaceTags(originalValue);\n      if (nodeValue !== originalValue) { // This checks if the nodeValue has been modified.\n        const newNode = document.createElement('span');\n        newNode.innerHTML = nodeValue;\n        node.parentNode.replaceChild(newNode, node);\n      }\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      node.childNodes.forEach(replaceTagsInNode);\n    }\n  }\n\n  replaceTagsInNode(element);\n}\n\n/**\n * Decorates a block.\n * @param {Element} block The block element\n */\nexport function decorateBlock(block) {\n  const shortBlockName = block.classList[0];\n  if (shortBlockName) {\n    block.classList.add('block');\n    block.dataset.blockName = shortBlockName;\n    block.dataset.blockStatus = 'initialized';\n    const blockWrapper = block.parentElement;\n    blockWrapper.classList.add(`${shortBlockName}-wrapper`);\n    const section = block.closest('.section');\n    if (section) section.classList.add(`${shortBlockName}-container`);\n  }\n}\n\n/**\n * Extracts the config from a block.\n * @param {Element} block The block element\n * @returns {object} The block config\n */\nexport function readBlockConfig(block) {\n  const config = {};\n  block.querySelectorAll(':scope > div').forEach((row) => {\n    if (row.children) {\n      const cols = [...row.children];\n      if (cols[1]) {\n        const col = cols[1];\n        const name = toClassName(cols[0].textContent);\n        let value = '';\n        if (col.querySelector('a')) {\n          const as = [...col.querySelectorAll('a')];\n          if (as.length === 1) {\n            value = as[0].href;\n          } else {\n            value = as.map((a) => a.href);\n          }\n        } else if (col.querySelector('img')) {\n          const imgs = [...col.querySelectorAll('img')];\n          if (imgs.length === 1) {\n            value = imgs[0].src;\n          } else {\n            value = imgs.map((img) => img.src);\n          }\n        } else if (col.querySelector('p')) {\n          const ps = [...col.querySelectorAll('p')];\n          if (ps.length === 1) {\n            value = ps[0].textContent;\n          } else {\n            value = ps.map((p) => p.textContent);\n          }\n        } else value = row.children[1].textContent;\n        config[name] = value;\n      }\n    }\n  });\n  return config;\n}\n\n/**\n * Decorates all sections in a container element.\n * @param {Element} main The container element\n */\nexport function decorateSections(main) {\n  main.querySelectorAll(':scope > div').forEach((section) => {\n    const wrappers = [];\n    let defaultContent = false;\n    [...section.children].forEach((e) => {\n      if (e.tagName === 'DIV' || !defaultContent) {\n        const wrapper = document.createElement('div');\n        wrappers.push(wrapper);\n        defaultContent = e.tagName !== 'DIV';\n        if (defaultContent) wrapper.classList.add('default-content-wrapper');\n      }\n      wrappers[wrappers.length - 1].append(e);\n    });\n    wrappers.forEach((wrapper) => section.append(wrapper));\n    section.classList.add('section');\n    section.dataset.sectionStatus = 'initialized';\n    section.style.display = 'none';\n\n    /* process section metadata */\n    const sectionMeta = section.querySelector('div.section-metadata');\n    if (sectionMeta) {\n      const meta = readBlockConfig(sectionMeta);\n      Object.keys(meta).forEach((key) => {\n        if (key === 'style') {\n          const styles = meta.style.split(',').map((style) => toClassName(style.trim()));\n          styles.forEach((style) => section.classList.add(style));\n        } else if (key === STICKY_NAVIGATION_SECTION_METADATA_KEY) {\n          section.id = `section-${toClassName(meta[key])}`;\n          section.dataset[STICKY_NAVIGATION_DATASET_KEY] = meta[key];\n        } else if (key === 'id') {\n          section.id = meta[key];\n        } else {\n          section.dataset[toCamelCase(key)] = meta[key];\n        }\n      });\n      sectionMeta.parentNode.remove();\n    }\n  });\n}\n\n/**\n * Updates all section status in a container element.\n * @param {Element} main The container element\n */\nexport function updateSectionsStatus(main) {\n  const sections = [...main.querySelectorAll(':scope > div.section')];\n  for (let i = 0; i < sections.length; i += 1) {\n    const section = sections[i];\n    const status = section.dataset.sectionStatus;\n    if (status !== 'loaded') {\n      const loadingBlock = section.querySelector('.block[data-block-status=\"initialized\"], .block[data-block-status=\"loading\"]');\n      if (loadingBlock) {\n        section.dataset.sectionStatus = 'loading';\n        break;\n      } else {\n        section.dataset.sectionStatus = 'loaded';\n        section.style.display = null;\n      }\n    }\n  }\n}\n\n/**\n * Decorates all blocks in a container element.\n * @param {Element} main The container element\n */\nexport function decorateBlocks(main) {\n  main\n    .querySelectorAll('div.section > div > div')\n    .forEach(decorateBlock);\n}\n\n/**\n * Builds a block DOM Element from a two dimensional array, string, or object\n * @param {string} blockName name of the block\n * @param {*} content two dimensional array or string or object of content\n */\nexport function buildBlock(blockName, content) {\n  const table = Array.isArray(content) ? content : [[content]];\n  const blockEl = document.createElement('div');\n  // build image block nested div structure\n  blockEl.classList.add(blockName);\n  table.forEach((row) => {\n    const rowEl = document.createElement('div');\n    row.forEach((col) => {\n      const colEl = document.createElement('div');\n      const vals = col.elems ? col.elems : [col];\n      vals.forEach((val) => {\n        if (val) {\n          if (typeof val === 'string') {\n            colEl.innerHTML += val;\n          } else {\n            colEl.appendChild(val);\n          }\n        }\n      });\n      rowEl.appendChild(colEl);\n    });\n    blockEl.appendChild(rowEl);\n  });\n  return (blockEl);\n}\n\n/**\n * Gets the configuration for the given block, and also passes\n * the config through all custom patching helpers added to the project.\n *\n * @param {Element} block The block element\n * @returns {Object} The block config (blockName, cssPath and jsPath)\n */\nfunction getBlockConfig(block) {\n  const { blockName } = block.dataset;\n  const cssPath = `${window.hlx.codeBasePath}/blocks/${blockName}/${blockName}.css`;\n  const jsPath = `${window.hlx.codeBasePath}/blocks/${blockName}/${blockName}.js`;\n  const original = { blockName, cssPath, jsPath };\n  return (window.hlx.patchBlockConfig || [])\n    .filter((fn) => typeof fn === 'function')\n    .reduce((config, fn) => fn(config, original), { blockName, cssPath, jsPath });\n}\n\n/**\n * Loads JS and CSS for a module and executes it's default export.\n * @param {string} name The module name\n * @param {string} jsPath The JS file to load\n * @param {string} [cssPath] An optional CSS file to load\n * @param {object[]} [args] Parameters to be passed to the default export when it is called\n */\nasync function loadModule(name, jsPath, cssPath, ...args) {\n  const cssLoaded = cssPath ? loadCSS(cssPath) : Promise.resolve();\n  const decorationComplete = jsPath\n    ? new Promise((resolve) => {\n      (async () => {\n        let mod;\n        try {\n          mod = await import(jsPath);\n          if (mod.default) {\n            await mod.default.apply(null, args);\n          }\n        } catch (error) {\n          // eslint-disable-next-line no-console\n          console.log(`failed to load module for ${name}`, error);\n        }\n        resolve(mod);\n      })();\n    })\n    : Promise.resolve();\n  return Promise.all([cssLoaded, decorationComplete])\n    .then(([, api]) => api);\n}\n\n/**\n * Loads JS and CSS for a block.\n * @param {Element} block The block element\n */\nexport async function loadBlock(block) {\n  const status = block.dataset.blockStatus;\n  if (status !== 'loading' && status !== 'loaded') {\n    block.dataset.blockStatus = 'loading';\n    const { blockName, cssPath, jsPath } = getBlockConfig(block);\n    try {\n      await loadModule(blockName, jsPath, cssPath, block);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(`failed to load block ${blockName}`, error);\n    }\n    block.dataset.blockStatus = 'loaded';\n  }\n}\n\n/**\n * Loads JS and CSS for all blocks in a container element.\n * @param {Element} main The container element\n */\nexport async function loadBlocks(main) {\n  updateSectionsStatus(main);\n  const blocks = [...main.querySelectorAll('div.block')];\n  for (let i = 0; i < blocks.length; i += 1) {\n    // eslint-disable-next-line no-await-in-loop\n    await loadBlock(blocks[i]);\n    updateSectionsStatus(main);\n  }\n}\n\n/**\n * Returns a picture element with webp and fallbacks\n * @param {string} src The image URL\n * @param {string} [alt] The image alternative text\n * @param {boolean} [eager] Set loading attribute to eager\n * @param {Array} [breakpoints] Breakpoints and corresponding params (eg. width)\n * @returns {Element} The picture element\n */\nexport function createOptimizedPicture(src, alt = '', eager = false, breakpoints = [{ media: '(min-width: 600px)', width: '2000' }, { width: '750' }]) {\n  const url = new URL(src, window.location.href);\n  const picture = document.createElement('picture');\n  const { pathname } = url;\n  const ext = pathname.substring(pathname.lastIndexOf('.') + 1);\n\n  // webp\n  breakpoints.forEach((br) => {\n    const source = document.createElement('source');\n    if (br.media) source.setAttribute('media', br.media);\n    source.setAttribute('type', 'image/webp');\n    source.setAttribute('srcset', `${pathname}?width=${br.width}&format=webply&optimize=medium`);\n    picture.appendChild(source);\n  });\n\n  // fallback\n  breakpoints.forEach((br, i) => {\n    if (i < breakpoints.length - 1) {\n      const source = document.createElement('source');\n      if (br.media) source.setAttribute('media', br.media);\n      source.setAttribute('srcset', `${pathname}?width=${br.width}&format=${ext}&optimize=medium`);\n      picture.appendChild(source);\n    } else {\n      const img = document.createElement('img');\n      img.setAttribute('loading', eager ? 'eager' : 'lazy');\n      img.setAttribute('alt', alt);\n      picture.appendChild(img);\n      img.setAttribute('src', `${pathname}?width=${br.width}&format=${ext}&optimize=medium`);\n    }\n  });\n\n  return picture;\n}\n\nexport function setImageDimensions(pictureElement, width, height) {\n  const imgTag = pictureElement.querySelector('img');\n  if (imgTag) {\n    imgTag.setAttribute('width', width);\n    imgTag.setAttribute('height', height);\n  }\n}\n\n/**\n * Normalizes all headings within a container element.\n * @param {Element} el The container element\n * @param {string} allowedHeadings The list of allowed headings (h1 ... h6)\n */\nexport function normalizeHeadings(el, allowedHeadings) {\n  const allowed = allowedHeadings.map((h) => h.toLowerCase());\n  el.querySelectorAll('h1, h2, h3, h4, h5, h6').forEach((tag) => {\n    const h = tag.tagName.toLowerCase();\n    if (allowed.indexOf(h) === -1) {\n      // current heading is not in the allowed list -> try first to \"promote\" the heading\n      let level = parseInt(h.charAt(1), 10) - 1;\n      while (allowed.indexOf(`h${level}`) === -1 && level > 0) {\n        level -= 1;\n      }\n      if (level === 0) {\n        // did not find a match -> try to \"downgrade\" the heading\n        while (allowed.indexOf(`h${level}`) === -1 && level < 7) {\n          level += 1;\n        }\n      }\n      if (level !== 7) {\n        tag.outerHTML = `<h${level} id=\"${tag.id}\">${tag.textContent}</h${level}>`;\n      }\n    }\n  });\n}\n\n/**\n * Set template (page structure) and theme (page styles).\n */\nexport function decorateTemplateAndTheme() {\n  const addClasses = (element, classes) => {\n    classes.split(',').forEach((c) => {\n      element.classList.add(toClassName(c.trim()));\n    });\n  };\n  const darkMode = page.getParamValue('theme');\n  if (darkMode && darkMode === 'dark') addClasses(document.body, 'dark-mode');\n  const template = getMetadata('template');\n  if (template) addClasses(document.body, template);\n  const theme = getMetadata('theme');\n  if (theme) addClasses(document.body, theme);\n}\n\n/**\n * Decorates paragraphs containing a single link as buttons.\n * @param {Element} element container element\n */\nexport function decorateButtons(element) {\n  const wrapButtonText = (a) => ((a.innerHTML.startsWith('<'))\n    ? `${a.querySelector('span.icon')?.outerHTML || ''}<span class=\"button-text\">${a.textContent}</span>`\n    : `<span class=\"button-text\">${a.textContent}</span>${a.querySelector('span.icon')?.outerHTML || ''}`\n  );\n  element.querySelectorAll('a').forEach((a) => {\n    if (a.closest('.nav-brand') || a.closest('.nav-sections')) {\n      return;\n    }\n\n    a.title = a.title || a.textContent;\n    if (a.href !== a.textContent) {\n      const up = a.parentElement;\n      const twoup = a.parentElement.parentElement;\n      const threeup = a.parentElement.parentElement?.parentElement;\n\n      if (!a.querySelector('img')) {\n        if (a.innerText?.includes('[hide-mobile]')) {\n          if (UserAgent.os === 'ios' || UserAgent.os === 'android') {\n            a.remove();\n            return;\n          }\n          const buttonText = a.innerText;\n          a.innerText = buttonText.replace('[hide-mobile]', '');\n        }\n\n        // Example: <p><strong><a href=\"example.com\">Text</a></strong></p>\n        if (up.childNodes.length === 1 && up.tagName === 'STRONG'\n          && twoup.childNodes.length === 1 && twoup.tagName === 'P') {\n          a.className = 'button primary';\n          twoup.classList.add('button-container');\n          up.replaceWith(a);\n          a.innerHTML = wrapButtonText(a);\n          return;\n        }\n\n        if (up.childNodes.length === 1 && up.tagName === 'EM'\n            && twoup.childNodes.length === 1 && twoup.tagName === 'STRONG'\n            && threeup?.childNodes.length === 1 && threeup?.tagName === 'P') {\n          a.className = 'button secondary';\n          threeup.classList.add('button-container');\n          up.replaceWith(a);\n          a.innerHTML = wrapButtonText(a);\n          return;\n        }\n        // Example: <p><a href=\"example.com\">Text</a> (example.com)</p>\n        if (up.childNodes.length === 1 && up.tagName === 'P' && a.href.includes('/fragments/')) {\n          a.className = 'button modal';\n          up.classList.add('button-container');\n          return;\n        }\n\n        // Example: <p><a href=\"https://central.bitdefender.com\">Text</a> (example text)</p>\n        if (up.childNodes.length === 1 && up.tagName === 'P' && a.href.includes('central.bitdefender')) {\n          a.className = 'button central';\n          up.classList.add('button-container');\n          return;\n        }\n\n        // Example: <p><a href=\"example.com\">Text</a> <em>50% Discount</em></p>\n        if (up.childNodes.length === 3 && up.tagName === 'P' && a.nextElementSibling?.tagName === 'EM') {\n          a.className = 'button';\n          up.classList.add('button-container');\n          a.innerHTML = wrapButtonText(a);\n          a.dataset.modal = a.nextSibling.textContent.trim().slice(1, -1);\n          a.nextSibling.remove();\n          return;\n        }\n        // Example: <p><a href=\"example.com\">? Text</a></p>\n        if (up.childNodes.length === 1 && up.tagName === 'P' && up.innerText.startsWith('?')) {\n          a.className = 'info-button modal';\n          up.classList.add('info-button-container');\n          a.textContent = a.textContent.slice(1).trim();\n          a.title = a.title.slice(1).trim();\n          return;\n        }\n\n        if (up.childNodes.length === 1 && up.tagName === 'P' && up.innerText.startsWith('->')) {\n          a.className = 'button link-arrow-right';\n          up.classList.add('button-container');\n          a.textContent = a.textContent.slice(2).trim();\n          a.title = a.title.slice(2).trim();\n          return;\n        }\n\n        // Example: <p><a href=\"example.com\">Text</a></p>\n        if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n          a.className = 'button'; // default\n          up.classList.add('button-container');\n          a.innerHTML = wrapButtonText(a);\n        }\n\n        if (up.tagName === 'TD' && up.closest('table.ratings')) {\n          a.className = 'button';\n          up.classList.add('button-container');\n          a.innerHTML = wrapButtonText(a);\n        }\n      }\n    }\n  });\n}\n\n/**\n * Load LCP block and/or wait for LCP in default content.\n */\nexport async function waitForLCP(lcpBlocks) {\n  const block = document.querySelector('.block');\n  const hasLCPBlock = (block && lcpBlocks.includes(block.dataset.blockName));\n  if (hasLCPBlock) await loadBlock(block);\n\n  document.body.style.display = null;\n  const lcpCandidate = document.querySelector('main img');\n  await new Promise((resolve) => {\n    if (lcpCandidate && !lcpCandidate.complete) {\n      lcpCandidate.setAttribute('loading', 'eager');\n      lcpCandidate.addEventListener('load', resolve);\n      lcpCandidate.addEventListener('error', resolve);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * Loads a block named 'header' into header\n * @param {Element} header header element\n * @returns {Promise}\n */\nexport function loadHeader(header) {\n  const headerBlock = buildBlock('header', '');\n  header.append(headerBlock);\n  decorateBlock(headerBlock);\n  return loadBlock(headerBlock);\n}\n\n/**\n * Loads a block named 'footer' into footer\n * @param footer footer element\n * @returns {Promise}\n */\nexport function loadFooter(footer) {\n  const footerBlock = buildBlock('footer', '');\n  footer.append(footerBlock);\n  decorateBlock(footerBlock);\n  return loadBlock(footerBlock);\n}\n\nfunction parsePluginParams(id, config) {\n  const pluginId = !config\n    ? id.split('/').splice(id.endsWith('/') ? -2 : -1, 1)[0].replace(/\\.js/, '')\n    : id;\n  const pluginConfig = {\n    load: 'eager',\n    ...(typeof config === 'string' || !config\n      ? { url: (config || id).replace(/\\/$/, '') }\n      : config),\n  };\n  pluginConfig.options ||= {};\n  return { id: pluginId, config: pluginConfig };\n}\n\n// Define an execution context for plugins\nexport const executionContext = {\n  createOptimizedPicture,\n  getAllMetadata,\n  getMetadata,\n  decorateBlock,\n  decorateButtons,\n  decorateIcons,\n  loadBlock,\n  loadCSS,\n  sampleRUM,\n  toCamelCase,\n  toClassName,\n};\n\nclass PluginsRegistry {\n  #plugins;\n\n  constructor() {\n    this.#plugins = new Map();\n  }\n\n  // Register a new plugin\n  add(id, config) {\n    const { id: pluginId, config: pluginConfig } = parsePluginParams(id, config);\n    this.#plugins.set(pluginId, pluginConfig);\n  }\n\n  // Get the plugin\n  get(id) { return this.#plugins.get(id); }\n\n  // Check if the plugin exists\n  includes(id) { return !!this.#plugins.has(id); }\n\n  // Load all plugins that are referenced by URL, and updated their configuration with the\n  // actual API they expose\n  async load(phase) {\n    [...this.#plugins.entries()]\n      .filter(([, plugin]) => plugin.condition\n      && !plugin.condition(document, plugin.options, executionContext))\n      .map(([id]) => this.#plugins.delete(id));\n    return Promise.all([...this.#plugins.entries()]\n      // Filter plugins that don't match the execution conditions\n      .filter(([, plugin]) => (\n        (!plugin.condition || plugin.condition(document, plugin.options, executionContext))\n        && phase === plugin.load && plugin.url\n      ))\n      .map(async ([key, plugin]) => {\n        try {\n          // If the plugin has a default export, it will be executed immediately\n          const pluginApi = (await loadModule(\n            key,\n            !plugin.url.endsWith('.js') ? `${plugin.url}/${key}.js` : plugin.url,\n            !plugin.url.endsWith('.js') ? `${plugin.url}/${key}.css` : null,\n            document,\n            plugin.options,\n            executionContext,\n          )) || {};\n          this.#plugins.set(key, { ...plugin, ...pluginApi });\n        } catch (err) {\n          // eslint-disable-next-line no-console\n          console.error('Could not load specified plugin', key);\n        }\n      }));\n  }\n\n  // Run a specific phase in the plugin\n  async run(phase) {\n    return [...this.#plugins.values()]\n      .reduce((promise, plugin) => ( // Using reduce to execute plugins sequencially\n        plugin[phase] && (!plugin.condition\n            || plugin.condition(document, plugin.options, executionContext))\n          ? promise.then(() => plugin[phase](document, plugin.options, executionContext))\n          : promise\n      ), Promise.resolve());\n  }\n}\n\nclass TemplatesRegistry {\n  // Register a new template\n  // eslint-disable-next-line class-methods-use-this\n  add(id, url) {\n    if (Array.isArray(id)) {\n      id.forEach((i) => window.hlx.templates.add(i));\n      return;\n    }\n    const { id: templateId, config: templateConfig } = parsePluginParams(id, url);\n    templateConfig.condition = () => toClassName(getMetadata('template')) === templateId;\n    window.hlx.plugins.add(templateId, templateConfig);\n  }\n\n  // Get the template\n  // eslint-disable-next-line class-methods-use-this\n  get(id) { return window.hlx.plugins.get(id); }\n\n  // Check if the template exists\n  // eslint-disable-next-line class-methods-use-this\n  includes(id) { return window.hlx.plugins.includes(id); }\n}\n\n/**\n * Setup block utils.\n */\nexport function setup() {\n  window.hlx = window.hlx || {};\n  window.hlx.RUM_MASK_URL = 'full';\n  window.hlx.codeBasePath = '';\n  window.hlx.lighthouse = new URLSearchParams(window.location.search).get('lighthouse') === 'on';\n  window.hlx.patchBlockConfig = [];\n  window.hlx.plugins = new PluginsRegistry();\n  window.hlx.templates = new TemplatesRegistry();\n\n  const scriptEl = document.querySelector('script[src$=\"/_src/scripts/scripts.js\"]');\n  if (scriptEl) {\n    try {\n      [window.hlx.codeBasePath] = new URL(scriptEl.src).pathname.split('/scripts/scripts.js');\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  }\n}\n\nfunction initialiseSentry() {\n  Sentry.init({\n    dsn: 'https://453d79512df247d7983074696546ca60@o4504802466004992.ingest.us.sentry.io/4505244512288768',\n    sendDefaultPii: false,\n    release: 'www-websites@1.0.0',\n    integrations: [\n      Sentry.browserTracingIntegration(),\n      Sentry.replayIntegration(),\n    ],\n    tracesSampleRate: 0.05,\n    replaysSessionSampleRate: 0.1,\n    replaysOnErrorSampleRate: 1.0,\n\n    allowUrls: ['www.bitdefender.com'],\n  });\n}\n\n/**\n * Auto initializiation.\n */\nfunction init() {\n  initialiseSentry();\n  setup();\n  sampleRUM('top');\n\n  window.addEventListener('load', () => sampleRUM('load'));\n\n  window.addEventListener('unhandledrejection', (event) => {\n    sampleRUM('error', { source: event.reason.sourceURL, target: event.reason.line });\n  });\n\n  window.addEventListener('error', (event) => {\n    sampleRUM('error', { source: event.filename, target: event.lineno });\n  });\n}\n\ninit();\n"],"names":["STICKY_NAVIGATION_SECTION_METADATA_KEY","ALL_FRANKLIN_DEV_SUBDOMAINS","STICKY_NAVIGATION_DATASET_KEY","sampleRUM","checkpoint","data","SESSION_STORAGE_KEY","defer","fnname","args","dfnname","fn","chkpnt","weight","id","_","i","a","random","isSelected","firstReadTime","urlSanitizers","rumSessionStorage","knownProperties","sendPing","pdata","t","body","url","script","loadCSS","href","resolve","reject","link","getMetadata","name","attr","m","toClassName","toCamelCase","g","getAllMetadata","scope","res","meta","ICONS_CACHE","internalDecorateIcons","element","icons","span","iconName","c","response","svg","error","parent","spanParent","previousDecoration","decorateIcons","decorateTags","tagTypes","replaceTags","inputValue","nodeValue","replaced","tagType","match","replaceTagsInNode","node","originalValue","newNode","decorateBlock","block","shortBlockName","section","readBlockConfig","config","row","cols","col","value","as","imgs","img","ps","p","decorateSections","main","wrappers","defaultContent","e","wrapper","sectionMeta","key","style","updateSectionsStatus","sections","decorateBlocks","buildBlock","blockName","content","table","blockEl","rowEl","colEl","val","getBlockConfig","cssPath","jsPath","original","loadModule","cssLoaded","decorationComplete","mod","api","loadBlock","status","loadBlocks","blocks","createOptimizedPicture","src","alt","eager","breakpoints","picture","pathname","ext","br","source","setImageDimensions","pictureElement","width","height","imgTag","normalizeHeadings","el","allowedHeadings","allowed","h","tag","level","decorateTemplateAndTheme","addClasses","classes","darkMode","page","template","theme","decorateButtons","wrapButtonText","up","twoup","threeup","UserAgent","buttonText","waitForLCP","lcpBlocks","lcpCandidate","loadHeader","header","headerBlock","loadFooter","footer","footerBlock","parsePluginParams","pluginId","pluginConfig","executionContext","PluginsRegistry","#plugins","phase","plugin","pluginApi","promise","TemplatesRegistry","templateId","templateConfig","setup","scriptEl","initialiseSentry","Sentry.init","Sentry.browserTracingIntegration","Sentry.replayIntegration","init","event"],"mappings":"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"}