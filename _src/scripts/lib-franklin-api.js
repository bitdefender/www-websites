import{__vitePreload as C}from"../_virtual/preload-helper.js";const g=(s,e)=>{s.querySelectorAll("source").forEach(o=>o.srcset=new URL(o.getAttribute("srcset"),e).href),s.querySelectorAll("img").forEach(o=>o.src=new URL(o.getAttribute("src"),e).href)};let d={};async function A(s){let e=s.getElementById("franklin-svg-sprite");if(!e){const t=document.createElement("div");t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" id="franklin-svg-sprite" style="display: none"></svg>',e=t.firstElementChild,s.append(t.firstElementChild)}const o=[...s.querySelectorAll("span.icon")];await Promise.all(o.map(async t=>{const r=Array.from(t.classList).find(n=>n.startsWith("icon-")).substring(5);if(!d[r]){d[r]=!0;try{let n="https://www.bitdefender.com/common/icons/";window.location.hostname.includes("bitdefender.co.uk")&&(n="https://www.bitdefender.co.uk/content/dam/franklin/"),window.location.hostname.includes("bitdefender.fr")&&(n="https://www.bitdefender.fr/content/dam/franklin/"),window.location.hostname==="localhost"&&(n="https://www.bitdefender.com/common/icons/");const i=await fetch(`${n}${r}.svg`);if(!i.ok){d[r]=!1;return}const c=await i.text();c.match(/(<style | class=)/)?d[r]={styled:!0,html:c}:d[r]={html:c.replace("<svg",`<symbol id="icons-sprite-${r}"`).replace(/ width=".*?"/,"").replace(/ height=".*?"/,"").replace("</svg>","</symbol>")}}catch(n){d[r]=!1,console.error(n)}}}));const l=Object.keys(d).filter(t=>!e.querySelector(`#icons-sprite-${t}`)).map(t=>d[t]).filter(t=>!t.styled).map(t=>t.html).join(`
`);e.innerHTML+=l,o.forEach(t=>{const r=Array.from(t.classList).find(i=>i.startsWith("icon-")).substring(5),n=t.firstElementChild?.tagName==="A"?t.firstElementChild:t;d[r].styled?n.innerHTML=d[r].html:n.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg"><use href="#icons-sprite-${r}"/></svg>`})}function $(s){return h(s).replace(/-([a-z])/g,e=>e[1].toUpperCase())}function h(s){return typeof s=="string"?s.toLowerCase().replace(/[^\w\u4e00-\u9fa5]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function q(s){const e={};return s.querySelectorAll(":scope > div").forEach(o=>{if(o.children){const l=[...o.children];if(l[1]){const t=l[1],r=h(l[0].textContent);let n="";if(t.querySelector("a")){const i=[...t.querySelectorAll("a")];i.length===1?n=i[0].href:n=i.map(c=>c.href)}else if(t.querySelector("img")){const i=[...t.querySelectorAll("img")];i.length===1?n=i[0].src:n=i.map(c=>c.src)}else if(t.querySelector("p")){const i=[...t.querySelectorAll("p")];i.length===1?n=i[0].textContent:n=i.map(c=>c.textContent)}else n=o.children[1].textContent;e[r]=n}}}),e}function v(s){s.querySelectorAll(":scope > div").forEach(e=>{const o=[];let l=!1;[...e.children].forEach(r=>{if(r.tagName==="DIV"||!l){const n=document.createElement("div");o.push(n),l=r.tagName!=="DIV",l&&n.classList.add("default-content-wrapper")}o[o.length-1].append(r)}),o.forEach(r=>e.append(r)),e.classList.add("section");const t=e.querySelector("div.section-metadata");if(t){const r=q(t);Object.keys(r).forEach(n=>{n==="style"?r.style.split(",").map(c=>h(c.trim())).forEach(c=>e.classList.add(c)):e.dataset[$(n)]=r[n]}),t.parentNode.remove()}})}function L(s){const e=s.classList[0];if(e){s.classList.add("block"),s.dataset.blockName=e,s.dataset.blockStatus="initialized",s.parentElement.classList.add(`${e}-wrapper`);const l=s.closest(".section");l&&l.classList.add(`${e}-container`)}}async function H(s,e,o,l){const t=new URL(s),r=t.origin,n=t.pathname.split("/").slice(0,-1).join("/"),i=l?document.querySelector(l):document.createElement("div"),c=i.attachShadow({mode:"open"});c.innerHTML=`<link rel="stylesheet" href="${r}/_src/blocks/${e}/${e}.css" type="text/css">`;const[m,u]=await Promise.all([fetch(s).then(a=>a.text()),C(()=>import(`${r}/_src/blocks/${e}/${e}.js`),[])]);if(e==="particle-background"){const a=document.createElement("div");a.style.display="none",a.innerHTML+=m,v(a),L(a.querySelector(`.${e}`)),g(a,`${r}${n}/`),document.body.appendChild(a),await u.default(a,{...o}),c.appendChild(a),a.style.display="block"}else{let a=document.createElement("div");a.innerHTML=m,v(a),L(a.querySelector(`.${e}`)),c.innerHTML+=a.innerHTML,g(c,`${r}${n}/`),await u.default(c.querySelector(".section"),{...o}),A(c);const w=window.location.protocol+"//"+window.location.host+window.location.pathname;c.querySelectorAll('a[href*="#"]').forEach(y=>{let f=y.getAttribute("href");try{const p=new URL(f,w),S=p.protocol+"//"+p.host+p.pathname;w===S&&y.addEventListener("click",E=>{E.preventDefault(),f="#"+f.split("#")[1],document.querySelector(f).scrollIntoView({behavior:"smooth"})})}catch{return}})}return i}export{v as decorateSections,H as loadComponent,q as readBlockConfig,$ as toCamelCase,h as toClassName};
//# sourceMappingURL=lib-franklin-api.js.map
