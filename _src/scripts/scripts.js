const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["scripts/delayed.js","scripts/lib-franklin.js","scripts/page.js","scripts/breadcrumbs.js","scripts/utils/utils.js","scripts/libs/constants.js"])))=>i.map(i=>d[i]);
import{__vitePreload as x}from"../_virtual/preload-helper.js";import P from"../vendor/repobit/dex-launch/dist/src/index.js";import{AdobeDataLayerService as N}from"../vendor/repobit/dex-data-layer/dist/src/adobe-data-layer-service/index.js";import"../vendor/repobit/dex-utils/dist/src/index.js";import{PageLoadedEvent as _}from"../vendor/repobit/dex-data-layer/dist/src/events/page-loaded-event/index.js";import{adobeMcAppendVisitorId as I,target as w}from"./target.js";import M from"./page.js";import{getMetadata as m,decorateTemplateAndTheme as T,loadCSS as h,waitForLCP as B,loadHeader as $,loadBlocks as g,loadFooter as O,sampleRUM as p,decorateButtons as k,decorateIcons as F,decorateTags as U,decorateSections as V,decorateBlocks as z}from"./lib-franklin.js";import{resolveNonProductsDataLayer as L}from"./libs/data-layer.js";import{StoreResolver as E}from"./libs/store/resolver/resolver.js";import"./libs/store/store.js";import{pushTrialDownloadToDataLayer as R,getPageExperimentKey as S,generateLDJsonSchema as H,GLOBAL_EVENTS as W,createTag as j}from"./utils/utils.js";import{Constants as G}from"./libs/constants.js";const K=["hero","password-generator"],ge=["en"];window.hlx.plugins.add("rum-conversion",{load:"lazy",url:"../plugins/rum-conversion/src/index.js"});window.hlx.plugins.add("experimentation",{condition:()=>m("experiment"),options:{prodHost:"www.bitdefender.com"},url:"../plugins/experimentation/src/index.js"});window.ADOBE_MC_EVENT_LOADED=!1;function f(e){const o=document.createElement("div");o.setAttribute(`data-${e}-detector`,""),document.body.append(o)}function v(e,o){const a=document.createElement("meta");a.setAttribute("name",e),a.setAttribute("content",o),document.head.append(a)}function Le(){const e=window.location.pathname;return{language:e.split("/")[1].split("-")[0],country:e.split("/")[1].split("-")[1]}}function y(e){const{pathname:o}=window.location,t=o.charAt(o.length-1)==="/";let n=o.split("/");if(t)return`${n.join("/")}${e}`;const l=o.startsWith("/pages/")?3:2;return n=n.slice(0,l+1),`${n.join("/")}/${e}`}function J(e){e.querySelectorAll("picture").forEach(o=>{if(!o.closest("div.block")&&o.parentElement.tagName!=="DIV"){const a=o.parentNode.nextElementSibling;if(a){const t=a.querySelector("a"),n=t?.textContent;if(t&&n.startsWith("https://")&&n.includes("fragments")){t.innerHTML="",t.className="video-placeholder",t.appendChild(o);const l=document.createElement("span");l.className="video-placeholder-play",t.appendChild(l),t.addEventListener("click",async d=>{d.preventDefault();const s=await b(n,"video-modal");document.body.append(s)});const r=t.parentElement;r.childNodes.length===1&&(r.tagName==="P"||r.tagName==="DIV")&&r.classList.add("modal-video-container");return}if(t&&n.startsWith("https://")){t.innerHTML="",t.className="linked-image";const l=o.parentNode;t.append(o),l.children.length===0&&l.parentNode.removeChild(l);const r=t.parentElement;r.childNodes.length===1&&(r.tagName==="P"||r.tagName==="DIV")&&r.classList.add("linked-image-container")}}}})}function A(e){k(e),F(e),U(e),J(e),V(e),z(e)}async function b(e,o,a){const t=document.createElement("div");if(t.classList.add("modal-container"),a){const i=e.split("/").pop();t.classList.add(i)}const n=document.createElement("div");n.classList.add("modal-content");const l=await fetch(`${e}.plain.html`);if(!l.ok)return console.error(`modal url cannot be loaded: ${e}`),t;const r=await l.text();n.innerHTML=r,A(n),await g(n),t.append(n),o&&t.classList.add(o);const d=()=>{if(a){t.classList.add("global-display-none");return}t.remove()},s=document.createElement("div");return s.classList.add("modal-close"),s.addEventListener("click",d),n.append(s),t}async function Q(e){e.querySelectorAll("a.button.modal").forEach(o=>{o.addEventListener("click",async a=>{a.preventDefault();const t=o.dataset.stopAutomaticModalRefresh==="true";if(t){const l=o.href.split("/").pop(),r=document.querySelector(`div.modal-container.${l}`);if(r){r.classList.remove("global-display-none");return}}const n=await b(o.href,void 0,t);document.body.append(n),await E.resolve(n),n.querySelectorAll(".await-loader").forEach(l=>{l.classList.remove("await-loader")})})})}function C(e){if(e.querySelectorAll(".columns div div").length===2){const o=e.querySelector(".columns div div:last-child");o.classList.add("right-col"),e.querySelector(".columns div div:last-child").classList.add("right-col");const a=e.querySelector(".columns div div:first-child");a.classList.add("left-col"),e.querySelectorAll(".right-column").forEach(t=>o.append(t)),e.querySelectorAll(".left-column").forEach(t=>a.append(t))}}function X(e){if(e.querySelectorAll(".hero div div").length===2){const o=e.querySelector(".hero div div:last-child");o.classList.add("right-col"),e.querySelector(".hero div div:last-child").classList.add("right-col");const a=e.querySelector(".hero div div:first-child");a.classList.add("left-col"),e.querySelectorAll(".right-column").forEach(t=>o.append(t)),e.querySelectorAll(".left-column").forEach(t=>a.append(t))}}function Y(e){e.querySelectorAll("div.section.two-columns").forEach(o=>{X(o),C(o)})}function Z(e){C(e);const o=j("div",{class:"full-width"},"");[...e.children].forEach(a=>o.append(a)),e.append(o)}function ee(e){e.querySelectorAll("div.section.cta, div.section.footer-cta").forEach(Z)}async function q(){const e=window.location.pathname.indexOf("/drafts/")===-1,o=()=>{document.dispatchEvent(new Event(W.ADOBE_MC_LOADED)),window.ADOBE_MC_EVENT_LOADED=!0};if(e)try{await P.load(M.environment),o()}catch{w.abort()}else w.abort(),o()}async function te(e){S()&&(q(),await L()),v("nav",`${y("nav")}`),v("footer",`${y("footer")}`),T();const o=m("template");m("template")!==""&&h(`${window.hlx.codeBasePath}/scripts/template-factories/${o}.css`);const t=e.querySelector("main");t&&(A(t),ee(t),Y(t),Q(t),document.body.classList.add("appear","franklin"),window.location.href.indexOf("scuderiaferrari")!==-1&&document.body.classList.add("sferrari"),await B(K))}async function oe(e){const o=e.querySelector("main"),a=window.location.pathname.indexOf("/fragments/")===-1,t=window.location.pathname.indexOf("/webview/")===-1;e.querySelector("header").style.height="0px",a&&t&&(e.querySelector("header").style.height="initial",$(e.querySelector("header"))),S()||(q(),await L()),await g(o);const{hash:n}=window.location,l=n?e.getElementById(n.substring(1)):!1;n&&l&&l.scrollIntoView(),a&&t&&O(e.querySelector("footer")),H(),h(`${window.hlx.codeBasePath}/styles/lazy-styles.css`),window.hlx.plugins.run("loadLazy");const r=m("template");m("template")!==""&&h(`${window.hlx.codeBasePath}/scripts/template-factories/${r}-lazy.css`).catch(()=>{}),p("lazy"),p.observe(o.querySelectorAll("div[data-block-name]")),p.observe(o.querySelectorAll("picture > img"))}function ae(){document.querySelectorAll(".dropdown-slider").forEach(e=>{const o=e.querySelectorAll(".title"),a=e.querySelectorAll(".loading-bar");let t=0,n;function l(i){const c=a[i];c.style.width="0";let u=0;const D=setInterval(()=>{u+=1,c.style.width=`${u}%`,u>=100&&clearInterval(D)},30)}function r(){o.forEach((i,c)=>{c===t?(i.parentNode.classList.add("active"),i.closest(".dropdown-slider").setAttribute("style",`min-height: ${i.parentNode.querySelector(".description").offsetHeight+50}px`),a.length&&l(c)):i.parentNode.classList.remove("active")}),t=(t+1)%o.length}function d(){n=setInterval(r,4e3)}function s(){clearInterval(n)}r(),a.length&&(setTimeout(()=>{d()},1e3),o.forEach((i,c)=>{i.addEventListener("click",()=>{s(),t=c,l(c),r(),d()})}))})}function ne(){window.setTimeout(()=>(window.hlx.plugins.load("delayed"),window.hlx.plugins.run("loadDelayed"),ae(),x(()=>import("./delayed.js"),__vite__mapDeps([0,1,2,3,4,5]))),3e3)}async function le(){await window.hlx.plugins.load("eager"),new URLSearchParams(window.location.search).get("theme")==="dark"&&window.location.href.includes("canvas")&&(document.body.style="background-color: #141517"),await te(document),await window.hlx.plugins.load("lazy"),await G.PRODUCT_ID_MAPPINGS_CALL,await oe(document),await E.resolve();const o=document.querySelectorAll(".await-loader");document.dispatchEvent(new Event("bd_page_ready")),window.bd_page_ready=!0,o.forEach(t=>{t.classList.remove("await-loader")}),document.querySelectorAll(".loader-circle").forEach(t=>{t.classList.remove("loader-circle")}),I("main"),R(),N.push(new _),ne()}f("mobile");f("tablet");f("desktop");le();export{ge as SUPPORTED_LANGUAGES,v as createMetadata,b as createModal,A as decorateMain,J as default,Q as detectModalButtons,Le as getLanguageCountryFromPath,y as getLocalizedResourceUrl,q as loadTrackers};
//# sourceMappingURL=scripts.js.map
