{"version":3,"file":"ued.js","sources":["../../../../src/plugins/experimentation/src/ued.js"],"sourcesContent":["/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nvar storage = window.sessionStorage;\n\nfunction murmurhash3_32_gc(key, seed) {\n  var remainder = key.length & 3;\n  var bytes = key.length - remainder;\n  var c1 = 0xcc9e2d51;\n  var c2 = 0x1b873593;\n  var h1 = seed;\n  var k1;\n  var h1b;\n  var i = 0;\n  while (i < bytes) {\n      k1 =\n          ((key.charCodeAt(i) & 0xff)) |\n              ((key.charCodeAt(++i) & 0xff) << 8) |\n              ((key.charCodeAt(++i) & 0xff) << 16) |\n              ((key.charCodeAt(++i) & 0xff) << 24);\n      ++i;\n      k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;\n      k1 = (k1 << 15) | (k1 >>> 17);\n      k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;\n      h1 ^= k1;\n      h1 = (h1 << 13) | (h1 >>> 19);\n      h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;\n      h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));\n  }\n  k1 = 0;\n  switch (remainder) {\n      case 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\n      case 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\n      case 1:\n          k1 ^= (key.charCodeAt(i) & 0xff);\n          k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;\n          k1 = (k1 << 15) | (k1 >>> 17);\n          k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;\n          h1 ^= k1;\n  }\n  h1 ^= key.length;\n  h1 ^= h1 >>> 16;\n  h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;\n  h1 ^= h1 >>> 13;\n  h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;\n  h1 ^= h1 >>> 16;\n  return h1 >>> 0;\n}\n\nvar TOTAL_BUCKETS = 10000;\nfunction getBucket(saltedId) {\n  var hash = murmurhash3_32_gc(saltedId, 0);\n  var hashFixedBucket = Math.abs(hash) % TOTAL_BUCKETS;\n  var bucket = hashFixedBucket / TOTAL_BUCKETS;\n  return bucket;\n}\nfunction pickWithWeightsBucket(allocationPercentages, treatments, bucket) {\n  var sum = allocationPercentages.reduce(function (partialSum, a) { return partialSum + a; }, 0);\n  var partialSum = 0.0;\n  for (var i = 0; i < treatments.length; i++) {\n      partialSum += Number(allocationPercentages[i].toFixed(2)) / sum;\n      if (bucket > partialSum) {\n          continue;\n      }\n      return treatments[i];\n  }\n}\nfunction assignTreatmentByVisitor(experimentid, identityId, allocationPercentages, treatments) {\n  var saltedId = experimentid + '.' + identityId;\n  var bucketId = getBucket(saltedId);\n  var treatmentId = pickWithWeightsBucket(allocationPercentages, treatments, bucketId);\n  return {\n      treatmentId: treatmentId,\n      bucketId: bucketId\n  };\n}\n\nvar LOCAL_STORAGE_KEY = 'unified-decisioning-experiments';\nfunction assignTreatment(allocationPercentages, treatments) {\n  var random = Math.random() * 100;\n  var i = treatments.length;\n  while (random > 0 && i > 0) {\n      i -= 1;\n      random -= +allocationPercentages[i];\n  }\n  return treatments[i];\n}\nfunction getLastExperimentTreatment(experimentId) {\n  var experimentsStr = storage.getItem(LOCAL_STORAGE_KEY);\n  if (experimentsStr) {\n      var experiments = JSON.parse(experimentsStr);\n      if (experiments[experimentId]) {\n          return experiments[experimentId].treatment;\n      }\n  }\n  return null;\n}\nfunction setLastExperimentTreatment(experimentId, treatment) {\n  var experimentsStr = storage.getItem(LOCAL_STORAGE_KEY);\n  var experiments = experimentsStr ? JSON.parse(experimentsStr) : {};\n  var now = new Date();\n  var expKeys = Object.keys(experiments);\n  expKeys.forEach(function (key) {\n      var date = new Date(experiments[key].date);\n      if ((now.getTime() - date.getTime()) > (1000 * 86400 * 30)) {\n          delete experiments[key];\n      }\n  });\n  var date = now.toISOString().split('T')[0];\n  experiments[experimentId] = { treatment: treatment, date: date };\n  storage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(experiments));\n}\nfunction assignTreatmentByDevice(experimentId, allocationPercentages, treatments) {\n  var cachedTreatmentId = getLastExperimentTreatment(experimentId);\n  var treatmentIdResponse;\n  if (!cachedTreatmentId || !treatments.includes(cachedTreatmentId)) {\n      var assignedTreatmentId = assignTreatment(allocationPercentages, treatments);\n      setLastExperimentTreatment(experimentId, assignedTreatmentId);\n      treatmentIdResponse = assignedTreatmentId;\n  }\n  else {\n      treatmentIdResponse = cachedTreatmentId;\n  }\n  return {\n      treatmentId: treatmentIdResponse\n  };\n}\n\nvar RandomizationUnit = {\n  VISITOR: 'VISITOR',\n  DEVICE: 'DEVICE'\n};\nfunction evaluateExperiment(context, experiment) {\n  var experimentId = experiment.id, identityNamespace = experiment.identityNamespace, _a = experiment.randomizationUnit, randomizationUnit = _a === void 0 ? RandomizationUnit.VISITOR : _a;\n  var identityMap = context.identityMap;\n  var treatments = experiment.treatments.map(function (item) { return item.id; });\n  var allocationPercentages = experiment.treatments.map(function (item) { return item.allocationPercentage; });\n  var treatmentAssignment = null;\n  switch (randomizationUnit) {\n      case RandomizationUnit.VISITOR: {\n          var identityId = identityMap[identityNamespace][0].id;\n          treatmentAssignment = assignTreatmentByVisitor(experimentId, identityId, allocationPercentages, treatments);\n          break;\n      }\n      case RandomizationUnit.DEVICE: {\n          treatmentAssignment = assignTreatmentByDevice(experimentId, allocationPercentages, treatments);\n          break;\n      }\n      default:\n          throw new Error(\"Unknow randomization unit\");\n  }\n  var evaluationResponse = {\n      experimentId: experimentId,\n      hashedBucket: treatmentAssignment.bucketId,\n      treatment: {\n          id: treatmentAssignment.treatmentId\n      }\n  };\n  return evaluationResponse;\n}\n\nfunction traverseDecisionTree(decisionNodesMap, context, currentNodeId) {\n  var _a = decisionNodesMap[currentNodeId], experiment = _a.experiment, type = _a.type;\n  if (type === 'EXPERIMENTATION') {\n      var treatment = evaluateExperiment(context, experiment).treatment;\n      return [treatment];\n  }\n}\nfunction evaluateDecisionPolicy(decisionPolicy, context) {\n  if (context.storage && context.storage instanceof Storage) {\n    storage = context.storage;\n  }\n  var decisionNodesMap = {};\n  decisionPolicy.decisionNodes.forEach(function (item) {\n      decisionNodesMap[item['id']] = item;\n  });\n  var items = traverseDecisionTree(decisionNodesMap, context, decisionPolicy.rootDecisionNodeId);\n  return {\n      items: items\n  };\n}\n\nexport const ued = { evaluateDecisionPolicy };\n"],"names":[],"mappings":"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"}