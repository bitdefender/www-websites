import{getNativeImplementation as s,clearCachedImplementation as c}from"../../../../../../@sentry-internal/browser-utils/build/esm/getNativeImplementation.js";import{createTransport as f}from"../../../../../core/build/esm/transports/base.js";import{rejectedSyncPromise as m}from"../../../../../core/build/esm/utils-hoist/syncpromise.js";function p(t,i=s("fetch")){let r=0,n=0;function d(o){const a=o.body.length;r+=a,n++;const h={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};if(!i)return c("fetch"),m("No fetch implementation available");try{return i(t.url,h).then(e=>(r-=a,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return c("fetch"),r-=a,n--,m(e)}}return f(t,d)}export{p as makeFetchTransport};
//# sourceMappingURL=fetch.js.map
