{"version":3,"file":"functiontostring.js","sources":["../../../../../../../node_modules/@sentry/core/build/esm/integrations/functiontostring.js"],"sourcesContent":["import { getClient } from '../currentScopes.js';\nimport { defineIntegration } from '../integration.js';\nimport { getOriginalFunction } from '../utils-hoist/object.js';\n\nlet originalFunctionToString;\n\nconst INTEGRATION_NAME = 'FunctionToString';\n\nconst SETUP_CLIENTS = new WeakMap();\n\nconst _functionToStringIntegration = (() => {\n  return {\n    name: INTEGRATION_NAME,\n    setupOnce() {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      originalFunctionToString = Function.prototype.toString;\n\n      // intrinsics (like Function.prototype) might be immutable in some environments\n      // e.g. Node with --frozen-intrinsics, XS (an embedded JavaScript engine) or SES (a JavaScript proposal)\n      try {\n        Function.prototype.toString = function ( ...args) {\n          const originalFunction = getOriginalFunction(this);\n          const context =\n            SETUP_CLIENTS.has(getClient() ) && originalFunction !== undefined ? originalFunction : this;\n          return originalFunctionToString.apply(context, args);\n        };\n      } catch {\n        // ignore errors here, just don't patch this\n      }\n    },\n    setup(client) {\n      SETUP_CLIENTS.set(client, true);\n    },\n  };\n}) ;\n\n/**\n * Patch toString calls to return proper name for wrapped functions.\n *\n * ```js\n * Sentry.init({\n *   integrations: [\n *     functionToStringIntegration(),\n *   ],\n * });\n * ```\n */\nconst functionToStringIntegration = defineIntegration(_functionToStringIntegration);\n\nexport { functionToStringIntegration };\n//# sourceMappingURL=functiontostring.js.map\n"],"names":["originalFunctionToString","INTEGRATION_NAME","SETUP_CLIENTS","_functionToStringIntegration","args","originalFunction","getOriginalFunction","context","getClient","client","functionToStringIntegration","defineIntegration"],"mappings":"qKAIA,IAAIA,EAEJ,MAAMC,EAAmB,mBAEnBC,EAAgB,IAAI,QAEpBC,EAAgC,KAC7B,CACL,KAAMF,EACN,WAAY,CAEVD,EAA2B,SAAS,UAAU,SAI9C,GAAI,CACF,SAAS,UAAU,SAAW,YAAcI,EAAM,CAChD,MAAMC,EAAmBC,EAAoB,IAAI,EAC3CC,EACJL,EAAc,IAAIM,EAAW,CAAA,GAAMH,IAAqB,OAAYA,EAAmB,KACzF,OAAOL,EAAyB,MAAMO,EAASH,CAAI,CACpD,CACT,MAAc,CAEd,CACK,EACD,MAAMK,EAAQ,CACZP,EAAc,IAAIO,EAAQ,EAAI,CAC/B,CACF,GAcGC,EAA8BC,EAAkBR,CAA4B","x_google_ignoreList":[0]}