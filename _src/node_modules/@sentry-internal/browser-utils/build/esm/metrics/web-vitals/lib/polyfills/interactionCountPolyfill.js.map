{"version":3,"file":"interactionCountPolyfill.js","sources":["../../../../../../../../../../node_modules/@sentry-internal/browser-utils/build/esm/metrics/web-vitals/lib/polyfills/interactionCountPolyfill.js"],"sourcesContent":["import { observe } from '../observe.js';\n\n/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nlet interactionCountEstimate = 0;\nlet minKnownInteractionId = Infinity;\nlet maxKnownInteractionId = 0;\n\nconst updateEstimate = (entries) => {\n  entries.forEach(e => {\n    if (e.interactionId) {\n      minKnownInteractionId = Math.min(minKnownInteractionId, e.interactionId);\n      maxKnownInteractionId = Math.max(maxKnownInteractionId, e.interactionId);\n\n      interactionCountEstimate = maxKnownInteractionId ? (maxKnownInteractionId - minKnownInteractionId) / 7 + 1 : 0;\n    }\n  });\n};\n\nlet po;\n\n/**\n * Returns the `interactionCount` value using the native API (if available)\n * or the polyfill estimate in this module.\n */\nconst getInteractionCount = () => {\n  return po ? interactionCountEstimate : performance.interactionCount || 0;\n};\n\n/**\n * Feature detects native support or initializes the polyfill if needed.\n */\nconst initInteractionCountPolyfill = () => {\n  if ('interactionCount' in performance || po) return;\n\n  po = observe('event', updateEstimate, {\n    type: 'event',\n    buffered: true,\n    durationThreshold: 0,\n  } );\n};\n\nexport { getInteractionCount, initInteractionCountPolyfill };\n//# sourceMappingURL=interactionCountPolyfill.js.map\n"],"names":["interactionCountEstimate","minKnownInteractionId","maxKnownInteractionId","updateEstimate","entries","e","po","getInteractionCount","initInteractionCountPolyfill","observe"],"mappings":"wCAmBA,IAAIA,EAA2B,EAC3BC,EAAwB,IACxBC,EAAwB,EAE5B,MAAMC,EAAkBC,GAAY,CAClCA,EAAQ,QAAQC,GAAK,CACfA,EAAE,gBACJJ,EAAwB,KAAK,IAAIA,EAAuBI,EAAE,aAAa,EACvEH,EAAwB,KAAK,IAAIA,EAAuBG,EAAE,aAAa,EAEvEL,EAA2BE,GAAyBA,EAAwBD,GAAyB,EAAI,EAAI,EAEnH,CAAG,CACH,EAEA,IAAIK,EAMC,MAACC,EAAsB,IACnBD,EAAKN,EAA2B,YAAY,kBAAoB,EAMnEQ,EAA+B,IAAM,CACrC,qBAAsB,aAAeF,IAEzCA,EAAKG,EAAQ,QAASN,EAAgB,CACpC,KAAM,QACN,SAAU,GACV,kBAAmB,CACvB,CAAK,EACL","x_google_ignoreList":[0]}