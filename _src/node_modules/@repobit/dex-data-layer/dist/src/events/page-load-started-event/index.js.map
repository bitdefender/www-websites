{"version":3,"file":"index.js","sources":["../../../../../../../../node_modules/@repobit/dex-data-layer/dist/src/events/page-load-started-event/index.js"],"sourcesContent":["import { UserAgent } from \"@repobit/dex-utils\";\nimport { getCurrentDate, getCurrentTime } from '../utils.js';\nexport class PageLoadStartedEvent {\n    event = 'page load started';\n    pageInstanceID;\n    page;\n    constructor(page, pageInfo, pageAttributes = {}) {\n        this.pageInstanceID = page.environment;\n        const [section = '', subSection = '', subSubSection = '', subSubSubSection = ''] = pageInfo.name.split(':');\n        const topLevelDomain = window.location.hostname.split('.').splice(1, 2)\n            .join('.');\n        this.page = {\n            info: {\n                ...pageInfo,\n                section,\n                subSection,\n                subSubSection,\n                subSubSubSection,\n                destinationURL: window.location.href,\n                queryString: window.location.search,\n                referringURL: page.getParamValue('ref') || page.getParamValue('adobe_mc_ref') || document.referrer,\n                serverName: window.location.hostname,\n                sysEnv: UserAgent.os || '',\n                language: page.locale\n            },\n            attributes: {\n                promotionID: page.getParamValue('pid') || '',\n                internalPromotionID: page.getParamValue('icid') || '',\n                trackingID: page.getParamValue('cid') || '',\n                time: getCurrentTime(),\n                date: getCurrentDate(),\n                domain: topLevelDomain,\n                domainPeriod: window.location.hostname.split('.').length - 1,\n                ...pageAttributes\n            }\n        };\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":["PageLoadStartedEvent","page","pageInfo","pageAttributes","section","subSection","subSubSection","subSubSubSection","topLevelDomain","UserAgent","getCurrentTime","getCurrentDate"],"mappings":"yLAEO,MAAMA,CAAqB,CAC9B,MAAQ,oBACR,eACA,KACA,YAAYC,EAAMC,EAAUC,EAAiB,CAAA,EAAI,CAC7C,KAAK,eAAiBF,EAAK,YAC3B,KAAM,CAACG,EAAU,GAAIC,EAAa,GAAIC,EAAgB,GAAIC,EAAmB,EAAE,EAAIL,EAAS,KAAK,MAAM,GAAG,EACpGM,EAAiB,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,OAAO,EAAG,CAAC,EACjE,KAAK,GAAG,EACb,KAAK,KAAO,CACR,KAAM,CACF,GAAGN,EACH,QAAAE,EACA,WAAAC,EACA,cAAAC,EACA,iBAAAC,EACA,eAAgB,OAAO,SAAS,KAChC,YAAa,OAAO,SAAS,OAC7B,aAAcN,EAAK,cAAc,KAAK,GAAKA,EAAK,cAAc,cAAc,GAAK,SAAS,SAC1F,WAAY,OAAO,SAAS,SAC5B,OAAQQ,EAAU,IAAM,GACxB,SAAUR,EAAK,MAClB,EACD,WAAY,CACR,YAAaA,EAAK,cAAc,KAAK,GAAK,GAC1C,oBAAqBA,EAAK,cAAc,MAAM,GAAK,GACnD,WAAYA,EAAK,cAAc,KAAK,GAAK,GACzC,KAAMS,EAAgB,EACtB,KAAMC,EAAgB,EACtB,OAAQH,EACR,aAAc,OAAO,SAAS,SAAS,MAAM,GAAG,EAAE,OAAS,EAC3D,GAAGL,CACnB,CACS,CACT,CACA","x_google_ignoreList":[0]}