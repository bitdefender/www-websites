import{getMetadata as d,decorateIcons as w,loadBlocks as g}from"../../scripts/lib-franklin.js";import{getDomain as L}from"../../scripts/utils/utils.js";import{adobeMcAppendVisitorId as u}from"../../scripts/target.js";import{decorateMain as v}from"../../scripts/scripts.js";function y(o){o.querySelectorAll("picture").forEach(e=>{const n=e.nextElementSibling;n&&n.tagName==="A"&&n.href&&(n.innerHTML=e.outerHTML,e.replaceWith(n))})}function f(o){const t=o.target,e=t.nextElementSibling;t.classList.toggle("active"),e.classList.contains("open")?(e.addEventListener("transitionend",function n(){e.classList.contains("open")||e.classList.remove("visible"),e.removeEventListener("transitionend",n)}),e.classList.remove("open")):(e.classList.add("visible"),setTimeout(()=>{e.classList.add("open")},10))}function b(o){o.querySelectorAll("li").forEach(e=>{e.innerHTML.includes("selected")&&(e.classList.add("deactivated"),e.innerHTML=e.innerHTML.replace("(selected)",""))})}function m(o){const t=o.querySelector('a[href="#privacybutton"]');t&&(t.href="#",t.addEventListener("click",e=>{e.preventDefault(),window.UC_UI&&window.UC_UI.showSecondLayer()}))}async function S(o){const t=d("footer")||"/footer",e=await fetch(`${t}.plain.html`,window.location.pathname.endsWith("/footer")?{cache:"reload"}:{});if(e.ok){const n=await e.text(),r=document.createElement("div");r.innerHTML=n,y(r);const s=r.querySelectorAll("div > div > p");s[2].addEventListener("click",f),s[3].addEventListener("click",f);const c=r.querySelectorAll("div > div > ul");b(c[3]),w(r),o.append(r),m(r),u("footer")}}async function k(o){const t=d("footer")||"/footer",e=await fetch(`${t}.plain.html`),n=document.createElement("main");e.ok&&(n.innerHTML=await e.text(),v(n),await g(n));const r=o.closest(".footer-wrapper");if((window.location.href.indexOf("scuderiaferrari")!==-1||window.location.href.indexOf("spurs")!==-1)&&(o.closest(".footer-wrapper").id="footer-ferrari"),n){const c=n.querySelectorAll(":scope .section");c&&r.replaceChildren(...c)}[[/\[year\]/g,new Date().getFullYear()],[/>Twitter Bitdefender</,'><img alt="x" src="/_src/icons/twitter.svg" /><'],[/>Linkedin Bitdefender</,'><img alt="linkedin" src="/_src/icons/linkedin.svg" /><'],[/>Facebook Bitdefender</,'><img alt="facebook" src="/_src/icons/facebook.svg" /><'],[/>Youtube Bitdefender</,'><img alt="youtube" src="/_src/icons/youtube.svg" /><']].forEach(([c,a])=>{r.innerHTML=r.innerHTML.replace(c,a)}),m(r),u("footer")}async function E(){const o=window.location.hostname.includes(".aem.")||window.location.hostname.includes("localhost")?"https://www.bitdefender.com":"",t=L();let e;if(t==="en-us")e="en";else if(t.includes("-global")){const[i]=t.split("-");e=i}else e=t.split("-").join("_");const n=await fetch(`${o}/content/experience-fragments/bitdefender/language_master/${e}/footer-fragment-v1/master/jcr:content/root.html`);if(!n.ok)return;const r=await n.text(),s=document.createElement("footer"),c=s.attachShadow({mode:"open"}),a=document.createElement("div");a.innerHTML=r;const p=[];a.querySelectorAll("link").forEach(i=>{i.href=`${o}${i.getAttribute("href")}`,i.rel="stylesheet",p.push(new Promise((l,h)=>{i.onload=()=>{l()},i.onerror=()=>{h()}}))}),["footer"].forEach(i=>{window.addEventListener(i,()=>{window[i](c)})}),a.querySelectorAll("script").forEach(i=>{if(!i.src.includes("runtime")){const l=document.createElement("script");l.src=`${o}${i.getAttribute("src")}`,l.defer=!0,c.appendChild(l)}}),c.appendChild(a),document.querySelector("footer").replaceWith(s)}function M(o,t){switch(o){case"landingpage":k(t);break;case"franklinFooter":S(t);break;case"hidden":break;default:E();break}}async function q(o){const t=d("footer-type");o.parentNode.classList.add(t||"default"),o.textContent="",M(t,o)}export{q as default};
//# sourceMappingURL=footer.js.map
