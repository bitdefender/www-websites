function m(n,a){const e=new URLSearchParams(n.search),t="&muted=1&autoplay=0&enablejsapi=1";let o=e.get("v")?encodeURIComponent(e.get("v")):"";const s=n.pathname;n.origin.includes("youtu.be")&&([,o]=n.pathname.split("/"));const l=document.createElement("dialog");l.classList.add("modal-container");const c=document.createElement("div");c.classList.add("modal-content"),l.appendChild(c);const d=()=>l.close(),r=document.createElement("div");r.classList.add("modal-close"),c.append(r);const i=document.createElement("iframe");return i.width=783,i.height=440,i.src=`https://www.youtube.com${o?`/embed/${o}?rel=0&v=${o}${t}`:s}`,i.title="YouTube video player",i.frameborder=0,i.allow="autoplay; fullscreen; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",i.allowFullscreen=!0,i.loading="lazy",c.appendChild(i),r.addEventListener("click",()=>{i.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"),d()}),l}function u(n){n.querySelectorAll("picture").forEach(a=>{if(a.closest("div.block")&&a.parentElement.tagName!=="DIV"){const e=a.parentNode.nextElementSibling;if(e){const t=e.querySelector("a"),o=t?.textContent;if(t&&o.startsWith("https://")&&o.includes("fragments")){t.innerHTML="",t.className="video-placeholder",t.appendChild(a);const s=document.createElement("span");s.className="video-placeholder-play",t.appendChild(s),t.addEventListener("click",async c=>{c.preventDefault()});const l=t.parentElement;l.childNodes.length===1&&(l.tagName==="P"||l.tagName==="DIV")&&l.classList.add("modal-video-container");return}if(t&&o.startsWith("https://")){t.innerHTML="",t.className="linked-image";const s=a.parentNode;t.append(a),s.children.length===0&&s.parentNode.removeChild(s);const l=t.parentElement;l.childNodes.length===1&&(l.tagName==="P"||l.tagName==="DIV")&&l.classList.add("linked-image-container")}}}})}function p(n){const a=e=>e.innerHTML.startsWith("<")?`${e.querySelector("span.icon")?.outerHTML||""}<span class="button-text">${e.textContent}</span>`:`<span class="button-text">${e.textContent}</span>${e.querySelector("span.icon")?.outerHTML||""}`;n.querySelectorAll("a").forEach(e=>{if(!(e.closest(".nav-brand")||e.closest(".nav-sections"))&&(e.title=e.title||e.textContent,e.href!==e.textContent)){const t=e.parentElement,o=e.parentElement.parentElement,s=e.parentElement.parentElement?.parentElement;if(!e.querySelector("img")){if(t.childNodes.length===1&&t.tagName==="STRONG"&&o.childNodes.length===1&&o.tagName==="P"){e.className="button primary",o.classList.add("button-container"),t.replaceWith(e),e.innerHTML=a(e);return}if(t.childNodes.length===1&&t.tagName==="EM"&&o.childNodes.length===1&&o.tagName==="STRONG"&&s?.childNodes.length===1&&s?.tagName==="P"){e.className="button secondary",s.classList.add("button-container"),t.replaceWith(e),e.innerHTML=a(e);return}if(t.childNodes.length===1&&t.tagName==="P"&&e.href.includes("/fragments/")){e.className="button modal",t.classList.add("button-container");return}if(t.childNodes.length===3&&t.tagName==="P"&&e.nextElementSibling?.tagName==="EM"){e.className="button",t.classList.add("button-container"),e.innerHTML=a(e),e.dataset.modal=e.nextSibling.textContent.trim().slice(1,-1),e.nextSibling.remove();return}if(t.childNodes.length===1&&t.tagName==="P"&&t.innerText.startsWith("?")){e.className="info-button modal",t.classList.add("info-button-container"),e.textContent=e.textContent.slice(1).trim(),e.title=e.title.slice(1).trim();return}t.childNodes.length===1&&(t.tagName==="P"||t.tagName==="DIV")&&(e.className="button",t.classList.add("button-container"),e.innerHTML=a(e))}}})}async function h(n,a){const{videoUrl:e}=n.closest(".section").dataset;if(a){n=n.querySelector(".block"),u(n),p(n);const o=n.querySelector(".video-placeholder");n.appendChild(m(new URL(e)));const s=n.querySelector("dialog");o.addEventListener("click",()=>{s.showModal()})}const t=n.querySelector("a.button");t&&t.classList.add("blue"),window.dispatchEvent(new CustomEvent("shadowDomLoaded"),{bubbles:!0,composed:!0})}export{h as default};
//# sourceMappingURL=bitdefender-central.js.map
