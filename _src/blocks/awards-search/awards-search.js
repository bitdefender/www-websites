import{createOptimizedPicture as L}from"../../scripts/lib-franklin.js";let o=[],s=[],c=[];function E(t,e){const n=document.createElement("div");if(n.classList.add("award-item-container"),e.Logo){const r=document.createElement("div");r.classList.add("award-logo"),r.append(L(e.Logo,e.Title)),n.append(r)}const a=document.createElement("div");a.classList.add("award-item-description");const i=document.createElement("h2");i.append(e.Title),a.append(i);const d=document.createElement("p");if(d.append(e.Description),a.append(d),e.Link){const r=document.createElement("a");r.innerHTML="Read More",r.href=e.Link,a.append(r)}n.append(a),t.appendChild(n)}function h(t){const e=document.createElement("div");e.classList.add("award-results-filters-container"),t.append(e)}function w(t){const e=t.querySelector(".awards-results-container");e.innerHTML="",h(e)}function l(t,e){const n=t.querySelector(".awards-results-container");e.forEach(a=>{E(n,a)})}function f(t){if(c.length===0)return;const e=t.querySelector(".award-results-filters-container");c.forEach(a=>{const i=document.createElement("div");i.append(a),e.append(i)});const n=document.createElement("a");n.addEventListener("click",()=>{c=[],[...t.querySelectorAll(".accordion-item-content input")].forEach(d=>{d.checked=!1}),s=[...o];const i=t.querySelector(".awards-results-container");i&&(i.innerHTML=""),f(t),l(t,s)}),n.innerText="Clear All",e.append(n)}function y(t){w(t),f(t),c.length>0?(s=o.filter(e=>c.includes(e.Year)),l(t,s)):(s=o,l(t,o))}function x(t,e){e.target.checked?c.push(e.target.value):c.includes(e.target.value)&&(c=c.filter(n=>n!==e.target.value)),y(t)}function S(t){const e=document.createElement("div");e.classList.add("awards-results-container"),h(e),t.appendChild(e)}function A(t,e){const n=document.createElement("div");n.classList.add("accordion-item-content");const a=e.map(r=>r.Year);[...new Set(a)].forEach(r=>{const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("value",r),u.addEventListener("click",x.bind(null,t));const p=document.createElement("label");p.append(u),p.append(r),n.append(p)});const d=t.querySelector(".accordion > div");d&&(window.window.innerWidth>=768&&d.classList.add("expanded"),d.appendChild(n))}async function v(t){const e=t.querySelector("a");o=[...(await(await fetch(e.href)).json()).data],s=[...o],A(t,o),l(t,s)}function m(t,e){const n=t.value;if(w(e),f(e),n.length===0){l(e,s);return}const a=s.filter(i=>i.Title.match(new RegExp(`${n}`,"i")));l(e,a)}function C(t){const e=document.createElement("input");e.classList.add("text-box-wrapper"),e.setAttribute("type","text"),e.setAttribute("placeholder","Search Awards"),e.addEventListener("keyup",m.bind(null,e,t));const n=document.createElement("button");n.classList.add("text-box-search-magnifing-glass"),n.setAttribute("aria-label","Search"),n.setAttribute("role","button"),e.after(n),n.addEventListener("click",m.bind(null,e,t));const a=t.querySelector(".award-search-filter-wrapper");a.appendChild(e),a.appendChild(n)}function g(t){[...t.children].forEach(e=>{e.innerHTML.includes("awards.json")&&e.remove()})}function T(t){const e=document.querySelector(".accordion-wrapper"),n=document.createElement("div");n.classList.add("award-search-filter-wrapper"),t.append(n),C(t),n.append(e)}async function B(t){T(t),S(t),v(t),g(t)}export{B as default};
//# sourceMappingURL=awards-search.js.map
