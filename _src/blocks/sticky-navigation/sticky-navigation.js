import{STICKY_NAVIGATION_DATASET_KEY as l}from"../../scripts/lib-franklin.js";function s(e){const t=document.getElementById(e);if(t){const n=t.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:n,behavior:"smooth"})}}function a(){const e=document.createElement("div");return e.className="mobile-dropdown",e.addEventListener("click",t=>{t.preventDefault(),e.classList.toggle("opened")}),e}function d(e){if(!e.id)return null;const t=e.dataset[l];if(!t)return null;const n=document.createElement("li"),i=document.createElement("a");return i.href=`#${e.id}`,i.title=t,i.innerText=t,n.appendChild(i),n.addEventListener("click",o=>{o.preventDefault(),s(e.id)}),n}function u(){const e=document.createElement("ul"),t=Array.from(document.querySelectorAll(".section[id]")).map(d).filter(Boolean);return e.append(...t),e}function m(e){const t=document.createElement("div");t.classList.add("menu-with-button");const n=a(),i=u();t.appendChild(i),i.addEventListener("click",c=>{c.target.closest("ul").querySelectorAll("li").forEach(r=>{r.classList.remove("opened")}),c.target.closest("li").classList.toggle("opened"),n.classList.toggle("opened")}),n.innerText=i.querySelector("li").innerText;const o=e.querySelector(".button-container");return o&&(o.addEventListener("click",()=>{window.adobeDataLayer.push({event:"click",asset:"sticky-buy"})}),t.appendChild(o)),e.replaceChildren(n),e.appendChild(t),e}function f(e){const t=document.querySelector(".sticky-navigation-container")?.offsetTop;t&&(window.scrollY>=t?e.classList.add("fixed-nav"):e.classList.remove("fixed-nav"))}function p(e){return Array.from(e).reduce((t,n)=>{const i=n.getBoundingClientRect().top,o=n.getBoundingClientRect().bottom;return i<115&&o>0?n:t},null)}function v(e){const t=document.querySelectorAll(".section[id]"),n=e.querySelector(".mobile-dropdown"),i=p(t),o=e.querySelector("li.active");if(i){const c=e.querySelector(`li a[href="#${i.id}"]`);if(c){const r=c.parentElement;r.classList.add("active"),n.innerText=r.innerText,o&&!o.isSameNode(r)&&o.classList.remove("active")}else o&&o.classList.remove("active")}else o&&o.classList.remove("active")}function y(e){f(e),v(e)}function L(e){const t=m(e);document.addEventListener("scroll",()=>y(t))}export{L as default};
//# sourceMappingURL=sticky-navigation.js.map
