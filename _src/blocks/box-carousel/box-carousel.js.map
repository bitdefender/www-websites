{"version":3,"file":"box-carousel.js","sources":["../../../src/blocks/box-carousel/box-carousel.js"],"sourcesContent":["import { debounce } from '@repobit/dex-utils';\nimport { decorateIcons } from '../../scripts/lib-franklin.js';\nimport { isView } from '../../scripts/utils/utils.js';\n\nexport default async function decorate(block) {\n  const [titleEl, ...slides] = [...block.children];\n  let currentSlideIndex = 0;\n\n  const countItems = slides.length;\n  let countClass = `has-${countItems}-items`;\n  if (countItems > 3 && countItems < 7) {\n    countClass = 'has-3-7-items';\n  }\n  if (countItems > 7) {\n    countClass = 'has-more-items';\n  }\n  block.classList.add(countClass);\n\n  const isTestimonials = block.closest('.section').classList.contains('testimonials');\n\n  const carouselItemStyle = {\n    margin: 20,\n  };\n\n  function isFirstIndex() {\n    return currentSlideIndex === 0;\n  }\n\n  function isLastIndex() {\n    return currentSlideIndex === slides.length - 3;\n  }\n\n  function scrollCarousel(offset, carousel) {\n    const carouselItem = block.querySelector('.carousel-item');\n    carousel.style.transform = `translateX(${-1 * offset * (carouselItem.offsetWidth + carouselItemStyle.margin)}px)`;\n  }\n\n  function getCarousel() {\n    return block.querySelector('.carousel');\n  }\n\n  function updateDisabledArrow() {\n    const leftArrowEl = block.querySelector('.left-arrow');\n    const rightArrowEl = block.querySelector('.right-arrow');\n\n    leftArrowEl.classList.remove('disabled');\n    rightArrowEl.classList.remove('disabled');\n\n    if (isLastIndex()) {\n      block.querySelector('.right-arrow').classList.add('disabled');\n      return;\n    }\n\n    if (isFirstIndex()) {\n      block.querySelector('.left-arrow').classList.add('disabled');\n    }\n  }\n\n  function leftArrowHandler(e) {\n    e.preventDefault();\n    if (isFirstIndex()) {\n      return;\n    }\n    currentSlideIndex -= 1;\n    scrollCarousel(currentSlideIndex, getCarousel());\n    updateDisabledArrow(currentSlideIndex);\n  }\n\n  function rightArrowHandler(e) {\n    e.preventDefault();\n    if (isLastIndex()) {\n      return;\n    }\n    currentSlideIndex += 1;\n    scrollCarousel(currentSlideIndex, getCarousel());\n    updateDisabledArrow(currentSlideIndex);\n  }\n\n  function renderArrows() {\n    block.classList.remove('scrollable');\n\n    if (isView('desktop')) {\n      const cardsNotFullyVisible = window.innerWidth > 767;\n      return cardsNotFullyVisible ? `\n      <a href class=\"arrow disabled left-arrow\">\n        <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 752 752\" preserveAspectRatio=\"xMidYMid meet\">\n          <g transform=\"translate(0,752) scale(0.1,-0.1)\">\n            <path fill=\"#000\" d=\"M4415 5430 c-92 -20 -148 -113 -125 -203 10 -37 83 -114 638 -669\n            l627 -628 -2011 0 -2011 0 -43 -23 c-73 -38 -108 -129 -79 -204 15 -42 68 -92\n            109 -103 22 -6 753 -10 2035 -10 l2000 0 -611 -604 c-354 -351 -618 -619 -628\n            -639 -70 -149 79 -302 222 -228 21 11 374 358 804 788 843 845 803 799 778\n            896 -10 37 -95 125 -788 820 -427 428 -788 784 -802 791 -35 18 -79 24 -115\n            16z\"></path>\n          </g>\n        </svg>\n      </a>\n      <a href class=\"arrow right-arrow\">\n        <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 752 752\" preserveAspectRatio=\"xMidYMid meet\">\n          <g transform=\"translate(0,752) scale(0.1,-0.1)\">\n            <path fill=\"#000\" d=\"M4415 5430 c-92 -20 -148 -113 -125 -203 10 -37 83 -114 638 -669\n            l627 -628 -2011 0 -2011 0 -43 -23 c-73 -38 -108 -129 -79 -204 15 -42 68 -92\n            109 -103 22 -6 753 -10 2035 -10 l2000 0 -611 -604 c-354 -351 -618 -619 -628\n            -639 -70 -149 79 -302 222 -228 21 11 374 358 804 788 843 845 803 799 778\n            896 -10 37 -95 125 -788 820 -427 428 -788 784 -802 791 -35 18 -79 24 -115\n            16z\"></path>\n          </g>\n        </svg>\n      </a>\n    ` : '';\n    }\n\n    block.classList.add('scrollable');\n    return '';\n  }\n\n  function render() {\n    block.classList.add('default-content-wrapper');\n\n    block.innerHTML = `\n    <div class=\"carousel-header\">\n      <div class=\"title\">${titleEl?.children[0]?.innerHTML}</div>\n      <div class=\"arrows d-flex\">${renderArrows()}</div>\n    </div>\n\n    <div class=\"carousel-container\">\n        <div class=\"carousel\">\n          ${slides.map((slide) => `\n            <div class=\"carousel-item\">\n                ${isTestimonials ? `\n                  <div class=\"img-container\">\n                    ${slide.children[0]?.children[0]?.innerHTML}\n                  </div>\n                ` : slide.children[0]?.children[0]?.innerHTML}\n\n                <p class=\"title\">\n                    ${slide.children[0]?.children[1]?.textContent}\n                </p>\n\n                ${isTestimonials ? `\n                  <div class=\"subtitle-secondary\">\n                    ${slide.children[0]?.children[2]?.innerHTML}\n                  </div>\n\n                  <div class=\"subtitle\">\n                    ${slide.children[0]?.children[3]?.innerHTML}\n                  </div>\n                ` : `\n                   <div class=\"subtitle\">\n                      ${slide.children[0]?.children[2]?.innerHTML}\n                   </div>\n                `}\n            </div>\n          `).join('')}\n        </div>\n    </div>\n  `;\n\n    decorateIcons(block);\n\n    const leftArrowEl = block.querySelector('.left-arrow');\n    const rightArrowEl = block.querySelector('.right-arrow');\n\n    if (leftArrowEl && rightArrowEl) {\n      leftArrowEl.removeEventListener('click', leftArrowHandler);\n      rightArrowEl.removeEventListener('click', rightArrowHandler);\n\n      leftArrowEl.addEventListener('click', leftArrowHandler);\n      rightArrowEl.addEventListener('click', rightArrowHandler);\n    }\n  }\n\n  render();\n\n  window.addEventListener('resize', debounce(render, 250));\n}\n"],"names":[],"mappings":";;;;;AAIe,eAAe,QAAQ,CAAC,KAAK,EAAE;AAC9C,EAAE,MAAM,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC;AAClD,EAAE,IAAI,iBAAiB,GAAG,CAAC;;AAE3B,EAAE,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM;AAClC,EAAE,IAAI,UAAU,GAAG,CAAC,IAAI,EAAE,UAAU,CAAC,MAAM,CAAC;AAC5C,EAAE,IAAI,UAAU,GAAG,CAAC,IAAI,UAAU,GAAG,CAAC,EAAE;AACxC,IAAI,UAAU,GAAG,eAAe;AAChC;AACA,EAAE,IAAI,UAAU,GAAG,CAAC,EAAE;AACtB,IAAI,UAAU,GAAG,gBAAgB;AACjC;AACA,EAAE,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;;AAEjC,EAAE,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC;;AAErF,EAAE,MAAM,iBAAiB,GAAG;AAC5B,IAAI,MAAM,EAAE,EAAE;AACd,GAAG;;AAEH,EAAE,SAAS,YAAY,GAAG;AAC1B,IAAI,OAAO,iBAAiB,KAAK,CAAC;AAClC;;AAEA,EAAE,SAAS,WAAW,GAAG;AACzB,IAAI,OAAO,iBAAiB,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC;AAClD;;AAEA,EAAE,SAAS,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE;AAC5C,IAAI,MAAM,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,gBAAgB,CAAC;AAC9D,IAAI,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,WAAW,EAAE,GAAE,GAAG,MAAM,IAAI,YAAY,CAAC,WAAW,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC;AACrH;;AAEA,EAAE,SAAS,WAAW,GAAG;AACzB,IAAI,OAAO,KAAK,CAAC,aAAa,CAAC,WAAW,CAAC;AAC3C;;AAEA,EAAE,SAAS,mBAAmB,GAAG;AACjC,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC;AAC1D,IAAI,MAAM,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC;;AAE5D,IAAI,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC;AAC5C,IAAI,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC;;AAE7C,IAAI,IAAI,WAAW,EAAE,EAAE;AACvB,MAAM,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;AACnE,MAAM;AACN;;AAEA,IAAI,IAAI,YAAY,EAAE,EAAE;AACxB,MAAM,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;AAClE;AACA;;AAEA,EAAE,SAAS,gBAAgB,CAAC,CAAC,EAAE;AAC/B,IAAI,CAAC,CAAC,cAAc,EAAE;AACtB,IAAI,IAAI,YAAY,EAAE,EAAE;AACxB,MAAM;AACN;AACA,IAAI,iBAAiB,IAAI,CAAC;AAC1B,IAAI,cAAc,CAAC,iBAAiB,EAAE,WAAW,EAAE,CAAC;AACpD,IAAI,mBAAmB,CAAkB,CAAC;AAC1C;;AAEA,EAAE,SAAS,iBAAiB,CAAC,CAAC,EAAE;AAChC,IAAI,CAAC,CAAC,cAAc,EAAE;AACtB,IAAI,IAAI,WAAW,EAAE,EAAE;AACvB,MAAM;AACN;AACA,IAAI,iBAAiB,IAAI,CAAC;AAC1B,IAAI,cAAc,CAAC,iBAAiB,EAAE,WAAW,EAAE,CAAC;AACpD,IAAI,mBAAmB,CAAkB,CAAC;AAC1C;;AAEA,EAAE,SAAS,YAAY,GAAG;AAC1B,IAAI,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC;;AAExC,IAAI,IAAI,MAAM,CAAC,SAAS,CAAC,EAAE;AAC3B,MAAM,MAAM,oBAAoB,GAAG,MAAM,CAAC,UAAU,GAAG,GAAG;AAC1D,MAAM,OAAO,oBAAoB,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,GAAG,EAAE;AACV;;AAEA,IAAI,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC;AACrC,IAAI,OAAO,EAAE;AACb;;AAEA,EAAE,SAAS,MAAM,GAAG;AACpB,IAAI,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,yBAAyB,CAAC;;AAElD,IAAI,KAAK,CAAC,SAAS,GAAG;AACtB;AACA,yBAAyB,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC;AAC3D,iCAAiC,EAAE,YAAY,EAAE,CAAC;AAClD;;AAEA;AACA;AACA,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AAClC;AACA,gBAAgB,EAAE,cAAc,GAAG;AACnC;AACA,oBAAoB,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;AAC/D;AACA,gBAAgB,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;;AAE7D;AACA,oBAAoB,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,WAAW;AACjE;;AAEA,gBAAgB,EAAE,cAAc,GAAG;AACnC;AACA,oBAAoB,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;AAC/D;;AAEA;AACA,oBAAoB,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;AAC/D;AACA,gBAAgB,CAAC,GAAG;AACpB;AACA,sBAAsB,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS;AACjE;AACA,gBAAgB,CAAC;AACjB;AACA,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AACrB;AACA;AACA,EAAE,CAAC;;AAEH,IAAI,aAAa,CAAC,KAAK,CAAC;;AAExB,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC;AAC1D,IAAI,MAAM,YAAY,GAAG,KAAK,CAAC,aAAa,CAAC,cAAc,CAAC;;AAE5D,IAAI,IAAI,WAAW,IAAI,YAAY,EAAE;AACrC,MAAM,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,gBAAgB,CAAC;AAChE,MAAM,YAAY,CAAC,mBAAmB,CAAC,OAAO,EAAE,iBAAiB,CAAC;;AAElE,MAAM,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,gBAAgB,CAAC;AAC7D,MAAM,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,CAAC;AAC/D;AACA;;AAEA,EAAE,MAAM,EAAE;;AAEV,EAAE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC1D;;;;"}