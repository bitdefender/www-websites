{"version":3,"file":"ribbon-counter.js","sources":["../../../src/blocks/ribbon-counter/ribbon-counter.js"],"sourcesContent":["/* eslint-disable camelcase, max-len */\nexport default function decorate(block) {\n  const parentSection = block.closest('.section');\n  const {\n    background_color, text_color, counter_ends_on, counter_headings, padding_top, padding_bottom, margin_top, margin_bottom,\n  } = parentSection.dataset;\n  const [, backgroundEl] = block.children;\n\n  if (background_color) parentSection.style.backgroundColor = background_color;\n  if (text_color) block.querySelector('*').style.color = text_color;\n  if (padding_top) block.style.paddingTop = `${padding_top}rem`;\n  if (padding_bottom) block.style.paddingBottom = `${padding_bottom}rem`;\n  if (margin_top) parentSection.style.marginTop = `${margin_top}rem`;\n  if (margin_bottom) parentSection.style.marginBottom = `${margin_bottom}rem`;\n\n  if (backgroundEl) {\n    const backgroundImgEl = backgroundEl.querySelector('img');\n    const backgroundImgSrc = backgroundImgEl?.getAttribute('src');\n\n    if (backgroundImgSrc) {\n      parentSection.style.backgroundImage = `url(\"${backgroundImgSrc}\")`;\n      // Remove the row after setting background\n      backgroundEl.remove();\n    }\n  }\n\n  if (counter_ends_on) {\n    const [daysLabel, hoursLabel, minsLabel, secLabel] = counter_headings ? counter_headings.split(',').map((v) => v.trim()) : ['d', 'h', 'm', 's'];\n\n    block.innerHTML = block.innerHTML.replace('[counter]', `\n      <strong class=\"ribbonCounter\"></strong>\n    `);\n\n    const countdownElement = block.querySelector('.ribbonCounter');\n    const targetDate = new Date(counter_ends_on).getTime();\n    let interval;\n\n    const updateCountdown = () => {\n      const now = new Date().getTime();\n      const distance = targetDate - now;\n\n      if (distance < 0) {\n        // countdownElement.innerHTML = \"Countdown ended!\";\n        parentSection.remove();\n        clearInterval(interval);\n        return;\n      }\n\n      const days = Math.floor(distance / (1000 * 60 * 60 * 24));\n      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n      countdownElement.innerHTML = `${days}${daysLabel} : ${hours}${hoursLabel} : ${minutes}${minsLabel} : ${seconds}${secLabel}`;\n    };\n\n    interval = setInterval(updateCountdown, 1000);\n    updateCountdown();\n  }\n}\n"],"names":[],"mappings":"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"}