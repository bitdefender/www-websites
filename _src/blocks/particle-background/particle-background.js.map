{"version":3,"mappings":"iIAWA,MACIA,SAEJ,QAAeC,EAAKC,MAElBC,EAAe,MAAMC,EAAA,4CAAO,6DAA6D,YAAC,qBAAE,SAE5FJ,GAAW,MAAMI,EAAA,wBAAAJ,CAAA,eAAO,0DAA0D,OAAC,uBAAE,IACrF,YAA2B,YAErBK,CAAc,aAAS,UAAc,YAC/B,UAAa,KAAMC,CAAkB,aAIjC,UAAc,UACRJ,EAAM,QAAQ,YACtB,kBAAc,mBAEpB,UAAc,kBAAc,kBAGH,cAAc,WAAc,qBAAsB,EAChE,QAAQG,QAE3B,WAAeE,CAAcC,EAAS,CACpC,OAAMR,CAAQG,CAAW,KAEzB,IAAMA,CAAY,SAAWG,EAAoB,QAAAE,CAAO,CAAE,CAC9D,CAuCE,SArCE,UAAW,KACT,GAAQ,CACN,MAAO,EACR,KACD,GAAO,MACL,CAAO,SACR,MACD,EAAO,CACL,SAAQ,CACR,UAAU,EACX,IACD,QACE,EAAM,QACP,EACD,QAAS,CACP,MAAO,MAET,KACE,MACE,IAAK,KACL,CAAK,CACN,MAEH,EAAM,CACJ,OAAQ,GACR,YAGJ,UAAY,MACV,CAAO,SACR,EACD,QAAS,CACP,YAEF,UAAY,CAAE,SAAe,CAC9B,QA2BY,aAAwBN,CAAOM,EAAS,CACrD,UAAkBA,CAAO,aAKlB,gBAAkB,iBAAY,WAAiB,CAAG,CACvD,UAAS,CACT,WACJ,CAAG,CACH","names":["loadAll","init","block","tsParticles","__vitePreload","particleDiv","particleIdSelector","loadParticles","options"],"ignoreList":[],"sources":["../../../src/blocks/particle-background/particle-background.js"],"sourcesContent":["/* eslint-disable prefer-const */\n/* eslint-disable camelcase */\n// import * as all from '../../scripts/vendor/tsparticles/tsparticles.bundle.min.js';\n// eslint-disable-next-line no-unused-vars\nimport { debounce } from '@repobit/dex-utils';\n\nfunction isView(viewport) {\n  const element = document.querySelectorAll(`[data-${viewport}-detector]`)[0];\n  return !!(element && getComputedStyle(element).display !== 'none');\n}\n\nlet tsParticles;\nlet loadAll;\n\nasync function init(block, aemOptions) {\n  // eslint-disable-next-line import/no-unresolved\n  tsParticles = (await import('https://cdn.jsdelivr.net/npm/@tsparticles/engine@3.7.1/+esm')).tsParticles;\n  // eslint-disable-next-line import/no-unresolved\n  loadAll = (await import('https://cdn.jsdelivr.net/npm/@tsparticles/all@3.7.1/+esm')).loadAll;\n  const particleIdSelector = 'ts-particles';\n\n  const particleDiv = document.createElement('div');\n  particleDiv.setAttribute('id', particleIdSelector);\n\n  if (aemOptions) {\n    // eslint-disable-next-line no-param-reassign\n    block = block.querySelector('.block');\n    const blockParent = block.closest('.section');\n    blockParent.classList.add('we-container');\n  } else {\n    block.parentElement.classList.add('we-container');\n  }\n\n  const particleBackground = block.parentElement.querySelector('.particle-background');\n  particleBackground.prepend(particleDiv);\n\n  async function loadParticles(options) {\n    await loadAll(tsParticles);\n\n    await tsParticles.load({ id: particleIdSelector, options });\n  }\n  const options = {\n    particles: {\n      number: {\n        value: 20,\n      },\n      color: {\n        value: '#ffffff',\n      },\n      links: {\n        enable: true,\n        distance: 200,\n      },\n      shape: {\n        type: 'circle',\n      },\n      opacity: {\n        value: 0.6,\n      },\n      size: {\n        value: {\n          min: 2,\n          max: 4,\n        },\n      },\n      move: {\n        enable: true,\n        speed: 0.5,\n      },\n    },\n    background: {\n      color: '#016DFF',\n    },\n    poisson: {\n      enable: true,\n    },\n    fullScreen: { enable: false },\n  };\n\n  await loadParticles(options);\n}\n\n// eslint-disable-next-line no-unused-vars\nasync function checkForMobile() {\n  const isMobileView = isView('mobile');\n  if (isMobileView && (!tsParticles && !loadAll)) {\n    return;\n  }\n\n  if (isMobileView && tsParticles) {\n    const particles = tsParticles.domItem(0);\n    particles.pause();\n    return;\n  }\n\n  if (!isMobileView && (!tsParticles && !loadAll)) {\n    await init();\n    return;\n  }\n\n  const particles = tsParticles.domItem(0);\n  particles.play();\n}\n\nexport default async function decorate(block, options) {\n  await init(block, options);\n\n  // uncomment this line if you want the bubbles to stop moving on mobile\n  // window.addEventListener('resize', debounce(checkForMobile, 250));\n\n  window.dispatchEvent(new CustomEvent('shadowDomLoaded'), {\n    bubbles: true,\n    composed: true, // This allows the event to cross the shadow DOM boundary\n  });\n}\n"],"file":"blocks/particle-background/particle-background.js"}