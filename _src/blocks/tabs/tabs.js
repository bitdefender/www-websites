import{readBlockConfig as p}from"../../scripts/lib-franklin.js";function b(){return!window.matchMedia("(min-width: 900px)").matches}function f(e){e.style.height=`${e.scrollHeight}px`;const t=()=>{e.removeEventListener("transitionend",t),e.style.height="auto"};e.addEventListener("transitionend",t),e.classList.add("expanded")}function g(e){e.style.height=`${e.scrollHeight}px`,requestAnimationFrame(()=>{e.classList.remove("expanded"),e.style.height=0})}function h(e){const t=e.nextElementSibling;e.classList.contains("opened")?(g(t),e.classList.remove("opened")):(f(t),e.classList.add("opened"))}function v(e){const t=document.createElement("div");t.classList.add("tabs-navigation"),e.appendChild(t);const d=document.createElement("div");d.classList.add("dropdown-menu"),t.appendChild(d);const i=document.createElement("ul");return i.setAttribute("role","tablist"),b()||i.classList.add("expanded"),t.appendChild(i),d.addEventListener("click",a=>{a.preventDefault(),h(d)}),{dropDownMenu:d,$ul:i}}function L(e){const t=p(e);e.innerHTML="";const d=t["tab-group"]?`[data-tab-group="${t["tab-group"]}"][data-tab]`:"[data-tab]",i=[],{dropDownMenu:a,$ul:o}=v(e);return[...document.querySelectorAll(d)].forEach((r,s)=>{const u=r.dataset.tab,m=u.toLowerCase().trim(),c=document.createElement("li");c.classList.add("tab"),c.setAttribute("role","tab"),c.setAttribute("tabindex",s===0?"0":"-1"),c.setAttribute("aria-selected",s===0?"true":"false"),c.setAttribute("id",`tab-${s}`),c.innerText=u,o.appendChild(c);const l=document.createElement("div");l.classList.add("tab-item"),l.classList.add("hidden"),l.setAttribute("role","tabpanel"),l.setAttribute("aria-labelledby",`tab-${s}`),l.append(...r.children),e.appendChild(l),r.remove(),s===0&&(c.classList.add("active"),l.classList.remove("hidden"),a.innerText=u),i.push({name:m,$tab:c,$content:l})}),i}function E(e){const t=L(e),d=e.querySelector(".dropdown-menu");function i(a,{toggleDropdown:o=!0}={}){t.forEach((n,r)=>{const s=r===a;n.$tab.setAttribute("aria-selected",s?"true":"false"),n.$tab.setAttribute("tabindex",s?"0":"-1"),n.$tab.classList.toggle("active",s),n.$content.classList.toggle("hidden",!s)}),t[a].$tab.focus(),d.innerText=t[a].$tab.innerText,b()&&o&&h(d)}t.forEach((a,o)=>{a.$tab.addEventListener("click",()=>{a.$tab.getAttribute("aria-selected")!=="true"&&i(o)}),a.$tab.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),i(o))})}),e.addEventListener("keydown",a=>{const o=document.activeElement;if(o.getAttribute("role")!=="tab")return;const n=t.findIndex(s=>s.$tab===o);let r=n;switch(a.key){case"ArrowRight":r=(n+1)%t.length;break;case"ArrowLeft":r=(n-1+t.length)%t.length;break;case"Home":r=0;break;case"End":r=t.length-1;break;default:return}a.preventDefault(),i(r,{toggleDropdown:!1})})}export{L as createTabs,E as default};
//# sourceMappingURL=tabs.js.map
