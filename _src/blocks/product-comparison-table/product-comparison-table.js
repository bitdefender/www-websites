import{createNanoBlock as x,renderNanoBlocks as E,matchHeights as u}from"../../scripts/utils/utils.js";x("priceComparison",(e,t,n,r,i,a)=>{a.setAttribute("data-store-id",e),a.setAttribute("data-store-option",t),a.setAttribute("data-store-department","consumer"),a.setAttribute("data-store-event","product-comparison"),a.setAttribute("data-store-context","");const s=document.createElement("div");s.classList.add("product-comparison-price");const d=r.closest(".section").dataset.old_price_text??"",f=r.closest(".section").dataset.new_price_label??"",m=r.closest(".section").dataset.save_text??"",o=document.createElement("p");s.appendChild(o),o.innerText="-",o.classList.add("old-price-container");const c=document.createElement("strong");s.appendChild(c),c.innerText="-",c.classList.add("current-price-container");const p=document.createElement("p");if(s.appendChild(p),e.includes("free"))return o.innerHTML=`
     <div class="old-price-box">
      </div>
    `,c.innerHTML=`<div class="new-price-box">
      <span class="await-loader total-text">${n} </span>
      <sup class="per-price"> </sup>
    </div>`,p.innerHTML="<p><p>",s;o.innerHTML=`
    <div class="old-price-box">
      <span  data-store-hide="no-price=discounted;type=visibility">${d} <del data-store-price="full"></del></span>
      <span class="savings d-none" data-store-hide="no-price=discounted;type=visibility"><span data-store-discount="percentage"></span> ${m}</span>
    </div>`,c.innerHTML=`
    <div class="new-price-box">
      <span class="await-loader total-text" data-store-price="discounted||full"> </span>
      <sup class="per-price"> ${f} </sup>
    </div>`,p.innerHTML=n;const l=a.querySelector(".button-container a");return(l.href.includes("/buy/")||l.href.includes("#buylink"))&&(l.href="#",l.setAttribute("data-store-buy-link","")),s});function L(e,t,n){n.currentTarget.classList.toggle("expanded"),n.currentTarget.nextElementSibling.classList.toggle("expanded"),n.currentTarget.nextElementSibling.classList.toggle("collapsed"),[...e].forEach((r,i)=>{r.classList.contains("expanded")&&i!==t&&(r.classList.remove("expanded"),r.classList.add("collpased"),r.nextElementSibling.classList.remove("expanded"),r.nextElementSibling.classList.add("collapsed"))})}function b(e,t){if(!t||t.length===0)return;let n=0;e.forEach((r,i)=>{const a=t.indexOf(i);if(a!==-1||i===0){n=t[a];return}r.setAttribute("expandable-row-index",n)}),t.forEach(r=>{const i=[...e].filter(s=>s.getAttribute("expandable-row-index")===`${r}`),a=document.createElement("div");a.classList.add("hidden-rows-wrapper"),a.setAttribute("role","rowgroup"),a.append(...i),e[r].after(a)})}function g(e){e.forEach((t,n)=>{t.classList.contains("expandable-row")&&t.nextElementSibling!==null&&t.nextElementSibling.childElementCount>0&&!t.nextElementSibling.classList.contains("expandable-row")&&(t.classList.add("expandable-arrow"),t.nextElementSibling.classList.add("collapsed"),t.addEventListener("click",L.bind(null,e,n)))})}function y(e){const t=[];e.forEach((n,r)=>{n.querySelectorAll("h4").length===0||n.classList.contains("product-comparison-header")||(n.classList.add("expandable-row"),t.push(r))}),b(e,t),g(e)}function v(e){const t=e.querySelectorAll('div[role="row"]');y(t)}function A(e){e.setAttribute("role","table"),e.querySelectorAll("div").forEach(n=>{n.childElementCount>1&&n.parentElement.getAttribute("role")==="table"?n.setAttribute("role","row"):n.hasAttribute("role")||n.setAttribute("role","cell")}),[...e.querySelector("div > div").children].forEach(n=>{n.setAttribute("role","columnheader")})}function S(e){e.querySelectorAll("div").forEach(async t=>{if(t.textContent.match(/^yes/i)){t.textContent="";const n=document.createElement("div");n.classList.add("yes-check"),t.appendChild(n)}else if(t.textContent.match(/^no/i)){t.textContent="";const n=document.createElement("div");n.classList.add("no-check"),t.appendChild(n)}})}function h(e){e.children.length>0&&[...e.children].forEach(t=>{h(t)}),e.tagName==="STRONG"&&e.parentElement&&(e.parentElement.innerHTML=e.textContent)}function w(e){const t=e.querySelector("div > div");t.classList.add("product-comparison-header"),[...t.children].forEach(n=>{const r=n.querySelector("p.button-container");if(r){r.previousElementSibling?.classList.add("per-year-statement");const a=r.nextElementSibling;a?.classList.add("product-comparison-header-subtitle"),a?.nextElementSibling?.classList.add("product-comparison-header-subtitle")}})}function T(e){e.forEach(t=>{t.querySelectorAll(".button-container").forEach(n=>n.classList.add("red"))})}function C(e){const t=e.querySelectorAll('div[role="columnheader"]');[...t].filter(r=>[...r.children].length>1).length>2?e.classList.add("with-fixed-width"):[...t].forEach((r,i)=>{i!==0&&r.classList.add("column-fixed-width")})}function H(e){const t=e.querySelectorAll('div[role="columnheader"]'),n=[...t].findIndex(i=>i.innerHTML.includes("<strong>"));if(n<=0){T(t);return}[...e.querySelectorAll('div[role="row"]')].forEach(i=>i.children[n].classList.add("active"))}function q(e){const n=[...e.querySelectorAll('div[role="columnheader"]')].findIndex(i=>i.innerHTML.includes("<em>"));if(n<=0)return;[...e.querySelectorAll('div[role="row"]')].forEach(i=>i.children[n].classList.add("display-price-below"))}function R(e){e.removeAttribute("role"),[...e.children].forEach(t=>{(t.tagName==="H3"||t.innerText.match(/devices/i))&&t.remove()})}function P(e){const t=e.querySelector('div[role="row"]:last-of-type'),n=t.cloneNode(!0);n.classList.add("product-comparison-last-row-with-prices"),t.after(n),[...n.children].forEach((r,i)=>{if(r.innerHTML="",r.classList.contains("display-price-below")){const a=e.querySelector('div[role="row"]');if(a){const d=a.children[i].cloneNode(!0);R(d),r.appendChild(d)}}})}function B(e){A(e),S(e),v(e),C(e),H(e),q(e),w(e),e.querySelector('div[role="columnheader"] em')&&P(e),h(e);const t=[...e.children[0].children].slice(1),n=e.querySelector(".product-comparison-last-row-with-prices");[...t,n].forEach((r,i)=>{r&&E(r,void 0,i,e)}),u(e,"h3"),u(e,".old-price-container"),u(e,".product-comparison-price")}export{B as default};
//# sourceMappingURL=product-comparison-table.js.map
