{"version":3,"file":"products.js","sources":["../../../src/blocks/products/products.js"],"sourcesContent":["import { Constants } from '../../scripts/libs/constants.js';\nimport {\n  createNanoBlock,\n  renderNanoBlocks,\n  createTag,\n  matchHeights,\n  checkIfNotProductPage,\n} from '../../scripts/utils/utils.js';\n\n// all avaiable text variables\nconst TEXT_VARIABLES_MAPPING = [\n  {\n    variable: 'percent',\n    storeVariable: '{DISCOUNT_PERCENTAGE}',\n  },\n];\n\n/**\n * Nanoblock representing the plan selectors.\n * If only one plan is declared, the plan selector will not be visible.\n * @param plans The list of plans to display [ labelToDisplay, productCode, variantId, ... ]\n * @param defaultSelection The default selection.\n * @returns Root node of the nanoblock\n */\nfunction renderPlanSelector(plans, defaultSelection) {\n  // TODO: Remove unecessary div\n  const root = document.createElement('div');\n  const ul = document.createElement('ul');\n  ul.classList.add('variant-selector');\n  root.appendChild(ul);\n\n  if (plans.length === 3) {\n    ul.style.display = 'none';\n  }\n\n  for (let idx = 0; idx < plans.length - 2; idx += 3) {\n    const label = plans[idx];\n    const liStoreParameters = {};\n\n    if (Number(defaultSelection)) {\n      liStoreParameters['data-store-click-set-devices'] = label;\n    } else {\n      const productCode = plans[idx + 1];\n      const variation = plans[idx + 2];\n      liStoreParameters['data-store-click-set-product'] = '';\n      liStoreParameters['data-store-product-id'] = productCode;\n      liStoreParameters['data-store-department'] = 'consumer';\n      liStoreParameters['data-product-type'] = Constants.PRODUCT_ID_MAPPINGS[productCode].isMonthlyProduct ? 'monthly' : 'yearly';\n      liStoreParameters['data-store-product-option'] = variation;\n    }\n\n    const li = createTag(\n      'li',\n      liStoreParameters,\n      `<span>${label}</span>`,\n    );\n\n    // set the default selection\n    if (defaultSelection === label) {\n      li.classList.add('active');\n      li.checked = true;\n    }\n\n    li.addEventListener('click', () => {\n      const previousButtonActive = root.querySelector('.active');\n      if (previousButtonActive) {\n        previousButtonActive.classList.remove('active');\n        previousButtonActive.checked = false;\n      }\n      li.classList.add('active');\n      li.checked = true;\n    });\n\n    ul.appendChild(li);\n  }\n\n  return root;\n}\n\n/**\n * Nanoblock representing the old product price\n * @param text The text located before the price\n * @param monthly Show the monthly price if equal to 'monthly'\n * @returns Root node of the nanoblock\n */\nfunction renderOldPrice(text = '', monthly = '') {\n  // TODO: simplify CSS\n  const oldPrice = document.createElement('del');\n  if (monthly.toLowerCase() === 'monthly') {\n    oldPrice.setAttribute('data-store-price', 'full-monthly');\n  } else {\n    oldPrice.setAttribute('data-store-price', 'full');\n  }\n\n  const root = createTag(\n    'div',\n    {\n      'data-store-hide': 'no-price=discounted;type=visibility',\n      class: 'price await-loader',\n    },\n    `<span class='old-price'>${text} ${oldPrice.outerHTML}</span>`,\n  );\n\n  // insert text to mark monthly price\n  if (monthly.toLowerCase() === 'monthly') {\n    root.querySelector('.old-price').insertAdjacentHTML('beforeend', '<sup>/mo</sup>');\n  }\n\n  return root;\n}\n\n/**\n * Nanoblock representing the new product price\n * @param text The text located before the price\n * @param monthly Show the monthly price if equal to 'monthly'\n * @returns Root node of the nanoblock\n */\nfunction renderPrice(text = '', monthly = '', monthTranslation = 'mo') {\n  // TODO simplify CSS\n  const newPrice = document.createElement('strong');\n  if (monthly.toLowerCase() === 'monthly') {\n    newPrice.setAttribute('data-store-price', 'discounted-monthly||full-monthly');\n  } else {\n    newPrice.setAttribute('data-store-price', 'discounted||full');\n  }\n\n  const root = createTag(\n    'div',\n    {\n      class: 'price await-loader',\n    },\n    `<strong class='new-price'>${text} ${newPrice.outerHTML}</strong>`,\n  );\n\n  // insert text to mark monthly price\n  if (monthly.toLowerCase() === 'monthly') {\n    root.querySelector('.new-price').insertAdjacentHTML('beforeend', `<sup>/${monthTranslation}</sup>`);\n  }\n\n  return root;\n}\n\n/**\n * Renders the green section on top of the product card highlighting the potential savings\n * @param text Text to display\n * @param percent Show the saving in percentage if equals to `percent`\n * @returns Root node of the nanoblock\n */\nfunction renderHighlightSavings(text = 'Save', percent = '') {\n  const highlighSaving = document.createElement('span');\n  highlighSaving.setAttribute('data-store-text-variable', '');\n  highlighSaving.textContent = `${text} ${\n    percent.toLowerCase() === 'percent' ? '{DISCOUNT_PERCENTAGE}' : '{DISCOUNT_VALUE}'\n  }`;\n\n  const root = createTag(\n    'div',\n    {\n      'data-store-hide': 'no-price=discounted;type=visibility',\n      class: 'highlight await-loader',\n      style: 'display=none',\n    },\n    `${highlighSaving.outerHTML}`,\n  );\n\n  return root;\n}\n\n/**\n *\n * @param {string} text Text of the featured nanoblock\n * @return {string} Text with variables replaced\n */\nconst replaceVariablesInText = (text) => {\n  let replacedText = text;\n\n  // replace the percent variable with correct percentage of the produc\n  TEXT_VARIABLES_MAPPING.forEach((textVariableMapping) => {\n    replacedText = replacedText.replaceAll(\n      textVariableMapping.variable,\n      textVariableMapping.storeVariable,\n    );\n  });\n\n  return replacedText;\n};\n\n/**\n * Nanoblock representing a text to highlight in the product card\n * @param text Text to display\n * @returns Root node of the nanoblock\n */\nfunction renderHighlight(text) {\n  const updatedText = replaceVariablesInText(text);\n  return createTag(\n    'div',\n    {\n      class: 'highlight',\n      'data-store-text-variable': '',\n      'data-store-hide': 'no-price=discounted',\n    },\n    `<span>${updatedText}</span>`,\n  );\n}\n\n/**\n *\n * @param {string} text\n * @return {boolean} wether the text contains variables or not\n */\nconst checkIfTextContainsVariables = (text) => TEXT_VARIABLES_MAPPING.some(\n  (textVariableMapping) => text.includes(textVariableMapping.variable),\n);\n\n/**\n * Nanoblock representing a text to Featured\n * @param text Text of the featured nanoblock\n * @returns Root node of the nanoblock\n */\nfunction renderFeatured(text) {\n  const root = document.createElement('div');\n  root.setAttribute('data-store-text-variable', '');\n  root.classList.add('featured');\n  root.textContent = text;\n\n  if (checkIfTextContainsVariables(text)) {\n    root.classList.add('await-loader');\n    root.textContent = replaceVariablesInText(root.textContent);\n  }\n\n  return root;\n}\n\n/**\n * Nanoblock representing a text to Featured and the corresponding savings\n * @param text Text of the featured nanoblock\n * @param percent Show the saving in percentage if equals to `percent`\n * @returns Root node of the nanoblock\n */\nfunction renderFeaturedSavings(text = 'Save', percent = '') {\n  const featuredSaving = document.createElement('span');\n  featuredSaving.setAttribute('data-store-text-variable', '');\n  featuredSaving.textContent = `${text} ${\n    percent.toLowerCase() === 'percent' ? '{DISCOUNT_PERCENTAGE}' : '{DISCOUNT_VALUE}'\n  }`;\n\n  const root = createTag(\n    'div',\n    {\n      'data-store-hide': 'no-price=discounted;type=visibility',\n      class: 'featured',\n    },\n    `${featuredSaving.outerHTML}`,\n  );\n  root.classList.add('await-loader');\n\n  return root;\n}\n\n/**\n * Nanoblock representing the lowest product price\n * @returns root node of the nanoblock\n */\nfunction renderLowestPrice(...params) {\n  const filteredParams = params.filter((paramValue) => paramValue && (typeof paramValue !== 'object')).slice(-2);\n  const text = filteredParams.length > 1 ? filteredParams[1] : filteredParams[0];\n  const monthly = filteredParams.length > 1 ? filteredParams[0] : '';\n  const root = document.createElement('p');\n  const textArea = document.createElement('span');\n  root.classList.add('await-loader');\n  textArea.setAttribute('data-store-text-variable', '');\n  textArea.textContent = text.replace('0', monthly.toLowerCase() === 'monthly' ? '{SMALLEST_PRICE_PER_MONTH}' : '{SMALLEST_PRICE}');\n  root.appendChild(textArea);\n  return root;\n}\n\n/**\n * Nanoblock representing the price conditions below the Price\n * @param text Conditions\n * @returns Root node of the nanoblock\n */\nfunction renderPriceCondition(text) {\n  const updatedText = text.replace('BilledPrice', '<em data-store-price=\"discounted||full\" class=\"await-loader\"></em>');\n  return createTag(\n    'div',\n    {\n      class: 'price condition',\n    },\n    `<em>${updatedText}</em>`,\n  );\n}\n\n// declare nanoblocks\ncreateNanoBlock('plans', renderPlanSelector);\ncreateNanoBlock('price', renderPrice);\ncreateNanoBlock('oldPrice', renderOldPrice);\ncreateNanoBlock('priceCondition', renderPriceCondition);\ncreateNanoBlock('featured', renderFeatured);\ncreateNanoBlock('featuredSavings', renderFeaturedSavings);\ncreateNanoBlock('highlightSavings', renderHighlightSavings);\ncreateNanoBlock('highlight', renderHighlight);\ncreateNanoBlock('lowestPrice', renderLowestPrice);\n\n/**\n * Main decorate function\n */\nexport default function decorate(block) {\n  const metadata = block.closest('.section').dataset;\n  const plans = [];\n\n  Object.entries(metadata).forEach(([key, value]) => {\n    if (key.includes('plans')) {\n      const allImportantData = value.match(/[^,{}[\\]]+/gu).map((importantData) => importantData.trim());\n      plans.push({\n        productCode: allImportantData[1],\n        defaultVariant: `${Number(allImportantData.slice(-1)[0])\n          ? allImportantData.slice(-1)[0] : allImportantData[2].match(/[0-9-]+/g)[0]\n        }${allImportantData[2].match(/[0-9-]+/g)[1]}`,\n      });\n    }\n  });\n\n  block.parentElement.parentElement.setAttribute('data-store-context', '');\n  [...block.children].forEach((row, idxParent) => {\n    [...(row.children)].forEach((col, idxCol) => {\n      const plansIndex = idxParent * row.children.length + idxCol;\n\n      // set the store event on the component\n      let storeEvent = 'main-product-loaded';\n      if (checkIfNotProductPage()) {\n        storeEvent = 'product-loaded';\n      }\n\n      col.classList.add('product-card');\n      col.setAttribute('data-store-context', '');\n      if (plans[plansIndex]) {\n        col.setAttribute('data-store-id', plans[plansIndex].productCode);\n        col.setAttribute('data-store-option', plans[plansIndex].defaultVariant);\n      }\n      col.setAttribute('data-store-department', 'consumer');\n      col.setAttribute('data-store-event', storeEvent);\n      const cardButtons = col.querySelectorAll('.button-container a');\n      cardButtons?.forEach((button) => {\n        if (button.href?.includes('/buy/') || button.href?.includes('#buylink')) {\n          button.href = '#';\n          button.setAttribute('data-store-buy-link', '');\n        }\n      });\n      block.appendChild(col);\n      renderNanoBlocks(col, undefined, idxParent);\n    });\n    row.remove();\n  });\n\n  // render nanoblocks in section's content default wrapper\n  const defaultContent = block.parentNode.parentNode.querySelector('.default-content-wrapper');\n  if (defaultContent) {\n    renderNanoBlocks(defaultContent);\n  }\n\n  // style the product card if the author has added a featured card inside\n  [...block.querySelectorAll('.product-card .featured')].forEach((featured) => {\n    featured.closest('.product-card').classList.add('featured');\n  });\n\n  // add class to avoid using :has selector\n  block.querySelectorAll('.product-card li').forEach((li) => {\n    if (li.querySelector('del')) {\n      li.classList.add('with-del');\n    } else {\n      li.classList.remove('with-del');\n    }\n  });\n\n  block.querySelectorAll('.product-card ul').forEach((ul) => {\n    if (ul.previousElementSibling?.tagName === 'P') {\n      ul.previousElementSibling.classList.add('ul-header-text');\n    }\n  });\n\n  block.querySelectorAll('.product-card ul li u').forEach((li) => {\n    li.parentNode.classList.add('icon-important');\n  });\n\n  const paragraphs = block.querySelectorAll('.product-card.featured p');\n\n  // Iterate through each paragraph\n  paragraphs.forEach((paragraph) => {\n    // Check if the paragraph only contains span elements\n    const containsOnlySpans = Array.from(paragraph.childNodes).every((node) => node.nodeName === 'SPAN');\n\n    // If the paragraph only contains span elements, add a class\n    if (containsOnlySpans) {\n      paragraph.classList.add('os-availability');\n\n      if (paragraph.nextElementSibling.nodeName === 'P') {\n        paragraph.nextElementSibling.classList.add('os-availability-text');\n      }\n    }\n  });\n\n  // Height matching and Dynamic texts logic\n  const cards = block.querySelectorAll('.product-card');\n  const featuredCard = block.querySelector('.product-card.featured');\n  cards.forEach((card, cardIndex) => {\n    const hasImage = card.querySelector('img') !== null;\n    if (hasImage && !block.classList.contains('plans') && !block.classList.contains('compact')) {\n      // If the image exists, set max-width to the paragraph next to the image\n      const firstPElement = card.querySelector('p:not(:has(img, .icon))');\n      firstPElement.classList.add('img-adjacent-text');\n    }\n    const planSelector = card.querySelector('.variant-selector');\n    const dynamicPriceTextsKey = `dynamicPriceTexts${cardIndex + 1}`;\n    if (metadata[dynamicPriceTextsKey]) {\n      const dynamicPriceTexts = [...metadata[dynamicPriceTextsKey].split(',')];\n      const priceConditionEl = card.querySelector('.price.condition em');\n      planSelector?.querySelectorAll('li')?.forEach((option, idx) => {\n        option.addEventListener('click', () => {\n          if (option.classList.contains('active') && priceConditionEl && dynamicPriceTexts) {\n            const textTemplate = dynamicPriceTexts[idx] || '';\n            // in order to preserve the store eventListeners we can't replace the priceElement\n            // every time another option is selected therefore we're using a string template\n            if (textTemplate.includes('{BilledPrice}')) {\n              const [before, after] = textTemplate.split('{BilledPrice}');\n              const nodesToRemove = Array.from(priceConditionEl.childNodes).filter(\n                (node) => node.nodeType === Node.TEXT_NODE,\n              );\n              // Clear only non-<em> text nodes (this element contains store events)\n              nodesToRemove.forEach((node) => priceConditionEl.removeChild(node));\n              // eslint-disable-next-line max-len\n              if (before) priceConditionEl.insertBefore(document.createTextNode(before), priceConditionEl.firstChild);\n              if (after) priceConditionEl.appendChild(document.createTextNode(after));\n            } else {\n              priceConditionEl.textContent = textTemplate;\n            }\n          }\n        });\n      });\n    }\n    if (!card.classList.contains('featured')) {\n      // If there is no featured card, do nothing\n      if (!featuredCard) {\n        return;\n      }\n      let space = card.querySelector('h3');\n      space = space.nextElementSibling;\n      const emptyDiv = document.createElement('div');\n      space.insertAdjacentElement('afterend', emptyDiv);\n      emptyDiv.classList.add('featured', 'nanoblock');\n      emptyDiv.style.visibility = 'hidden';\n    }\n  });\n  matchHeights(block, '.price.nanoblock:not(:last-of-type)');\n  matchHeights(block, '.price.condition');\n  matchHeights(block, 'h3:nth-of-type(2)');\n  matchHeights(block, 'p:nth-of-type(2)');\n  matchHeights(block, 'p:nth-of-type(3)');\n  matchHeights(block, 'h4');\n  matchHeights(block, 'ul:not(.variant-selector)');\n  matchHeights(block, '.featured.nanoblock');\n}\n"],"names":[],"mappings":"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"}