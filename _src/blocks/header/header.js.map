{"version":3,"file":"header.js","sources":["../../../src/blocks/header/header.js"],"sourcesContent":["import Target from '@repobit/dex-target';\nimport { User, Cookies } from '@repobit/dex-utils';\nimport {\n  getMetadata, decorateIcons, decorateButtons, decorateTags,\n} from '../../scripts/lib-franklin.js';\n\nimport {\n  getDomain, decorateBlockWithRegionId, decorateLinkWithLinkTrackingId,\n} from '../../scripts/utils/utils.js';\nimport { adobeMcAppendVisitorId } from '../../scripts/target.js';\n\nimport { Constants } from '../../scripts/libs/constants.js';\n\n/**\n * @param {string} username\n * @param {string} email\n * @param {HTMLLIElement} newMegaMenuLoginTab\n * updates the mega menu login popup and avatar\n */\nconst updateMegaMenu = (username, email, newMegaMenuLoginTab) => {\n  let firstInitial;\n  let secondInitial;\n\n  // if the cookies are still valid update the menu\n  if (username) {\n    const splitUserName = username.split(' ');\n    firstInitial = splitUserName[0].charAt(0).toUpperCase();\n    // eslint-disable-next-line no-nested-ternary\n    secondInitial = splitUserName.length > 1\n      ? splitUserName[1].charAt(0).toUpperCase()\n      : (splitUserName[0].length > 1 ? splitUserName[0].charAt(1).toUpperCase() : '');\n  } else {\n    const splitEmail = email.split('@')[0].replace(/[^a-zA-Z]+/g, '');\n    firstInitial = splitEmail.charAt(0).toUpperCase();\n    secondInitial = splitEmail.length > 1 ? splitEmail.charAt(1).toUpperCase() : '';\n  }\n\n  // set user initials in the avatar section\n  const avatar = newMegaMenuLoginTab.querySelector('.mega-menu__right-link');\n  avatar.classList.add('mega-menu__login');\n  avatar.textContent = `${firstInitial}${secondInitial}`;\n\n  // switch to the logged in popup\n  const loginPopup = newMegaMenuLoginTab.querySelector('.mega-menu__second-level-container');\n  const loginPopupHeaderLink = loginPopup.querySelector('.mega-menu__column .navigation__header-link');\n  const loginPopupLinksThatNeedToChange = [...loginPopup.querySelectorAll('.navigation__link')]\n    .filter((navigationLink) => navigationLink.dataset.loggedInLink);\n\n  if (loginPopupHeaderLink) {\n    loginPopupHeaderLink.textContent = username\n      ? `${avatar.dataset.loginText}, ${username}`\n      : `${avatar.dataset.loginText}, ${email}`;\n  }\n\n  const userLoggedInExpirationDate = Cookies.get(Constants.LOGIN_LOGGED_USER_EXPIRY_COOKIE_NAME);\n\n  if (!userLoggedInExpirationDate\n    || (userLoggedInExpirationDate && userLoggedInExpirationDate > Date.now())) {\n    loginPopupLinksThatNeedToChange.forEach(async (loginPopupLink) => {\n      loginPopupLink.href = await Target.appendVisitorIDsTo(loginPopupLink.dataset.loggedInLink);\n    });\n  }\n};\n\n/**\n * @param {Element} root\n * run the login logic after the menu is loaded in\n */\nconst loginFunctionality = async (root = document) => {\n  try {\n    // change login container to display that the user is logged in\n    // if the previous call was successfull\n    await User.login();\n    const userData = await User.info;\n    if (userData) {\n      const megaMenuLoginContainer = root.querySelector('li.mega-menu__login-container');\n      updateMegaMenu(userData.firstname, userData.email, megaMenuLoginContainer);\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(error);\n  }\n};\n\nfunction makeImagePathsAbsolute(contentDiv, baseUrl) {\n  contentDiv.querySelectorAll('img').forEach((imgElement) => {\n    // Update the `src` attribute with an absolute URL\n    imgElement.src = `${baseUrl}${imgElement.getAttribute('src')}`;\n\n    // Function to update relative paths in `srcset` with absolute URLs\n    function makeSrcsetAbsolute(srcset) {\n      return srcset.replace(/(?:,|^)\\s*(\\/[^\\s,]+)/g, (match, path) => match.replace(path, `${baseUrl}${path}`));\n    }\n\n    // Update the `srcset` attribute with absolute URLs\n    if (imgElement.srcset) {\n      imgElement.srcset = makeSrcsetAbsolute(imgElement.srcset, baseUrl);\n    }\n  });\n}\n\nfunction createLoginModal() {\n  const loginModal = document.querySelector('nav > div:nth-child(4)');\n  loginModal.classList.add('login-modal');\n\n  const triangle = document.createElement('div');\n  triangle.className = 'triangle';\n  loginModal.appendChild(triangle);\n\n  const divider = document.createElement('div');\n  divider.className = 'divider';\n  loginModal.appendChild(divider);\n}\n\nfunction handleLoginClick() {\n  const loginModal = document.querySelector('.login-modal');\n  if (loginModal.classList.contains('show')) {\n    loginModal.classList.remove('show');\n  } else {\n    loginModal.style.display = 'flex';\n    setTimeout(() => {\n      loginModal.classList.add('show');\n    }, 0); // Small delay to ensure that the modal is rendered before adding the transition\n  }\n\n  const loginButton = document.querySelector('.nav-sections p:last-child');\n  loginButton.classList.toggle('clicked');\n}\n\nfunction appendUlToP() {\n  const divs = document.querySelectorAll('.mega-menu-websites > div');\n\n  divs.forEach((div) => {\n    const uls = div.querySelectorAll('ul');\n    uls.forEach((ul) => {\n      const p = ul.previousElementSibling;\n\n      const span = document.createElement('div');\n\n      Array.from(ul.children).forEach((li) => {\n        span.textContent += ` ${li.textContent}`;\n        span.textContent = span.textContent.slice(1);\n      });\n\n      p.appendChild(span);\n\n      ul.remove();\n    });\n  });\n}\n\nfunction wrapDivsInMegaMenu() {\n  const nav = document.getElementById('nav');\n  const divs = Array.from(nav.children).filter((node) => node.tagName.toLowerCase() === 'div');\n  const navSectionsIndex = divs.findIndex((div) => div.classList.contains('nav-sections'));\n  const megaMenuDiv = document.createElement('div');\n  megaMenuDiv.className = 'mega-menu-websites';\n  decorateBlockWithRegionId(megaMenuDiv, 'Main Menu|Home Solutions');\n\n  const otherOptionsDiv = document.createElement('div');\n  otherOptionsDiv.className = 'other-options';\n\n  const bottomLinks = document.createElement('div');\n  bottomLinks.className = 'bottom-links';\n\n  megaMenuDiv.appendChild(divs[navSectionsIndex + 1].cloneNode(true));\n  nav.removeChild(divs[navSectionsIndex + 1]);\n\n  for (let i = navSectionsIndex + 2; i < 8; i += 1) {\n    otherOptionsDiv.appendChild(divs[i].cloneNode(true));\n    nav.removeChild(divs[i]);\n  }\n\n  for (let i = 8; i < divs.length; i += 1) {\n    bottomLinks.appendChild(divs[i].cloneNode(true));\n    nav.removeChild(divs[i]);\n  }\n\n  nav.appendChild(megaMenuDiv);\n  megaMenuDiv.appendChild(otherOptionsDiv);\n  megaMenuDiv.appendChild(bottomLinks);\n\n  // Move first child of otherOptionsDiv to megaMenuDiv\n  if (otherOptionsDiv.firstElementChild) {\n    megaMenuDiv.insertBefore(otherOptionsDiv.firstElementChild, otherOptionsDiv);\n  }\n\n  // Move first child of bottomLinks to otherOptionsDiv\n  if (bottomLinks.firstElementChild) {\n    otherOptionsDiv.appendChild(bottomLinks.firstElementChild);\n  }\n\n  const loginModal = document.querySelector('.mega-menu-websites > div:first-child');\n  nav.appendChild(loginModal);\n}\n\nfunction addDescriptionToHref() {\n  const descriptions = document.querySelectorAll('header .button-container > div');\n\n  descriptions.forEach((description) => {\n    const a = description.parentNode.querySelector('a');\n    a.appendChild(description);\n  }, this);\n}\n\nfunction removeButtonClasses() {\n  const bottomLinks = document.querySelector('.bottom-links');\n  const bottomLinksParagraphs = bottomLinks.querySelectorAll('p');\n  const bottomLinksSpans = bottomLinks.querySelectorAll('span');\n  const bottomLinksLinks = bottomLinks.querySelectorAll('a');\n\n  bottomLinksParagraphs.forEach((paragraph) => {\n    paragraph.classList.remove('button-container');\n  });\n\n  bottomLinksSpans.forEach((span) => {\n    span.classList.remove('button-text');\n  });\n\n  bottomLinksLinks.forEach((link) => {\n    link.classList.remove('button');\n  });\n}\n\nfunction buildMegaMenu() {\n  wrapDivsInMegaMenu();\n  appendUlToP();\n  removeButtonClasses();\n  addDescriptionToHref();\n}\n\nfunction renderDesktopHeader(block, nav) {\n  const navSections = nav.querySelector('.nav-sections');\n  const navBrand = nav.querySelector('.nav-brand');\n  const navBrandLinks = nav.querySelectorAll('.nav-brand a');\n\n  if (navSections) {\n    decorateBlockWithRegionId(navSections, 'Main Menu|General Links');\n    const loginLink = document.querySelector('.nav-sections p:last-child');\n    loginLink.addEventListener('click', (e) => {\n      e.preventDefault();\n      handleLoginClick();\n    });\n  }\n\n  if (navBrand && navBrandLinks && navBrandLinks.length > 0) {\n    decorateBlockWithRegionId(navBrand, 'Main Menu|Brands');\n    const forHomeLink = Array.from(navBrandLinks)[0];\n    if (forHomeLink) {\n      forHomeLink.classList.add('active');\n    }\n  }\n\n  const navWrapper = document.createElement('div');\n  navWrapper.className = 'nav-wrapper';\n  navWrapper.append(nav);\n  block.append(navWrapper);\n\n  buildMegaMenu();\n\n  const homeSolutions = document.createElement('p');\n  const homeSolutionText = document.querySelector('.bottom-links > div:last-child > p');\n  homeSolutions.innerHTML = homeSolutionText.innerHTML;\n  homeSolutions.classList.add('home-solutions-link-default');\n  const headerWrapper = document.querySelector('.header-wrapper');\n  headerWrapper.appendChild(homeSolutions);\n\n  const bottomLinks = document.querySelector('.bottom-links');\n  bottomLinks.removeChild(bottomLinks.lastElementChild);\n\n  const megaMenu = document.querySelector('.mega-menu-websites');\n  let isOverHomeSolutions = false;\n  let isOverMegaMenu = false;\n\n  const showMegaMenu = () => {\n    megaMenu.style.display = 'flex';\n    setTimeout(() => {\n      megaMenu.classList.add('mega-menu-websites-show');\n    }, 10);\n  };\n\n  const hideMegaMenu = () => {\n    if (!isOverHomeSolutions && !isOverMegaMenu) {\n      megaMenu.classList.remove('mega-menu-websites-show');\n      homeSolutions.classList.remove('home-solutions-link-hover');\n    }\n  };\n\n  homeSolutions.addEventListener('mouseenter', () => {\n    isOverHomeSolutions = true;\n    showMegaMenu();\n    homeSolutions.classList.add('home-solutions-link-hover');\n  });\n\n  homeSolutions.addEventListener('mouseleave', () => {\n    isOverHomeSolutions = false;\n    setTimeout(hideMegaMenu, 0); // avoid menu to close when moving mouse to menu.\n  });\n\n  megaMenu.addEventListener('mouseenter', () => {\n    isOverMegaMenu = true;\n  });\n\n  megaMenu.addEventListener('mouseleave', () => {\n    isOverMegaMenu = false;\n    hideMegaMenu();\n    homeSolutions.classList.remove('home-solutions-link-hover');\n  });\n\n  createLoginModal();\n}\n\n// MOBILE HEADER //\n\nfunction handleMenuClick() {\n  this.classList.toggle('change');\n\n  const headerWrapper = document.querySelector('.header-wrapper');\n  headerWrapper.classList.toggle('expanded');\n  document.body.classList.toggle('no-scroll');\n\n  let hasToggled = false;\n\n  const optionsWrapper = document.querySelector('.options-wrapper');\n  setTimeout(() => {\n    optionsWrapper.classList.toggle('show');\n  }, 100);\n\n  window.addEventListener('resize', () => {\n    if (window.innerWidth > 1000 && !hasToggled && headerWrapper.classList.contains('expanded')) {\n      headerWrapper.classList.toggle('expanded');\n      this.classList.toggle('change');\n      optionsWrapper.classList.toggle('show');\n      hasToggled = true;\n    } else if (window.innerWidth <= 1000) {\n      hasToggled = false;\n    }\n  });\n\n  // Select the first child of mega-menu and all div children of other-options\n  const megaMenuFirstChild = document.querySelector('.mega-menu-websites').firstElementChild;\n\n  const otherOptionsChildren = Array.from(document.querySelector('.other-options').children);\n  const navDivs = [megaMenuFirstChild].concat(otherOptionsChildren);\n  const menuOptions = [];\n\n  // Iterate over each div\n  for (let i = 0; i < navDivs.length; i += 1) {\n    const menuOption = {};\n    const div = navDivs[i];\n\n    // Find the h2 within this div and assign its innerHTML to the title of menuOption\n    const h2 = div.querySelector('h2');\n    if (h2) {\n      menuOption.title = h2.childNodes[0].textContent.trim();\n\n      // find all links that are not children of h2\n      const links = div.querySelectorAll('a:not(h2 a)');\n\n      // Find all a tags within this div\n      if (links.length > 0) {\n        menuOption.subMenu = [];\n\n        links.forEach((link) => {\n          const submenuItem = {};\n          // Clone the link element\n          const cloneLink = link.cloneNode(true);\n          submenuItem.name = cloneLink.textContent;\n          submenuItem.url = cloneLink.href;\n\n          submenuItem.updatedLinkHTML = cloneLink.outerHTML;\n\n          menuOption.subMenu.push(submenuItem);\n        });\n      }\n      menuOptions.push(menuOption);\n    } else {\n      // If there is no h2 in the div, remove the div from the DOM\n      div.parentNode.removeChild(div);\n    }\n  }\n\n  let originalMenuHTML;\n\n  function generateSubMenu(option) {\n    return `<div class='sub-menu-title' data-option='${option.title}'>${option.title}</div>${option.subMenu.map((subMenuItem) => `<a href='${subMenuItem.url}'>${subMenuItem.updatedLinkHTML}</a>`).join('')}`;\n  }\n\n  const menuOptionsHTML = menuOptions.map((option) => `<div class='menu-option' data-option='${option.title}'>${option.title}</div>`).join('');\n\n  // eslint-disable-next-line prefer-const\n  originalMenuHTML = menuOptionsHTML;\n\n  optionsWrapper.innerHTML = menuOptionsHTML;\n\n  function handleMenuOptionClick() {\n    const optionTitle = this.dataset.option;\n    const selectedOption = menuOptions.find((opt) => opt.title === optionTitle);\n    optionsWrapper.innerHTML = generateSubMenu(selectedOption);\n\n    const subMenuTitle = document.querySelector('.sub-menu-title');\n    if (subMenuTitle) {\n      // eslint-disable-next-line no-use-before-define\n      subMenuTitle.addEventListener('click', handleSubMenuTitleClick);\n    }\n    const optionWrapperShow = document.querySelector('.options-wrapper.show');\n    optionWrapperShow.style.height = 'auto';\n\n    const optionWrapperShowDivs = optionWrapperShow.querySelectorAll('div:not(.sub-menu-title)');\n\n    optionWrapperShowDivs.forEach((div) => {\n      div.parentNode.removeChild(div);\n    });\n  }\n\n  function attachMenuOptionClickEvents() {\n    document.querySelectorAll('.menu-option').forEach((menuOption) => {\n      menuOption.addEventListener('click', handleMenuOptionClick);\n    });\n    const optionWrapperShow = document.querySelector('.options-wrapper.show');\n    if (optionWrapperShow) {\n      optionWrapperShow.style.height = '100vh';\n    }\n  }\n\n  function handleSubMenuTitleClick() {\n    optionsWrapper.innerHTML = originalMenuHTML;\n    attachMenuOptionClickEvents();\n  }\n\n  attachMenuOptionClickEvents();\n}\n\nfunction renderMobileHeader(nav) {\n  const headerBlock = document.querySelector('.header.block');\n\n  const navWrapper = document.createElement('div');\n  navWrapper.className = 'nav-wrapper';\n  navWrapper.append(nav);\n\n  const wrapperDiv = document.createElement('div');\n  wrapperDiv.classList.add('menu-wrapper');\n  wrapperDiv.addEventListener('click', handleMenuClick);\n\n  // Create three span elements (bars)\n  for (let i = 0; i < 3; i += 1) {\n    const barSpan = document.createElement('span');\n    barSpan.classList.add('menu-bar');\n    wrapperDiv.appendChild(barSpan);\n  }\n\n  const optionsWrapper = document.createElement('div');\n  optionsWrapper.className = 'options-wrapper';\n\n  headerBlock.appendChild(nav);\n  headerBlock.appendChild(wrapperDiv);\n  headerBlock.appendChild(optionsWrapper);\n}\n\nasync function runDefaultHeaderLogic(block) {\n  const hero = document.querySelector('.hero');\n\n  if (hero && hero.classList.contains('black-background')) {\n    const header = document.querySelector('header');\n    header.classList.add('black-background');\n  }\n\n  const headerBlock = document.querySelector('.header.block');\n  headerBlock.removeChild(headerBlock.firstElementChild);\n\n  // fetch nav content\n  const navPath = getMetadata('nav') || '/nav';\n  const resp = await fetch(`${navPath}.plain.html`);\n\n  if (resp.ok) {\n    const html = await resp.text();\n\n    if (html.includes('aem-banner')) {\n      const websiteDomain = getDomain();\n      let aemFetchDomain;\n\n      if (websiteDomain === 'en-us') {\n        aemFetchDomain = 'en';\n      } else if (websiteDomain.includes('-global')) {\n        const [singleDomain] = websiteDomain.split('-');\n        aemFetchDomain = singleDomain;\n      } else {\n        aemFetchDomain = websiteDomain.split('-').join('_');\n      }\n\n      const aemHeaderFetch = await fetch(`${Constants.PUBLIC_URL_ORIGIN}/content/experience-fragments/bitdefender/language_master/${aemFetchDomain}/header-navigation/mega-menu/master/jcr:content/root.html`);\n      if (!aemHeaderFetch.ok) {\n        return;\n      }\n      const aemHeaderHtml = await aemHeaderFetch.text();\n      const nav = document.createElement('div');\n      const shadowRoot = nav.attachShadow({ mode: 'open' });\n\n      const contentDiv = document.createElement('div');\n      contentDiv.style.display = 'none';\n\n      contentDiv.innerHTML = aemHeaderHtml;\n\n      // make image paths absolute for non-production environments\n      if (Constants.PUBLIC_URL_ORIGIN === 'https://stage.bitdefender.com') {\n        makeImagePathsAbsolute(contentDiv, Constants.PUBLIC_URL_ORIGIN);\n      }\n\n      const loadedLinks = [];\n      contentDiv.querySelectorAll('link').forEach((linkElement) => {\n        // update the links so that they work on all Franklin domains\n        linkElement.href = `${Constants.PUBLIC_URL_ORIGIN}${linkElement.getAttribute('href')}`;\n\n        // add a promise for each link element in the code\n        // so that we can wait on all the CSS before displaying the component\n        loadedLinks.push(new Promise((resolve, reject) => {\n          linkElement.onload = () => {\n            resolve();\n          };\n\n          linkElement.onerror = () => {\n            reject();\n          };\n        }));\n      });\n\n      // a list of all the components to be received from aem components\n      const aemComponents = ['languageBanner', 'megaMenu'];\n\n      // add logic so that every time an AEM function is fully loaded\n      // it is directly run using the shadow dom as parameter\n      aemComponents.forEach((aemComponentName) => {\n        window.addEventListener(aemComponentName, () => {\n          window[aemComponentName](shadowRoot);\n        });\n      });\n\n      // select all the scripts from contet div and\n      const scripts = contentDiv.querySelectorAll('script');\n      scripts.forEach((script) => {\n        const newScript = document.createElement('script');\n        newScript.src = `${Constants.PUBLIC_URL_ORIGIN}${script.getAttribute('src')}`;\n        newScript.defer = true;\n        contentDiv.appendChild(newScript);\n      });\n\n      shadowRoot.appendChild(contentDiv);\n      const body = document.querySelector('body');\n      body.style.maxWidth = 'initial';\n\n      const header = document.querySelector('header');\n      if (header) {\n        header.remove();\n      }\n\n      document.querySelector('body').prepend(nav);\n\n      await Promise.allSettled(loadedLinks);\n      contentDiv.style.display = 'block';\n      nav.classList.add('header-with-language-banner');\n\n      adobeMcAppendVisitorId(shadowRoot);\n      loginFunctionality(shadowRoot);\n      return;\n    }\n\n    const nav = document.createElement('nav');\n    nav.id = 'nav';\n    nav.innerHTML = html;\n\n    const classes = ['brand', 'sections'];\n    classes.forEach((c, i) => {\n      const section = nav.children[i];\n      if (section) section.classList.add(`nav-${c}`);\n    });\n\n    decorateButtons(nav);\n    renderMobileHeader(nav);\n    renderDesktopHeader(block, nav);\n    decorateIcons(nav);\n    decorateTags(nav);\n\n    // Select the parent elements\n    const bottomLinks = document.querySelector('.bottom-links');\n    const header = document.querySelector('header');\n\n    const thirdChild = bottomLinks.children[2];\n\n    bottomLinks.removeChild(thirdChild);\n\n    thirdChild.classList.add('logo');\n\n    const container = document.createElement('div');\n    container.classList.add('logo-container');\n    decorateBlockWithRegionId(container, 'Main Menu|Logo Container');\n    container.appendChild(thirdChild);\n\n    if (header.querySelector('p.home-solutions-link-default')) {\n      container.appendChild(header.querySelector('p.home-solutions-link-default'));\n    }\n    decorateIcons(container);\n    header.appendChild(container);\n  }\n\n  // assign an aria-label to the a tag inside of .logo\n  const logoLink = document.querySelector('.logo a');\n  logoLink.setAttribute('aria-label', 'Logo');\n  decorateLinkWithLinkTrackingId(logoLink, 'Bitdefender Logo');\n\n  const secondSpan = document.querySelector('.header-wrapper > div > p span:nth-child(2)');\n  if (secondSpan) {\n    secondSpan.parentNode.removeChild(secondSpan);\n  }\n\n  const header = document.getElementsByClassName('header-wrapper')[0];\n\n  window.addEventListener('scroll', () => {\n    if (window.innerWidth > 990) {\n      if (window.scrollY > 0) {\n        header.style.display = 'none';\n        const loginModal = document.querySelector('nav > div:nth-child(4)');\n        loginModal.classList.remove('show');\n      } else {\n        header.style.display = 'block';\n      }\n    }\n  });\n}\n\nasync function runLandingPageHeaderLogic(block) {\n  // fetch nav content\n  const navPath = getMetadata('nav') || '/nav';\n  const resp = await fetch(`${navPath}.plain.html`);\n  const html = await resp.text();\n\n  block.classList.add('lp-header', 'py-3', 'default-content-wrapper');\n  const headerWrapper = block.closest('header');\n\n  headerWrapper.id = 'header-ferrari';\n  headerWrapper.classList.add('header-spurs', 'dark');\n  block.innerHTML = html;\n\n  const lpHeader = block.closest('.lp-header');\n  lpHeader.addEventListener('click', () => {\n    lpHeader.classList.toggle('active', !lpHeader.classList.contains('active'));\n  });\n}\n\nasync function runQuizPageHeaderLogic(block) {\n  // fetch nav content\n  const navPath = getMetadata('nav') || '/nav';\n  const resp = await fetch(`${navPath}.plain.html`);\n  const html = await resp.text();\n\n  block.classList.add('quiz', 'py-3', 'default-content-wrapper');\n  const headerWrapper = block.closest('header');\n\n  headerWrapper.classList.add('dark');\n  block.innerHTML = html;\n\n  decorateIcons(block);\n}\n\n/**\n * applies header factory based on header variation\n * @param {String} headerMetadata The header variation: landingpage' or none\n * @param {Element} header The header element\n */\nfunction applyHeaderFactorySetup(headerMetadata, header) {\n  switch (headerMetadata) {\n    case 'landingpage':\n      runLandingPageHeaderLogic(header);\n      break;\n    case 'quiz':\n      runQuizPageHeaderLogic(header);\n      break;\n    case 'hidden':\n      break;\n    default:\n      runDefaultHeaderLogic(header);\n      break;\n  }\n}\n\nexport default async function decorate(block) {\n  const headerMetadata = getMetadata('header-type');\n  block.parentNode.classList.add(headerMetadata || 'default');\n  applyHeaderFactorySetup(headerMetadata, block);\n}\n"],"names":["updateMegaMenu","username","email","newMegaMenuLoginTab","firstInitial","secondInitial","splitUserName","splitEmail","avatar","loginPopup","loginPopupHeaderLink","loginPopupLinksThatNeedToChange","navigationLink","userLoggedInExpirationDate","Cookies","Constants","loginPopupLink","Target","loginFunctionality","root","User","userData","megaMenuLoginContainer","error","makeImagePathsAbsolute","contentDiv","baseUrl","imgElement","makeSrcsetAbsolute","srcset","match","path","createLoginModal","loginModal","triangle","divider","handleLoginClick","appendUlToP","div","ul","p","span","li","wrapDivsInMegaMenu","nav","divs","node","navSectionsIndex","megaMenuDiv","decorateBlockWithRegionId","otherOptionsDiv","bottomLinks","i","addDescriptionToHref","description","removeButtonClasses","bottomLinksParagraphs","bottomLinksSpans","bottomLinksLinks","paragraph","link","buildMegaMenu","renderDesktopHeader","block","navSections","navBrand","navBrandLinks","e","forHomeLink","navWrapper","homeSolutions","homeSolutionText","megaMenu","isOverHomeSolutions","isOverMegaMenu","showMegaMenu","hideMegaMenu","handleMenuClick","headerWrapper","hasToggled","optionsWrapper","megaMenuFirstChild","otherOptionsChildren","navDivs","menuOptions","menuOption","h2","links","submenuItem","cloneLink","originalMenuHTML","generateSubMenu","option","subMenuItem","menuOptionsHTML","handleMenuOptionClick","optionTitle","selectedOption","opt","subMenuTitle","handleSubMenuTitleClick","optionWrapperShow","attachMenuOptionClickEvents","renderMobileHeader","headerBlock","wrapperDiv","barSpan","runDefaultHeaderLogic","hero","navPath","getMetadata","resp","html","websiteDomain","getDomain","aemFetchDomain","singleDomain","aemHeaderFetch","aemHeaderHtml","shadowRoot","loadedLinks","linkElement","resolve","reject","aemComponentName","script","newScript","body","header","adobeMcAppendVisitorId","c","section","decorateButtons","decorateIcons","decorateTags","thirdChild","container","logoLink","decorateLinkWithLinkTrackingId","secondSpan","runLandingPageHeaderLogic","lpHeader","runQuizPageHeaderLogic","applyHeaderFactorySetup","headerMetadata","decorate"],"mappings":"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"}