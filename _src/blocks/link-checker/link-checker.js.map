{"version":3,"file":"link-checker.js","sources":["../../../src/blocks/link-checker/link-checker.js"],"sourcesContent":["import {\n  WindowLoadStartedEvent,\n  WindowLoadedEvent,\n  UserDetectedEvent,\n  AdobeDataLayerService,\n} from '@repobit/dex-data-layer';\nimport {\n  BotPrevention,\n} from '../../scripts/utils/bot-prevention.js';\n\nclass StatusMessageFactory {\n  static createMessage(status, url, statusMessages) {\n    let urlObject = url;\n    // Ensure the URL has a protocol\n    if (!/^https?:\\/\\//i.test(url)) {\n      urlObject = `http://${url}`;\n    }\n    urlObject = new URL(urlObject);\n\n    // Ensure the URL contains www\n    if (!urlObject.hostname.startsWith('www.')) {\n      urlObject.hostname = `www.${urlObject.hostname}`;\n    }\n\n    // Manually defined mapping of number keys to status strings\n    const numberToStatusMap = {\n      1: 'safe',\n      2: 'so_far_so_good_1',\n      3: 'so_far_so_good_2',\n      4: 'malware & phishing',\n      5: 'malware',\n      6: 'c&c',\n      7: 'malvertising & fraud & phishing',\n      8: 'fraud',\n      9: 'phishing',\n      10: 'malvertising',\n      11: 'pua',\n      12: 'homograph',\n      13: 'miner',\n      14: 'miner-server',\n      15: 'spam',\n      16: 'malware-hd',\n      17: 'untrusted',\n      18: 'malicious',\n      other: 'other',\n    };\n    const mappedStatus = numberToStatusMap[status] || numberToStatusMap.other;\n    const isSafe = mappedStatus.includes('safe')\n                 || mappedStatus.includes('so_far_so_good_1')\n                 || mappedStatus.includes('so_far_so_good_2');\n    let msg = statusMessages[mappedStatus.toLowerCase()];\n    msg = msg.replace('<domain-name>', urlObject.hostname);\n    if (msg) {\n      return { text: msg, className: isSafe ? 'result safe' : 'result danger', status: mappedStatus };\n    }\n    return { text: `Status: ${mappedStatus}`, className: 'result warning' };\n  }\n}\n\nfunction changeTexts(block, result, statusTitles) {\n  const titleText = statusTitles[result.status.toLowerCase()] || statusTitles.default;\n  block.querySelector('h1').textContent = titleText;\n}\n\nconst isValidUrl = (urlString) => {\n  const urlPattern = new RegExp('^(https?:\\\\/\\\\/)?' // validate protocol\n      + '((([a-z\\\\d]([a-z\\\\d-_]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' // validate domain name\n      + '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' // validate OR ip (v4) address\n      + '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+@]*)*' // validate port and path\n      + '(\\\\?[;&a-z\\\\d%\\\\/_@.~+=-]*)?' // validate query string\n      + '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // validate fragment locator\n  return urlPattern.test(urlString);\n};\n\nasync function checkLink(block, input, result, statusMessages, statusTitles) {\n  const url = input.value.trim();\n  if (!url || !isValidUrl(url)) {\n    result.textContent = 'Please enter a valid URL';\n    result.className = 'result danger';\n    return;\n  }\n\n  input.closest('.input-container').classList.add('loader-circle');\n  let response = await fetch('https://eu.nimbus.bitdefender.net/tools/link-checker', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Nimbus-ClientID': '81b10964-a3c1-44f6-b5ac-7eac82db3ab1',\n    },\n    body: JSON.stringify({ url }),\n  });\n\n  if (response.status === 401) {\n    const challengeData = await response.json();\n    const solvedChallenge = await BotPrevention.solveChallange(challengeData);\n    response = await fetch('https://eu.nimbus.bitdefender.net/tools/link-checker', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Nimbus-ClientID': '81b10964-a3c1-44f6-b5ac-7eac82db3ab1',\n      },\n      // eslint-disable-next-line max-len\n      body: JSON.stringify({ url, pow_challenge: challengeData.pow_challenge, pow_solution: solvedChallenge.nonces }),\n    });\n  }\n\n  if (!response.ok) {\n    result.innerHTML = `\n      <strong>Something went wrong</strong><br>\n      The system encountered an error while trying to check the link you provided. Please try again in a few minutes.`;\n    result.className = 'result danger no-response';\n    input.closest('.input-container').classList.remove('loader-circle');\n    return;\n  }\n\n  const data = await response.json();\n  const { status } = data;\n  const message = StatusMessageFactory.createMessage(status, url, statusMessages);\n  result.textContent = message.text;\n  result.className = message.className;\n  block.closest('.section').classList.add(message.className.split(' ')[1]);\n  input.setAttribute('disabled', '');\n  document.getElementById('inputDiv').textContent = url;\n\n  changeTexts(block, message, statusTitles);\n  input.closest('.input-container').classList.remove('loader-circle');\n\n  AdobeDataLayerService.push(new WindowLoadStartedEvent((pageLoadStartedInfo) => {\n    pageLoadStartedInfo.name += `:${message.status}`;\n    return pageLoadStartedInfo;\n  }));\n  AdobeDataLayerService.push(new UserDetectedEvent());\n  AdobeDataLayerService.push(new WindowLoadedEvent());\n}\n\nasync function resetChecker(block) {\n  const classesToRemove = ['danger', 'safe'];\n  const section = block.closest('.section');\n\n  // Iterate over the classes and remove them from the section\n  classesToRemove.forEach((className) => {\n    if (section.classList.contains(className)) {\n      section.classList.remove(className);\n    }\n  });\n\n  // Reset the input and result elements\n  const input = block.querySelector('#link-checker-input');\n  const result = block.querySelector('.result');\n  const h1 = block.querySelector('h1');\n  input.removeAttribute('disabled');\n  input.value = '';\n  result.className = 'result';\n  h1.textContent = 'Is This Link Really Safe?';\n\n  AdobeDataLayerService.push(new WindowLoadStartedEvent({}));\n  AdobeDataLayerService.push(new UserDetectedEvent());\n  AdobeDataLayerService.push(new WindowLoadedEvent());\n}\n\nfunction createSharePopup(element) {\n  element.style.maxWidth = `${element.offsetWidth}px`;\n  element.style.maxHeight = `${element.offsetHeight}px`;\n  const sharePopup = document.createElement('div');\n  sharePopup.classList.add('share-popup');\n  element.insertAdjacentElement('beforeend', sharePopup);\n  return sharePopup;\n}\n\nfunction copyToClipboard(block, caller, popupText) {\n  const copyText = window.location.href;\n\n  // Copy the text inside the text field\n  navigator.clipboard.writeText(copyText);\n  const buttonsContainer = block.querySelector('.buttons-container');\n  if (buttonsContainer) {\n    const sharePopup = block.querySelector('.share-popup') || createSharePopup(caller);\n    sharePopup.textContent = `${popupText}`;\n    const translateXValue = Math.abs((sharePopup.offsetWidth - caller.offsetWidth) / 2);\n    sharePopup.style = `transform:translateX(-${translateXValue}px); opacity: 1`;\n    setTimeout(() => {\n      sharePopup.style = `transform:translateX(-${translateXValue}px); opacity:0;`;\n    }, 2000);\n  }\n}\n\nfunction createStatusMessages(block) {\n  const statusMessages = {};\n\n  const divWithStatusMessages = Array.from(block.querySelectorAll('div')).find((div) => {\n    const firstParagraph = div.querySelector('p');\n    return firstParagraph && firstParagraph.textContent.includes('<status-messages>');\n  });\n\n  const pElements = divWithStatusMessages.querySelectorAll('p');\n  // Skip the first <p> if it contains a header like \"<status-messages>\"\n  pElements.forEach((p, index) => {\n    if (index === 0) {\n      return;\n    }\n\n    const parts = p.textContent.split(':');\n    if (parts.length >= 2) {\n      const status = parts[0].trim();\n      const message = parts.slice(1).join(':').trim();\n      statusMessages[status.toLowerCase()] = message;\n    }\n  });\n\n  return statusMessages;\n}\n\nfunction createStatusTitles(block) {\n  const statusTitles = {};\n\n  const divWithstatusTitles = Array.from(block.querySelectorAll('div')).find((div) => {\n    const firstParagraph = div.querySelector('p');\n    return firstParagraph && firstParagraph.textContent.includes('<titles-change>');\n  });\n\n  divWithstatusTitles.classList.add('status-titles');\n  const pElements = divWithstatusTitles.querySelectorAll('p');\n  // Skip the first <p> if it contains a header like \"<titles-change>\"\n  pElements.forEach((p, index) => {\n    if (index === 0) {\n      return;\n    }\n\n    const parts = p.textContent.split(':');\n    if (parts.length >= 2) {\n      const status = parts[0].trim();\n      const message = parts.slice(1).join(':').trim();\n      statusTitles[status.toLowerCase()] = message;\n    }\n  });\n\n  // remove the div from the dom, as it is already parsed and we don't need it anymore\n  divWithstatusTitles.remove();\n  return statusTitles;\n}\n\nexport default function decorate(block) {\n  const { clipboardText } = block.closest('.section').dataset;\n\n  const privacyPolicyDiv = block.querySelector(':scope > div:nth-child(3)');\n  privacyPolicyDiv.classList.add('privacy-policy');\n\n  const statusMessages = createStatusMessages(block);\n  const statusTitles = createStatusTitles(block);\n\n  const formContainer = document.createElement('div');\n  formContainer.classList.add('link-checker-form');\n\n  const inputContainer = document.createElement('div');\n  inputContainer.classList.add('input-container');\n  formContainer.appendChild(inputContainer);\n\n  const input = document.createElement('input');\n  input.type = 'text';\n  input.placeholder = 'example-url.com';\n  input.id = 'link-checker-input';\n\n  const copyElement = document.createElement('span');\n  copyElement.id = 'copy-to-clipboard';\n\n  const inputDiv = document.createElement('p');\n  inputDiv.setAttribute('id', 'inputDiv');\n\n  const divContainer = document.createElement('div');\n  divContainer.className = 'input-container__container';\n  divContainer.appendChild(input);\n  block.prepend(inputDiv);\n  divContainer.appendChild(copyElement);\n\n  inputContainer.appendChild(divContainer);\n\n  copyElement.addEventListener('click', async () => {\n    try {\n      const text = await navigator.clipboard.readText();\n      input.value += text;\n    } catch (error) {\n      // continue regardless of error\n    }\n  });\n\n  const button = document.createElement('button');\n  button.textContent = 'Check URL';\n  button.classList.add('check-url');\n  inputContainer.appendChild(button);\n\n  const result = document.createElement('div');\n  result.className = 'result';\n  formContainer.appendChild(result);\n\n  const buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add('buttons-container');\n\n  const shareButton = document.createElement('button');\n  shareButton.innerHTML = '<span>Share Link Checker</span>';\n  shareButton.classList.add('share-button');\n\n  const checkAnother = document.createElement('button');\n  checkAnother.innerHTML = '<span>Check Another Link</span>';\n  checkAnother.classList.add('check-another-button');\n\n  buttonsContainer.appendChild(shareButton);\n  buttonsContainer.appendChild(checkAnother);\n\n  formContainer.appendChild(buttonsContainer);\n  block.querySelectorAll(':scope > div')[1].replaceWith(formContainer);\n  const [safeImage, dangerImage] = block.querySelectorAll('picture');\n  safeImage.classList.add('safe-image');\n  dangerImage.classList.add('danger-image');\n\n  button.addEventListener('click', () => checkLink(block, input, result, statusMessages, statusTitles));\n  checkAnother.addEventListener('click', () => resetChecker(block));\n  shareButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    copyToClipboard(block, shareButton, clipboardText);\n  });\n\n  // if the text is cleared, do not display any error\n  input.addEventListener('input', () => {\n    const url = input.value.trim();\n    // If the input is cleared, reset the result text and class\n    if (url === '') {\n      result.textContent = '';\n      result.className = '';\n    }\n  });\n  input.addEventListener('paste', () => {\n    result.textContent = '';\n    result.className = '';\n  });\n}\n"],"names":[],"mappings":"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"}